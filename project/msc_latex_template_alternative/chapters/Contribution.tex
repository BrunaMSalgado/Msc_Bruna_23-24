\chapter{Contribution}

Main result(s) and their scientific evidence

\section{Introduction}

\section{Summary}

%ToDo: Extending the quantum model with measurements -> Talk about the model (operadores como morfismos, a nossa estrutura algebrica é o espaços vetorias); CPTP model; measurents and the diamond norm é menor ou igual a um; examples (qualtum walk)
%\todo[inline]{The original todo note withouth changed colours.\newline Here's another line.}


\section{Measurements}

In order to established that the theory introduced is valid in quantum programming, it is necessary to build a model. The model can be seen as a category where the morphisms are the CPTP super-operators (quantum channels). The algebric structure of this model is given by the vector spaces. 
Any completely-positive and trace-preserving map has a diamond norm equal to one [\cite{watrous2018theory}]. Since the measurement operation is completely positive and trace-preserving, its  diamond norm is equal to one. This is a desirable property, as it ensures that the measurement operation does not increase the distance between states, and as a consequence, composition of programs remains valid.


\subsection{Example: Deutsch's Algorithm}

In 1985, David Deutsch presented an algorithm that determines whether a function $f$ is constant for a single-bit input (\textit{i.e.}, either equal to 1 for all $x$ or equal to 0 for all $x$) or balanced (\textit{i.e.}, equal to 1 for half of the values of x and equal to 0 for the other half) [\cite{deutsch1985quantum}]. Classically, to determine which case holds requires running $f$ twice. Quantumly, it suffices to run f once. The Deutsch-Jozsa Algorithm is a simple example of a quantum algorithm that outperforms its classical counterpart. The algorithm is based on the concept of a quantum oracle, which is a black box that implements a unitary transformation $U_f$ such that $U_f \ket{x}\ket{y} = \ket{x}\ket{y \oplus f(x)}$, where $\oplus$ denotes addition modulo 2. The quantum circuit implementing Deutsch’s algorithm is presented in  \autoref{fig:Deutsch-Jozsa}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
    \lstick{$\ket{0}$} &  \qw & \gate{H} & \gate[wires=2]{U_f} & \gate{H} & \meter{} \\
    \lstick{$\ket{1}$} &  \qw & \gate{H} & \qw & \qw & \qw\\ 
  \end{quantikz}
  \caption{Quantum circuit implementing Deutsch’s algorithm}
  \label{fig:Deutsch-Jozsa}
\end{figure}

Using lambda calculus, the Deutsch-Jozsa Algorithm can be expressed as:
\begin{align*}
\text{Deutsch} :    \hspace{5pt} (\textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit}) \multimap \textit{bit} \otimes \textit{qbit}
\end{align*}
\begin{align*}
\text{Deutsch} = & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
& \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas} (H( q_{1})) \otimes q_{2}
 \end{align*}

Regarding the interpretation of the Deutsch Algorithm, one has that:
\begin{equation}
\begin{split}
 & \ket{0} \otimes \ket{1} \\
 \xmapsto{ H \otimes H} \quad & \frac{1}{\sqrt{2}}(\ket{0} + \ket{1}) \otimes \ket{-} \\
\end{split}
\end{equation}

With respecto to  quantum oracle $U_f$, it is possible to show that:
\begin{equation}
\begin{split}
  &\ket{x} \otimes \ket{-} =   \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0} - \ket{1}) = \frac{1}{\sqrt{2}}(\ket{x} \otimes \ket{0} - \ket{x} \otimes \ket{1})) \\
  \xmapsto{ \hspace{2pt} U_{f} \hspace{2pt}} \hspace{4pt} &  \frac{1}{\sqrt{2}}(\ket{x} \otimes \ket{0 \oplus f(x)} - \ket{x} \otimes \ket{1 \oplus f(x)}) &\hspace{50pt} \{\text{Defn. of } U_f\} \\
  = \hspace{4pt}  & \frac{1}{\sqrt{2}}(\ket{x} \ket{f(x)} - \ket{x} \ket{\neg f(x)}) & \{0\oplus x=x, 1\oplus x = \neg x\} \\
  = \hspace{4pt}  & \frac{1}{\sqrt{2}}(\ket{x} \otimes (\ket{f(x)}-\ket{\neg f(x)}))
 \end{split}
\end{equation}

Proceding by case distinction:
\begin{equation}
  \frac{1}{\sqrt{2}}(\ket{x} \otimes (\ket{f(x)}-\ket{\neg f(x)}) = 
  \begin{cases}
    \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0}-\ket{1}) &\text{ if } f(x)=0    \\
    \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{1}-\ket{0}) &\text{ if }   f(x)= 1 
  \end{cases}
\end{equation}

And conclude that
\begin{equation}
 \ket{x} \otimes  \frac{1}{\sqrt{2}}(\ket{f(x)}-\ket{\neg f(x)}) = (-1)^{f(x)} \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0}-\ket{1}) = (-1)^{f(x)} \ket{x} \otimes \ket{-}
\end{equation}

Returning to the interpretation of the Deutsch Algorithm, one has that:
\begin{equation}
\begin{split}
  \quad & \frac{1}{\sqrt{2}}(\ket{0} + \ket{1}) \otimes \ket{-}\\
  \xmapsto{ \hspace{5 pt} U_{f} \hspace{5pt}} \quad & \frac{1}{\sqrt{2}}( U_{f} \ket{0} \otimes \ket{-} + U_{f} \ket{1} \otimes \ket{-})) \\
  = \quad & \frac{1}{\sqrt{2}}( (-1)^{f(0)} \ket{0} \otimes \ket{-} + (-1)^{f(1)} \ket{1} \otimes \ket{-}) \\
  = \quad &
  \begin{cases}
    (\pm 1) \ket{+} \otimes \ket{-} &\text{ if }   f(0)= f(1) \\
    (\pm 1) \ket{-} \otimes \ket{-} &\text{ if }   f(0) \neq f(1)
  \end{cases} \\
  \xmapsto{ \hspace{2pt} H \otimes I \hspace{2pt}} \quad & 
  \begin{cases}
    (\pm 1) \ket{0} \otimes \ket{-} &\text{ if }   f(0)= f(1) \\
    (\pm 1) \ket{1} \otimes \ket{-} &\text{ if }   f(0) \neq f(1)\\
  \end{cases} 
\end{split}
\end{equation}

Attending to the interpretation of quantum states, concerning the measurement of the first qubit, one has that:
\begin{equation}
\begin{split}
  \quad &
  \begin{cases}
    \ket{0} \bra{0} \otimes \ket{-} \bra{-}  &\text{ if }   f(0)= f(1) \\
    \ket{1} \bra{1} \otimes \ket{-} \bra{-} &\text{ if }   f(0) \neq f(1)
  \end{cases} \\
  \xmapsto{ \hspace{2pt} \textit{meas} \otimes I \hspace{2pt}} \quad &
  \begin{cases}
   (\ket{-} \bra{-},0)  &\text{ if }   f(0)= f(1) \\
   (0,\ket{-} \bra{-}) &\text{ if }   f(0) \neq f(1) 
  \end{cases} \\
\end {split}
\end{equation} 


A measurement error is characterized by reading a "1" as a "0" or vice versa. Furthermore, it's important to note that measurement errors do not impact all states uniformly [\cite{tannu2019mitigating}]. Consequently, there is a discrepancy in how frequently the state "1" is incorrectly read as "0" compared to how often the state "0" is measured as "1" or vice versa.

For example, considering there is a 10\% chance of measuring a "0" as a "1" and a 30\% chance of measuring a "1" as a "0", the resulting state after measurement is:
\begin{equation}
\begin{split}
  \quad &
  \begin{cases}
   (0.9\ket{-} \bra{-},0.1\ket{-} \bra{-})  &\text{ if }   f(0)= f(1) \\
   (0.3\ket{-} \bra{-}, 0.7\ket{-} \bra{-}) &\text{ if }   f(0) \neq f(1) 
  \end{cases} \\
\end {split}
\end{equation}

The norm of a tuple is defined as the sum of the norms of its components, \textit{i.e.}, for any operators $v$ and $w$:
\begin{equation} \label{eq:norm_tuple}
  \lVert (v,w) \rVert = \lVert v \rVert + \lVert w \rVert
\end{equation}

As a result, the discrepancy between the ideal and actual measurement results corresponds to:
\begin{equation}
  \begin{split}
    \quad &
    \begin{cases}
      \lVert(\ket{-} \bra{-},0) - (0.9\ket{-} \bra{-},0.1\ket{-} \bra{-})   \rVert &\text{ if }   f(0)= f(1) \\
      \lVert (0,\ket{-} \bra{-}) - (0.3\ket{-} \bra{-}, 0.7\ket{-} \bra{-}) \rVert &\text{ if }   f(0) \neq f(1) 
    \end{cases} \\
    = \quad &
    \begin{cases}
      \lVert(0.1\ket{-} \bra{-},-0.1\ket{-} \bra{-})   \rVert &\text{ if }   f(0)= f(1) \\
      \lVert (-0.3\ket{-} \bra{-}, 0.3\ket{-} \bra{-}) \rVert &\text{ if }   f(0) \neq f(1)
    \end{cases} \\
    = \quad &
    \begin{cases}
      \lVert 0.1\ket{-} \bra{-}\rVert + \lVert - 0.1 \ket{-} \bra{-}\rVert &\text{ if }   f(0)= f(1) \\
      \lVert -0.3\ket{-} \bra{-}\rVert + \lVert - 0.3 \ket{-} \bra{-}\rVert &\text{ if }   f(0) \neq f(1)
    \end{cases} \\
  \end {split}
  \end{equation}

  Employing \autoref{eq:Bloch_vector}, it is easily concluded that the Bloch vector of the state $\ket{-} \bra{-}$ is $(-1,0,0)$. Consequently,  the discrepancy between the ideal and actual measurement results is:
  \begin{equation}
    \begin{split}
      & 
      \begin{cases}
        \lVert (-0.1,0,0) \rVert_{2} + \lVert (0.1,0,0) \ket{-} \bra{-}\rVert_{2} &\text{ if }   f(0)= f(1) \\
        \lVert(0.3,0,0)\ket{-} \bra{-}\rVert_{2} + \lVert (-0.3,0,0) \ket{-} \bra{-}\rVert_{2} &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
      = \quad &
      \begin{cases}
        \sqrt{(-0.1)^{2} + 0^{2} + 0^{2}} + \sqrt{(0.1)^{2} + 0^{2} + 0^{2}} &\text{ if }   f(0)= f(1) \\
        \sqrt{(0.3)^{2} + 0^{2} + 0^{2}} + \sqrt{(-0.3)^{2} + 0^{2} + 0^{2}} &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
      = \quad &
      \begin{cases}
        2 \sqrt{0.01} &\text{ if }   f(0)= f(1) \\
        2 \sqrt{0.09}  &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
    \end{split}
\end{equation}

Via the metric deductive system in \autoref{fig:metric deductive system}, it is easily verified that for an arbitrary error $\epsilon$:
\begin{align*}
   & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
  & \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas} (H( q_{1})) \otimes q_{2} \\
  =_{\epsilon}& \\
   & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
  & \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas}^{\epsilon} (H( q_{1})) \otimes q_{2}
   \end{align*}

Therefore, $\text{Deutsch}=_{\epsilon} \text{Deutsch}^{\epsilon}$, and consequently, for scenario under consideration, if $f$ is a constant function, $\text{Deutsch} ={2 \sqrt{0.01}} \text{Deutsch}^{0.1,0.3}$; otherwise, $\text{Deutsch} =_{2 \sqrt{0.09}} \text{Deutsch}^{0.1,0.3}$.

\section{Conditionals}

The notion of approximate equivalence for quantum programming explored in [\cite{dahlqvist2022syntactic}] does not encompass classical control flow. As a result, preliminary work based on [\cite{crole1993categories,selinger2013lecture}]   has been undertaken to address the integration of conditionals. 

\subsection{Integration of conditionals}

The term formation rules for conditionals are depicted in
\autoref{fig:typing_rules_cond}. 

\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
& \hspace{55pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma \triangleright v: \mathbb{A} \\
    \hline
   \Gamma \triangleright \text{inl}(v):  \mathbb{A} \oplus \mathbb{B}
\end{array}
$
\end{minipage}
\hspace{-38pt}
\text{(inl)} 
 \hspace{20pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
      \Gamma \triangleright v:  \mathbb{B} \\
    \hline
   \Gamma \triangleright \text{inr}(v): \mathbb{A} \oplus \mathbb{B}
\end{array}
$ \end{minipage} 
\hspace{-35pt} \text{(inr)} \\
&\hspace{15pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
   E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C} 
\end{array}
$
\end{minipage}
\hspace{200pt}
\text{(case)} 
\end{aligned}
\end{split}
\end{equation*}
\caption{Term formation rules for conditionals}
\label{fig:typing_rules_cond}
\end{figure}
Considering  $v \in V$, $w \in W$, and $u \in U$ where $V, W, U$ represent vector spaces, $\textsc{Il}_{V}: V \xrightarrow{} V\oplus W$, denotes the left injection operator, defined as $\textsc{Il}_{V}= v \mapsto (v,0) $; $\textsc{Ir}_{V}: V \xrightarrow{} W \oplus V$, denotes the right injection operator, defined as $\textsc{Ir}_{V}= v \mapsto (0,v) $; and $\text{dist}_{V, W,U}: V \otimes  \left(W \oplus U\right) \xrightarrow{} \left(V \otimes W\right) \oplus \left(V \otimes U\right)$, denotes the distributive property of the tensor product over the direct sum, defined as $\text{dist}_{V, W,U} =  v \otimes  \left(w, u\right) \mapsto \left(v \otimes w, v \otimes u\right)$. The subscripts in these operators will be omitted unless ambiguity arises. Moreover, the operation \text{either} corresponds to:
\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     V  \xrightarrow{} U  \\
      W \xrightarrow{} U  \\
    \hline
  [T,S]: V \oplus W \xrightarrow{} U
\end{array}
$
\end{minipage} \\
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  [T,S] = (v,w) \mapsto T(v)+S(w) 
\end{array}
$
\end{minipage}
\end{aligned}
\end{split}
\end{equation}
\label{fig:either}
\end{figure}

The interpretation of conditionals is illustrated in \autoref{fig:denotational_sem cond}.

\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
&\hspace{-80pt} 
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
     [\![\Gamma \triangleright v: \mathbb{A}]\!] = m   \\
    \hline
  [\![ \Gamma \triangleright \text{inl} (v):  \mathbb{A} \oplus \mathbb{B}  ]\!] = \textsc{Il}  \cdot m
\end{array}
$ \end{minipage}
\hspace{30pt} 
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     [\![\Gamma \triangleright v:\mathbb{B} ]\!]  = m  \\
    \hline
   [\![\Gamma \triangleright \text{inr} (v):  \mathbb{A} \oplus \mathbb{B}]\!]\!] = \textsc{Ir} \cdot m
\end{array}
$
\end{minipage}\\
\hspace{-25pt}
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
    [\![\Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} ]\!] = b \quad [\![\Delta, x:\mathbb{A} \triangleright w: \mathbb{C} ]\!] = p  \quad  [\![\Delta,x:\mathbb{B} \triangleright w_{2}: \mathbb{C} ]\!] = q    \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
  [\![E \triangleright \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C} ]\!] =   \text{either}(p,q) \cdot \text{dist} \cdot \text{sw} \cdot (b \otimes \text{id}) \cdot \text{sp}_{\Gamma;\Delta} \cdot \text{sh}_{E}
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation}
\caption{Judgment interpretation for conditionals}
\label{fig:denotational_sem cond}
\end{figure}

\paragraph{Proof} In order to validate the judgment interpretation for conditionals, it is necessary to demonstrate its correctness.

For the booleans: 
\begin{equation} \label{eq:proof_bool}
 \begin{aligned} 
    \hspace{120pt}&  [\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{A} ]\!] \xrightarrow{\hspace{6pt}\textsc{Il}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!] \\ 
     &[\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{B} ]\!] \xrightarrow{\hspace{6pt}\textsc{Ir}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!]
\end{aligned}   
\end{equation}
Now, for the conditional statement:
\begin{equation} \label{eq:proof_bool_2}
 \begin{aligned} 
    [\![E]\!] & \xrightarrow{\hspace{2pt}\text{sh}_{E}\hspace{2pt}}   [\![\Gamma,\Delta ]\!]   \xrightarrow{\hspace{1pt}\text{sp}_{\Gamma;\Delta}\hspace{1pt}}  [\![\Gamma ]\!] \otimes [\![\Delta ]\!] \xrightarrow{ b \hspace{1pt} \otimes \hspace{1pt} \text{id}} ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!]) \otimes [\![\Delta ]\!] \xrightarrow{\hspace{2pt}\text{sw}\hspace{2pt}}  [\![\Delta ]\!] \otimes ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!])  \\
    & \xrightarrow{\hspace{3pt}\text{dist}\hspace{3pt}} ([\![\Delta ]\!] \otimes [\![\mathbb{A} ]\!]  ) \oplus (  [\![\Delta ]\!] \otimes [\![\mathbb{B} ]\!] ) \xrightarrow{\hspace{1pt}\text{either}(p,q)\hspace{1pt}} [\![\mathbb{C} ]\!]
\end{aligned}   
\end{equation}


The quantum lambda calculus with conditionals is illustrated with an example —the quantum teleportation protocol— in \autoref{sec:teleport}.


The metric equations for conditionals are presented in \autoref{fig:metric conditionals}. Note that the first two equations are redundant.
\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
 &
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  v =_{q} w \\
    \hline
   \text{inl}(v) =_{q} \text{inl}(w)
\end{array}
$
\end{minipage}
\hspace{-30pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} w \\
    \hline
   \text{inr}(v) =_{q} \text{inr}(w)
\end{array}
$ \end{minipage} \\
\hspace{-30pt}
&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} v' \quad w=_{r} w' \quad u=_{s}u'   \\
    \hline
  \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\} =_{q+\text{max}(r, s )} \text{ case } v' \hspace{2pt}  \{\text{inl} (x) \Rightarrow w' ; \hspace{1pt} \text{inr} (y) \Rightarrow u'\} 
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation*}
\caption{Metric equational system for condicionals}
\label{fig:metric conditionals}
\end{figure}

\paragraph{Proof} In order to validate the metric equational system for conditionals, it is necessary to demonstrate its correctness.

The diamond norm is a particular instance of the operator norm. The operator norm [\cite{guide2006infinite}] for a super-operator $E$ is defined as:
\begin{equation} \label{eq:op_norm}
  \lVert E \rVert_{\sigma} = \text{sup} \{ \lVert E(v) \rVert \hspace{2pt} | \hspace{2pt} \lVert v \rVert = 1 \}
\end{equation}

\vspace{15pt}

For the \textbf{injections}:

Firstly, it is necessary to prove that the identity operator $I$ has a norm equal to 1.
\begin{lemma} \label{lemid}
  $ \lVert I \rVert_{\sigma} = 1   $
\end{lemma}

\textit{Proof.} \quad Using the definition of operator norm in \autoref{eq:op_norm}, it follows that:
\begin{equation} 
\begin{split}
  \lVert I \rVert_{\sigma} = \text{sup} \{\lVert I (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
\end{split}
\end{equation}

\vspace{10pt}

Thereafter, it is imperative to show that the injection operators $\textsc{Il}$ and $\textsc{Ir}$ are have a norm equal to 1.

\begin{lemma} \label{lemil}
  $ \lVert \textsc{Il} \rVert_{\sigma} = 1   $
\end{lemma}

\begin{lemma} \label{lemir}
  $ \lVert \textsc{Ir} \rVert_{\sigma} = 1   $
\end{lemma} 

\textit{Proof.} \quad Employing the definition of operator norm as defined in \autoref{eq:op_norm}, it ensues that:
\begin{equation} 
\begin{split}
  \lVert \textsc{Il} \rVert_{\sigma} &= \text{sup} \{\lVert \textsc{Il} (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert (v,0) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert v \rVert + \lVert 0 \rVert  \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} \\
  & = \text{sup} \{\lVert v \rVert \hspace{2pt} + 0    \hspace{2pt}  \vert \lVert v\rVert =1 \} \hspace{160 pt} \text{ \{Positive definiteness\}} \\
  & = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
\end{split}
\end{equation}

The proof for \autoref{lemir} is analogous to the proof for \autoref{lemil}.
\begin{equation} 
  \begin{split}
    \lVert \textsc{Ir} \rVert_{\sigma} &= \text{sup} \{\lVert \textsc{Ir} (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert (0,v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{ \lVert 0 \rVert +\lVert v \rVert   \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} \\
    & = \text{sup} \{0+\lVert v \rVert \hspace{2pt}     \hspace{2pt}  \vert \lVert v\rVert =1 \} \hspace{160 pt} \text{ \{Positive definiteness\}} \\
    & = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
  \end{split}
  \end{equation}

Futhermore, given the submultiplicative property of the operator norm, for any super-operators $P$ and $Q$,where $\lVert P \rVert_{\sigma} =1  $ the following holds:
\begin{lemma}\label{lemleq}
  $\lVert PQ \rVert_{\sigma} \leq  \lVert Q \rVert_{\sigma}, \quad \lVert P \rVert_{\sigma}  =1 $ 
\end{lemma}

Using these properties it is possible to prove the validity of the metric equations for the injections. Demonstrating the correctness of the metric equations for the injections is equivalent to proving that for any  non‑negative rational $q$ and super-operators $v$ and $w$ such that $d(v,w) \leq q$, where  $d(v,w)$ represents the distance between $v$ and $w$ the following holds:

\begin{theorem} \label{theoremil}
  $d(\textsc{Il}(v),\textsc{Il} (w)) \leq q$
\end{theorem}
\begin{theorem} \label{theoremir}
  $d(\textsc{Ir}(v),\textsc{Ir} (w)) \leq q$
\end{theorem}
\vspace{10pt}
\textit{Proof.} \quad In the quantum paradigm, the distance between two super-operators $E$ and $E'$ corresponds to the diamond norm between $E$ and $E'$. Therefore,
\begin{equation}
\begin{split}
  d(v,w) \leq q \Leftrightarrow \lVert v \otimes I - w \otimes I \rVert_{\sigma} \leq q
\end{split}
\end{equation}

As a result, to prove that $d(\textsc{Il}(v),\textsc{Il} (w)) \leq q$, it suffices to show that:
\begin{align}
  \lVert \textsc{Il}\otimes I (v \otimes I)-\textsc{Il} \otimes I (w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} \\
  \lVert \textsc{Ir}\otimes I (v \otimes I)-\textsc{Ir} \otimes I (w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} 
\end{align}
Given that $\textsc{Il}$ and $\textsc{Ir}$ possess a norm equal to 1, as established by Lemmas \ref{lemil} and \ref{lemir} respectively, and considering the multiplicative property of the operator norm with respect to tensor products alongside the fact that the identity operator also exhibits a norm equal to 1, as demonstrated in  \autoref{lemid}, it follows that both $\lVert \textsc{Il} \otimes I \rVert_{\sigma}$ and $\lVert \textsc{Ir} \otimes I \rVert_{\sigma}$ are equal to one 1. Hence, by \autoref{lemleq},
\begin{align}
   \lVert \textsc{Il}\otimes I (v \otimes I)-\textsc{Il} \otimes I (w \otimes I)\rVert_{\sigma}=\lVert \textsc{Il}\otimes I (v \otimes I-w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} \\
   \lVert \textsc{Ir}\otimes I (v \otimes I)-\textsc{Ir} \otimes I (w \otimes I)\rVert_{\sigma}=\lVert \textsc{Ir}\otimes I (v \otimes I-w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma}
\end{align}

\vspace{10pt}

Now, regarding the metric equation for the \textbf{conditional statement}, before validating its correctness, it is necessary to prove a few intermediate results. 

The first step is to demonstrate that for any super-operators $P$ and $Q$ the following holds:
\begin{lemma}\label{lem1}
  $\lVert [P,Q] \rVert_{\sigma} \leq \max \{ \lVert P \rVert_{\sigma}, \lVert Q \rVert_{\sigma} \}$
\end{lemma}



$\textit{Proof.}$ \quad Employing the definition of the operator norm in \autoref{eq:op_norm}, it follows that:
\begin{equation} \label{eq:cond_opnorm2}
  \begin{split}
  &\text{sup}{\{ \lVert [P,Q] (v) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert v \rVert=1  \}}  \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1 \}, \text{sup} \{\lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & = \text{sup}{\{ \lVert [P,Q] (w+u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert = 1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  &  =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
\end{split}
\end{equation}

Therefore, by the triangle inequality, proving the inequality in \autoref{eq:cond_opnorm3} suffices to establish  \autoref{lem1}.
\begin{equation} \label{eq:cond_opnorm3}
  \begin{split}
  \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert_{1}=1  \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w  \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  \end{split}
\end{equation}


This can be rewritten as:

\begin{equation} 
  \begin{split}
  \lVert w + u   \rVert = 1 \wedge \{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}  \leq \text{max}   \left\{ \dfrac{1}{\lVert w \rVert} \lVert P (w) \rVert  \hspace{2pt},  \dfrac{1}{\lVert u \rVert} \lVert Q (u) \rVert   \right\}
\end{split}
\end{equation}

As a result,
\begin{equation} 
  \begin{split}
  \lVert w + u   \rVert = 1 \wedge \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert_{1}  \}}  \leq \text{max}   \left\{  \left\lVert P \left( \dfrac{1}{\lVert w \rVert} w \right) \right\rVert  \hspace{2pt},  \left\lVert Q \left( \dfrac{1}{\lVert u \rVert} u \right) \right\rVert   \right\}
\end{split}
\end{equation}

This is equivalent to demonstrating that for $a+b=1$,
\begin{equation} 
\begin{split}
\hspace{110 pt}
    x + y  \leq  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
\end{split}
\end{equation}

This is done by arguing by \textit{reductio ad absurdum}, \textit{i.e.}, supposing otherwise leads to a contradiction:
\begin{equation} 
\begin{split} 
    \hspace{90pt}&
     x + y  >  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
    & \Rightarrow  x + y > \dfrac{1}{a}x  \wedge x + y > \dfrac{1}{b}y \\
    & \Rightarrow  a (x + y) > x  \wedge b (x + y)> y \\
    & \Rightarrow  a x + a y > x  \wedge b x + by > y \\
    & \Rightarrow  a x + a y > x  \wedge (1-a) x + (1-a)y > y\\
    & \Rightarrow  a x + a y > x  \wedge x-ax + y -ay > y\\
    & \Rightarrow  x < a x + a y   \wedge x > a x + a y  \\
\end{split}
\end{equation}

\vspace{10pt}

Subsequently, it is imperative to prove that:
\begin{lemma}\label{lemiso}
  $ i= [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ \text{is an isomorphism}.
\end{lemma}

\textit{Proof.} \quad The proof is as follows:

For any vector spaces $V$, $W$, and $U$, $i: (V \otimes U) \oplus (W \otimes U) \xrightarrow{} (V  \oplus W) \otimes U $. If $V$ has dimension $m$, $W$ has dimension $n$, and $U$ has dimension $o$, then the space $(V \otimes U) \oplus (W \otimes U) $ has dimension $mo+no=(m+n)\cdot o$. Similarly, the space $(V\oplus W) \otimes U$ has dimension $(m+n)\cdot o$. Hence, the spaces have the same dimension. Given that spaces with the same dimension are isomorphic [\cite{hefferon2006linear}], it follows that $i$ is an isomorphism.

\vspace{10pt}

Next, it is necessary to demonstrate that for any operators $P$ and $Q$, the identity operator $I$, and an isomorphism $i=[\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ the following holds:

\begin{lemma}\label{lem2}
  $( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]$
\end{lemma}

Which is equivalent to showing that for any vector spaces $V$, $W$, $U$, and $Z$  and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram holds:

\vspace{10pt}


\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-1) edge node [above] {$i$} (m-1-2)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\vspace{10pt}

\textit{Proof.} \quad The proof is straightforward:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \\
    &=  [([P,Q] \otimes I) \cdot (\textsc{Il} \otimes I),([P,Q] \otimes I) \cdot (\textsc{Ir} \otimes I) ]\\
    &=  [P \otimes I, Q \otimes I]
\end{split}
\end{equation}

\vspace{15pt}

Furhtermore, it is imperative to show that the following relation holds:

\begin{lemma}\label{lemi-1}
  $ [P \otimes I, Q \otimes I] \cdot  i^{-1}  = [P,Q] \otimes I$
\end{lemma}

Demonstrating this is equivalent to establishing that for any vector spaces $V$, $W$, $U$, and $Z$, and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram commutes:

\vspace{10pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-2) edge node [above] {$i^{-1}$} (m-1-1)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\textit{Proof.} \quad The proof is as follows:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]  \hspace{100pt} & \text{\{\autoref{lem2}\}} \\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I) \cdot  i \cdot i^{-1} = [P \otimes I, Q \otimes I] \cdot  i^{-1}\\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I)  = [P \otimes I, Q \otimes I] \cdot  i^{-1}  &\text{\{\autoref{lemiso}\}} \\
\end{split}
\end{equation}

\vspace{10pt}
With \autoref{lem2} and \autoref{lemi-1}, it has been proved that the diagram below is valid:
\vspace{5pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    edge[bend left=5] node [above] {$i$}  (m-1-2) % Adjusted minimum width
    (m-1-2) edge node [right=0.5cm] {$[P,Q] \otimes I$} (m-2-1)
    (m-1-2) edge[bend right=-5] node [below] {$i^{-1}$} (m-1-1); % Added the label to the arrow
\end{tikzpicture}

\vspace{10pt}




%Next, it is necessary to demonstrate that the coproduct of two super-operators $P$ and $Q$ has a norm equal to 1.
%\begin{lemma} \label{lemeither}
  %$  \lVert [P, Q]  \rVert_{\sigma} = 1   $
%\end{lemma}

%\textit{Proof.} \quad Utilizing the definition of the operator norm as defined in Equation \ref{eq:op_norm}, it follows that:
%\begin{equation} 
  %\begin{split}
    %\lVert [P, Q]  \rVert_{\sigma}  \\
  %\end{split}
  %\end{equation}
%\vspace{10pt}

Now, it is possivel to prove that $i$ has a norm equal to 1.

\begin{lemma} \label{lem3}
  $  \lVert i\rVert_{\sigma} \geq 1 $
\end{lemma}

\vspace{10pt}

\textit{Proof.} \quad Considering the vector $(v \otimes u, 0)$ with $\lVert(v \otimes u, 0)\rVert = 1$, and  attending the multiplicative property of the operator norm with respect to tensor products, along with the definition of the norm of a tuple as in \autoref{eq:norm_tuple}, it holds that $\lVert v \rVert = 1$ and $\lVert u \rVert =1$. Therefore, using this same property and definition, it is possible to demonstrate that the following holds:
  \begin{equation}
    \begin{split}
      \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ] (v \otimes u, 0) \rVert = (v, 0)\otimes u = (\lVert v \rVert + \lVert 0 \rVert ) \lVert u \rVert = \lVert v \rVert \lVert u \rVert =1
    \end{split}
  \end{equation}
 
Given the definition of the operator norm as presented in \autoref{eq:op_norm}, it follows that:
\begin{equation}
  \begin{split}
      & \hspace{3pt} \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \rVert_{\sigma}  = \text{sup} \{ \lVert [\textsc{Il} \otimes I , \textsc{Ir} \otimes I ] (a) \rVert \hspace{2pt} | \hspace{2pt} \lVert a \rVert = 1 \} \\
  \end{split}
  \end{equation}
  From this, it can be deduced that $\lVert i \rVert_{\sigma} \geq 1$.

Subsequently, it is possible to demontrate that $i^{-1}$ has a norm greater than or equal to 1,

\begin{lemma} \label{lem4}
  $  \lVert i^{-1}  \rVert_{\sigma} \leq 1 $
\end{lemma}

\textit{Proof.} \quad Given that $i$ is an isomophism, it follows that 
\begin{equation} 
  \begin{split}
    &\lVert i \cdot i^{-1}  \rVert_{\sigma} = 1  \\
    \leq \hspace{2pt}& \lVert i  \rVert_{\sigma} \cdot \lVert i^{-1}  \rVert_{\sigma} = 1 \hspace{50pt} & \text{\{Norm submultiplicative with respect to compositions\}} \\
    \leq & 1 \cdot \lVert i^{-1}  \rVert_{\sigma} = 1 & \text{\{\autoref{lem4}\}}  \\
    \Leftrightarrow &  \lVert i^{-1}  \rVert_{\sigma} = 1  \\
  \end{split}   
  \end{equation}




Next, one has to prove that for any super-operators $P$ and $Q$ and their respective erroneous versions $P'$ and $Q'$, the following holds:
  \begin{lemma} \label {lemmasum}
    $  \lVert P\cdot Q \otimes I - P'\cdot Q'  \otimes I \rVert_{\sigma} \leq  \lVert (P - P') \otimes I  \rVert_{\sigma} + \lVert (Q - Q') \otimes I \rVert_{\sigma}   $
  \end{lemma} 
  
  \textit{Proof.} \quad Applying the triangle inequality, he submultiplicative property of the operator norm with respect to compositions, and given that a positive and trace-preserving operator map, $E$, has norm $\lVert E \otimes I  \rVert_{\sigma} =1$ (\cite{watrous2018theory}), it follows that:
  
  \begin{equation}
    \begin{split}
      & \lVert P\cdot Q \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &= \lVert  P\cdot Q \otimes I- P\cdot Q' \otimes I + P\cdot Q' \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &\leq \lVert P\cdot Q \otimes I - P\cdot Q' \otimes I  \rVert_{\sigma} + \lVert P\cdot Q' \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &\leq \lVert P \rVert_{\sigma} \lVert Q \otimes I - Q' \otimes I  \rVert_{\sigma} + \lVert P \otimes I - P' \otimes I  \rVert_{\sigma} \lVert Q'  \rVert_{\sigma}  \\
      &= \lVert P \rVert_{\sigma} \lVert (Q  - Q') \otimes I  \rVert_{\sigma} + \lVert (P  - P') \otimes I  \rVert_{\sigma} \lVert Q'  \rVert_{\sigma}  \\
      &= \lVert (P - P') \otimes I  \rVert_{\sigma} + \lVert (Q - Q') \otimes I  \rVert_{\sigma}  \\
    \end{split}
    \end{equation}

\vspace{5pt}

Finally, considering the the semantics  the conditional statement  in \autoref{fig:denotational_sem cond}, demonstrating the conditional statement rule in \autoref{fig:metric conditionals} includes proving that for any super-operators $P$, $Q$, $P'$ and $Q'$,  denoting the distance between super-operators $A$ and $B$ as $d(A,B)$,  the following holds:
\begin{lemma} \label {lemma_max_otimes}
  $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$
\end{lemma}
\vspace{10pt}
\textit {Proof.} 
In the quantum paradigm, the distance between two super-operators  corresponds to the diamond norm between the two super-operators. Hence, denoting $ [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ by $i$ it follows that:

%\begin{equation}
%\begin{split}
  %& \text{d} ([P,Q],[P',Q'])  \\
  %&=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert_{1}  \\
  %&=   \lVert [P \otimes I, Q \otimes I]  - [P' \otimes I, Q' \otimes I]  \rVert_{1}  \\
  %&=  \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert_{1}   \\
  %&= \lVert [P -P', Q-Q' ] \otimes I \cdot i \rVert_{1}  \\
%\end{split}
%\end{equation}

\begin{equation} \label{eq:proof_theorem1.1_esq}
  \begin{split}
    & \text{d} ([P,Q],[P',Q'])  \\
    &=  \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert_{\sigma}  \\
    &=   \lVert [P \otimes I, Q \otimes I] \cdot i^{-1}  - [P' \otimes I, Q' \otimes I]  \cdot i^{-1}  \rVert_{\sigma}   \hspace{165pt}  \text{\{\autoref{lemi-1}\}} \\
    &=  \lVert [P - P' \otimes I, Q-Q' \otimes I] \cdot i^{-1}  \rVert_{\sigma}   \\
    & \leq \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert \lVert i^{-1}  \rVert \rVert_{\sigma} \hspace{20pt} \text{\{Norm submultiplicative with respect to compositions\}}  \\  
    & \leq \lVert [(P - P') \otimes I, (Q-Q') \otimes I]  \rVert_{\sigma} \hspace{235pt} \text{ \{\autoref{lem4}\}} \\
  \end{split}
  \end{equation}
and
\begin{equation} \label {eq:proof_theorem1.1_dir}
\begin{split}
   &  \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} \\
   = &  \text{max}\{ \lVert P \otimes I - P' \otimes I \rVert_{\sigma}, \lVert Q \otimes I - Q'\otimes I \rVert_{\sigma} \}\\
   = &  \text{max}\{ \lVert (P - P') \otimes I \rVert_{\sigma}, \lVert (Q - Q') \otimes I \rVert_{\sigma} \}\\
\end{split}
\end{equation}

Finally, by  \autoref{lem1}, it can be deduced that $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$, which concludes the proof of theorem \autoref{lemma_max_otimes}.
\vspace{10pt}


An alternative method to establish \autoref{theorem:1.1} is now presented.
\vspace{5pt}
\textit {Proof.} The proof is as follows:
\begin{equation}
  \begin{split}
    & \text{d} ([P,Q],[P',Q'])  \\
    &=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I    \rVert_{\sigma} \hspace{2pt} \\
    &=   \lVert  ([P,Q]  - [P',Q']) \otimes I    \rVert_{\sigma} \hspace{2pt} \\
    &=   \lVert  [P-P',Q-Q'] \otimes I  \rVert_{\sigma}   \\
    &=    \lVert  [P-P',Q-Q'] \rVert_{\sigma} \lVert I \rVert_{\sigma}\hspace{2pt} & \hspace {20pt} \text{\{Norm multiplicative with respect to tensor products\}} \\ 
    &=    \lVert  [P-P',Q-Q'] \rVert_{\sigma} & \text{\{\autoref{lemid}\}}  \\
  \end{split}
  \end{equation}
Moreover,
\begin{equation}
  \begin{split}
     &  \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} \\
     = &  \text{max}\{ \lVert P \otimes I - P' \otimes I \rVert_{\sigma}, \lVert Q \otimes I - Q'\otimes I \rVert_{\sigma} \}\\
     = &  \text{max}\{ \lVert (P - P') \otimes I \rVert_{\sigma}, \lVert (Q - Q') \otimes I \rVert_{\sigma} \}\\
     = &\text{max}\{ \lVert (P - P') \rVert_{\sigma} \lVert  I \rVert_{\sigma}, \lVert (Q - Q') \rVert_{\sigma} \lVert I \rVert_{\sigma} \} & \hspace{60pt} \text{\{Norm multiplicative with}\\
     && \text{respect to tensor products\}} \\
     = & \text{max}\{ \lVert (P - P') \rVert_{\sigma}, \lVert (Q - Q') \rVert_{\sigma}  \}  & \text{\{\autoref{lemid}\}}  \\
    \end{split}
  \end{equation}

Therefore, by \autoref{lem1}, it can be deduced that $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$, which concludes the proof of theorem \autoref{lemma_max_otimes}.

\vspace{10pt}
  


Now, it is finally possible to adress the proof of the metric equation for the conditional statement as a whole. Considering the the semantics of the conditional statement in \autoref{fig:denotational_sem cond}, the rule for the conditional statement in \autoref{fig:metric conditionals} is valid is equivalent to demonstrating that the distance between the evalution of a boolen $B$ followed by the execution of a program $P$ or a program $Q$ and the evalution of a boolean $B'$ followed by the execution of a program $P'$ or a program $Q'$ is less or equal to the  distance between the evaluation of the boolean $B$ and the evaluation of the boolean $B'$ plus the maximum distance between the execution of the programs $P$ and $P'$ and the execution of the programs $Q$ and $Q'$, \textit{ergo}, that for any booleand $B$ and $B'$ super-operators $P$, $Q$, $P'$ and $Q'$, the following holds:

\begin{theorem} \label {theorem:1.1}
  $ \text{d} (B \cdot [P,Q], B' \cdot [P',Q']) \leq \text{d} (B,B') + \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$
\end{theorem}
\vspace{10pt}

\textit {Proof.} Considering that in the quantum paradigm, the distance between two super-operators  corresponds to the diamond norm between the two super-operators, it follows that:
\begin{equation}
\begin{split}
  & \text{d} (B \cdot [P,Q], B' \cdot [P',Q'])  \\
  &=   \lVert  B \cdot [P,Q] \otimes I - B' \cdot [P',Q'] \otimes I   \rVert_{\sigma}  \\
  & \leq \lVert  (B - B')  \otimes I   \rVert_{\sigma} + \lVert  ([P,Q] - [P',Q']) \otimes I   \rVert_{\sigma} & \hspace{100 pt}  \text{\{\autoref{lemmasum}\}} \\
  &= d(B,B') + \lVert  [P,Q]\otimes I - [P',Q'] \otimes I   \rVert_{\sigma} & \hspace{100 pt} \\
  &=  \text{d} (B,B') + \text{d} ([P,Q],[P',Q'])    \\
  &=d(B,B') + \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} & \text{\{\autoref{lemma_max_otimes}\}} \\ 
\end{split}
\end{equation}




  % The spectral norm is submultiplicative with respect to compositions and multiplicative with respect to tensor products,

  % Flar sobre definições de normas


%m


%hefferon2006linear


\subsection{Quantum Teleportation} \label{sec:teleport}

\todo[inline,size=\normalsize]{Write an introduction to quantum teleportation}



The circuit corresponding to the implementation of the quantum teleportation protocol is depicted in \autoref{fig:teleport}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol}
  \label{fig:teleport}
\end{figure}


%\begin{figure} [H]
    %\centering
    %\begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
        %\lstick{$\ket{0}$} & \qw & \qw & \qw & \qw & \qw& \ctrl{1}& \gate{H}& \qw &  \meter{} & \qw & \qw & \qw & \ctrl{2} & \qw \\
        %\lstick{$\ket{0}$} & \qw &\gate{H} & \qw  & \ctrl{1}& \qw & \targ{} & \qw &  \qw & \meter{} & \qw & \ctrl{1} & \qw & \qw & \qw \\
        %\lstick{$\ket{0}$} & \qw &  \qw & \qw &  \targ{} & \qw &\qw & \qw& \qw & \qw & \qw & \gate{X} & \qw & \gate{Z} & \qw 
   %\end{quantikz}
    %\caption{Quantum Teleportation Protocol}
    %\label{fig:teleport}
%\end{figure}



When formalizing the quantum teleportation protocol within the lambda calculus framework, each part of the protocol is instantiated as a distinct function. This entails the definition of three specific functions:
\begin{align*}
   \hspace{100pt} & \textbf{EPR}: \hspace{5pt} \mathbb{I} \multimap (\textit{qbit} \otimes \textit{qbit}) \\ 
    &\textbf{BellMeasure}: \hspace{5pt} \textit{qbit} \otimes \textit{qbit}  \multimap \textit{bit} \otimes \textit{bit} \\
    &\textbf{Correction}: \hspace{5pt} \textit{qbit} \otimes \textit{bit} \otimes \textit{bit}  \multimap \textit{qbit} \\
\end{align*}

Considering the unitary operations $H: \textit{qubit} \xrightarrow{}  \textit{qubit}$, $X: \textit{qubit} \xrightarrow{}  \textit{qubit}$, $Z: \textit{qubit} \xrightarrow{}  \textit{qubit}$, $I: \textit{qubit} \xrightarrow{}  \textit{qubit}$, and $\textit{CNOT}: \textit{qubit}, \textit{qubit} \xrightarrow{}  \textit{qubit} \otimes \textit{qubit}$ , these functions are defined as follows:

\begin{align*}
  \hspace{-28pt} &\textbf{EPR} =  - \triangleright  \textit{CNOT} \hspace{2pt} (\textit{H}\hspace{2pt} (q  \hspace{2pt}    ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))))  \\ 
      \hspace{-28pt}
      &\textbf{BellMeasure} =  q: \text{qubit}, q_{2}: \text{qubit}  \triangleright  (\text{pm}  \hspace{5pt} \textit{CNOT} (q_{1},q_{2})  \hspace{2pt}  \text{to} \hspace{2pt} x \otimes y.  \hspace{2pt}  \textit{meas} (\textit{H} (x)) \otimes \textit{meas} (y) ) \\
      \hspace{-28pt}
      &\textbf{Correction}= q: \text{qubit}, x: \text{bit},  y: \text{bit} \triangleright  \text{cond}\hspace{2pt} x  \hspace{2pt}  \{\text{inl} (x_{0}) \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow{}  \textit{I}(q)\} ; \\
      \hspace{-28pt}
      & \hspace{335pt} \hspace{5pt} \text{inr} (y_{1}) \Rightarrow  \hspace{2pt}   \textit{X} (q)); \\
      & \hspace{240pt}\text{inr} (x_{1})  \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow   \textit{Z}(q);  \\
      \hspace{-28pt}
      &\hspace{335pt} \text{inr} (y_{1}) \Rightarrow{} \textit{Z} (\textit{X}(q)) \})\}
 \end{align*}


 Designating the qubit to be teleported as $q_0$, one can conceptualize the teleportation procedure as follows:
 \begin{align*}
     \hspace{130 pt}& \text{pm} \hspace{5pt} \textbf{EPR}\hspace{1pt} (*) \hspace{5pt} \text{to} \hspace{5pt}  q_{1} \otimes q_{2}.  \notag \\
     & \text{pm}\hspace{5pt} \textbf{BellMeasure} \hspace{1pt} (q_0,q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} c_{0}\otimes c_{1} . \notag \\
     & \text{pm} \hspace{5pt}  \textbf{Correction} \hspace{1pt} ( q_{2},  c_{0}, c_{1} ) \hspace{5pt} \text{to} \hspace{5pt}  q. \hspace{2pt}  q
 \end{align*}
 

Regarding the interpretation of the quantum teleportation protocol, considering $\rho = |\phi\rangle \langle \phi|$ as the state of the system before measurement, $|\phi\rangle$  is calculated as follows, where $|\psi\rangle$ is the state of the qubit to be teleported:
\begin{equation}
  \begin{split}
&  |\psi\rangle \otimes |0\rangle \otimes |0\rangle = ( \alpha|0\rangle + \beta|1\rangle) \otimes |0\rangle \otimes |0\rangle  \\
\xmapsto{ \hspace{5pt} I\otimes H \otimes I  \hspace{5pt}} \quad &  ( \alpha|0\rangle + \beta|1\rangle) \otimes \frac{1}{\sqrt{2}} (|00\rangle + |10\rangle )  \\
\xmapsto{I \hspace{1pt} \otimes \hspace{1pt} CNOT} \quad & ( \alpha|0\rangle + \beta|1\rangle) \otimes \frac{1}{\sqrt{2}} (|00\rangle + |11\rangle ) = \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|110\rangle + \beta|101\rangle)\\
 \xmapsto[]{\hspace{5pt} H \otimes I \otimes I \hspace{5pt}} \quad & \frac{1}{2} (\alpha |000\rangle +\alpha |001\rangle +  \alpha|011\rangle + \alpha|111\rangle + \beta|010\rangle - \beta|110\rangle + \beta|101\rangle - \beta|001\rangle )  \\
 = \quad & \frac{1}{2} (|00\rangle \otimes (\alpha |0\rangle + \beta|1\rangle ) + |01\rangle \otimes (\alpha |1\rangle + \beta|0\rangle) + |10\rangle \otimes (\alpha |0\rangle - \beta|1\rangle )   \\
  & + |11\rangle \otimes (\alpha |1\rangle - \beta|0\rangle)) \\
 = \quad & |00\rangle \otimes |\psi\rangle  + |01\rangle \otimes X|\psi\rangle + |10\rangle \otimes Z |\psi\rangle + |11\rangle \otimes XZ|\psi\rangle = |\phi\rangle  \\
  \end{split}
\end{equation}

Regarding the remaining steps of the protocol, 
\begin{equation}
  \begin{split}
    |\phi\rangle \langle \phi| = \quad & \frac{1}{4} (|00\rangle \langle 00| \otimes |\psi\rangle \langle \psi| + |00\rangle  \langle 01| \otimes |\psi\rangle \langle \psi| X + |00\rangle  \langle 10| \otimes |\psi\rangle \langle \psi| Z     \\ 
    & + |00\rangle  \langle 11| \otimes |\psi\rangle \langle \psi| ZX + X|01 \rangle \langle 00| \otimes |\psi\rangle \langle \psi| + |01 \rangle \langle 01| \otimes X|\psi\rangle \langle \psi|X    \\
    & + |01 \rangle \langle 10| \otimes X|\psi\rangle \langle \psi|Z + |01 \rangle \langle 11| \otimes X|\psi\rangle \langle \psi|ZX  + |10 \rangle \langle 00| \otimes Z|\psi\rangle \langle \psi|   \\
    & + |10 \rangle \langle 01| \otimes Z|\psi\rangle \langle \psi| X + |10 \rangle \langle 10| \otimes Z|\psi\rangle \langle \psi| Z + |10 \rangle \langle 11| \otimes Z|\psi\rangle \langle \psi| ZX \\
    & + |00 \rangle \langle 11| \otimes |\psi\rangle \langle \psi| ZX + |01 \rangle \langle 11| \otimes X|\psi\rangle \langle \psi| ZX + |10 \rangle \langle 11| \otimes Z|\psi\rangle \langle \psi| ZX  \\
    & + |11 \rangle \langle 11| \otimes ZX|\psi\rangle \langle \psi| ZX) \\
    \xmapsto{ \text{meas } \otimes \hspace{1pt} \text{meas} \hspace{1pt}  \otimes \hspace{1pt} I} \quad & \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big) \\
    \xmapsto{\hspace{10pt}(CX, CX)\hspace{10pt}} \quad & \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} |\psi\rangle \langle \psi|\Big),(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  Z|\psi\rangle \langle \psi|Z \Big)\Big) \\ 
     \xmapsto{\hspace{22pt} CZ \hspace{23pt}} \quad& \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} |\psi\rangle \langle \psi|\Big),(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4}  |\psi\rangle \langle \psi| \Big)\Big)
  \end{split}
\end{equation}



\subsection{Ilustration: Noisy Quantum Teleportation}

%To study decoherence in a quantum channel within the presented metric deductive system, one can consider the application of a dephasing channel in the quantum teleportation protocol with a certain probability $p$. This is exemplified for probabilities $p=0.5$ and $p=0.25$. It is worth noting that similar exercises can be done for scenarios such as a malicious attack involving a bit flip during measurement or the presence of a noisy channel.

\subsubsection{Noisy Quantum Teleportation: Decoherence}

To study decoherence in a quantum channel within the presented metric deductive system, one can consider the application of a dephasing channel in the quantum teleportation protocol with a certain probability $p$.


The Kraus operators of the dephasing channel with probability $p$ are expressed as:
\begin{equation}
    \hspace{100pt} A_{0}= \frac{\sqrt{2-p}}{\sqrt{2}} I,  A_{1}= \frac{\sqrt{p}}{\sqrt{2}} Z
\end{equation}

Considering a density operator $\rho$
\begin{equation}
    \hspace{55pt} \rho = |\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 | 
\end{equation}
using these operators, it is possible to easily verify  that after applying the dephasing channel with probability $p$, the resulting operator $\rho'$ is given by: 
\begin{equation} \label{eq:dephasing_result}
     \rho' =  A_{0} \rho A_{0}^{\dag} + A_{1} \rho A_{1}^{\dag} = |\alpha|^{2} |0\rangle \langle 0 | +  (1-p) \alpha \beta^{\dag} |0\rangle \langle 1 | +  (1-p) \alpha^{\dag}  \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 | 
\end{equation}
This shows that the dephasing channel with probability $p$ preserves the diagonal elements of the density matrix while attenuating the off-diagonal elements by a factor of $(1-p)$.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \qw & \qw &\qw  & \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}}  & \qw  & \ctrl{1}& \qw &    & \gate{D(p)}\gategroup[1,steps=1,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Dephasing}}  & \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw \qw & & \qw & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Dephasing with probability $p$ after EPR pair creation.}
  \label{fig:teleport_dephasing}
\end{figure}

\subsubsection{Noisy Quantum Teleportation: Amplitude Damping}

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} & \qw & \qw   & \gate{A(\gamma)}\gategroup[1,steps=2,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      { \hspace{40 pt} Amplitude Damping}}} & \qw
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Amplitude Dampling with probability $\gamma$ after Correction.}
  \label{fig:teleport_amplitude_damping}
\end{figure}

\subsubsection{Noisy Quantum Teleportation: An erroneous implementation of the Hadamard gate}


\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H^{\epsilon}} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H^{\epsilon}}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Erroneous implementation of the Hadamard gate. $H^{\epsilon}$ is regarded as the composition $R_{y}(\frac{\pi}{2})\cdot P(\pi + \epsilon)$.}
  \label{fig:teleport_h}
\end{figure}

\section{Discard Operation} \label{sec:discarding}

The discard operation was defined as the trace, and therefore is also completely positive and trace-preserving.

%One might question why the interpretation of the discard operation was defined as the trace, considering that alternatives like the null operator, which maps everything to zero, seem plausible. However, the trace is the only operator that is completely positive and trace-preserving, which, as previously established, is a requirement for quantum operations. In contrast, the null operator fails to preserve the trace, rendering it unsuitable for this purpose.
%fig:equations-linear-lambda

%ToDo: Discard operations -> The operator should de unique (but there is for instance trace and the null operator_maps everything to zero) and is unique bacausce only trace is trace preserving; example: mallicious attack discard a qubit ou outside of quantum teleportation : setting a qubit do 0, by discarding it and initiating a new one

\subsection{Example: Proving an equivalence using the discard equation}

\subsection{Ilustration: A malicious attack on the quantum teleportation protocol}


\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm,wire
    types={n,n,n,n,n}]%
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw &  \ctrl{1} \qw \gategroup[2,steps=2,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      B}} & \gate{H} \qw & \qw & \qw &\qw \gategroup[5,steps=9,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      C}}  & \qw & \qw & \qw & \targ{} \qw  & \qw & \qw & \qw & \qw & \qw & \qw & \meter{} \qw \gategroup[3,steps=6,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      D}}     & \setwiretype{c}  &  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      A}} & \qw  & \ctrl{1} \qw& \qw & \qw  & \targ{} \qw & \qw & \qw & \qw & \qw& \qw & \qw & \qw & \qw &  \qw & \qw &  \targ{} \qw & \qw & \qw & \qw & \meter{} \qw & \setwiretype{c}  & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} \qw \qw & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw & \qw& \qw & \qw & \qw & \qw &  \qw & \qw & \qw & \qw & \qw & \qw & \qw &  \gate{X} \qw & \qw & \gate{Z} \qw\\
       &   & &  &  & & &  &  & & & & \lstick{$\ket{0}$}  & \qw & \qw & \qw  & \gate{R_X(\frac{\pi}{2})} \qw& \ctrl{-2} \qw & \gate{\text{Disc}} \qw  \\
      &   &  & & & & &  &  & & & & \lstick{$\ket{0}$}   &\gate{R_X(\frac{\pi}{2})} \qw  & \ctrl{-4} \qw & \gate{\text{Disc}} \qw & &  &  &  &  &   & &  &  &  &  &  
    \end{quantikz}
  \caption{Quantum Teleportation Protocol: Bit flip with a 50\% probability before measurement.}
  \label{fig:teleport_bit_flip}
\end{figure}


\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm,wire
    types={n,n}]%
      \lstick{$\ket{\phi}$}  &\qw \gategroup[2,steps=9,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      T}} & \qw  & \qw   & \qw  & \qw & \qw & \gate{U} \qw & & \\
      & & & \lstick {$\ket{0}$}  & \qw &\gate{R_X(\frac{\pi}{2})} \qw & \qw & \ctrl{-1} \qw & \qw & \gate{\text{Disc}} \qw 
    \end{quantikz}
  \caption{T operation}
  \label{fig:Operation_T}
\end{figure}