\chapter{Conditionals}








\section{Measurements}

In order to established that the theory introduced is valid in quantum programming, it is necessary to build a model. The model can be seen as a category where the morphisms are the CPTP super-operators (quantum channels). The algebric structure of this model is given by the vector spaces. 
Any completely-positive and trace-preserving map has a diamond norm equal to one [\cite{watrous2018theory}]. Since the measurement operation is completely positive and trace-preserving, its  diamond norm is equal to one. This is a desirable property, as it ensures that the measurement operation does not increase the distance between states, and as a consequence, composition of programs remains valid.


\subsection{Example: Deutsch's Algorithm}

In 1985, David Deutsch presented an algorithm that determines whether a function $f$ is constant for a single-bit input (\textit{i.e.}, either equal to 1 for all $x$ or equal to 0 for all $x$) or balanced (\textit{i.e.}, equal to 1 for half of the values of x and equal to 0 for the other half) [\cite{deutsch1985quantum}]. Classically, to determine which case holds requires running $f$ twice. Quantumly, it suffices to run f once. The Deutsch-Jozsa Algorithm is a simple example of a quantum algorithm that outperforms its classical counterpart. The algorithm is based on the concept of a quantum oracle, which is a black box that implements a unitary transformation $U_f$ such that $U_f \ket{x}\ket{y} = \ket{x}\ket{y \oplus f(x)}$, where $\oplus$ denotes addition modulo 2. The quantum circuit implementing Deutsch’s algorithm is presented in  \autoref{fig:Deutsch-Jozsa}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
    \lstick{$\ket{0}$} &  \qw & \gate{H} & \gate[wires=2]{U_f} & \gate{H} & \meter{} \\
    \lstick{$\ket{1}$} &  \qw & \gate{H} & \qw & \qw & \qw\\ 
  \end{quantikz}
  \caption{Quantum circuit implementing Deutsch’s algorithm}
  \label{fig:Deutsch-Jozsa}
\end{figure}

Using lambda calculus, the Deutsch-Jozsa Algorithm can be expressed as:
\begin{align*}
\text{Deutsch} :    \hspace{5pt} (\textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit}) \multimap \textit{bit} \otimes \textit{qbit}
\end{align*}
\begin{align*}
\text{Deutsch} = & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
& \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas} (H( q_{1})) \otimes q_{2}
 \end{align*}

Regarding the interpretation of the Deutsch Algorithm, one has that:
\begin{equation}
\begin{split}
 & \ket{0} \otimes \ket{1} \\
 \xmapsto{ H \otimes H} \quad & \frac{1}{\sqrt{2}}(\ket{0} + \ket{1}) \otimes \ket{-} \\
\end{split}
\end{equation}

With respecto to  quantum oracle $U_f$, it is possible to show that:
\begin{equation}
\begin{split}
  &\ket{x} \otimes \ket{-} =   \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0} - \ket{1}) = \frac{1}{\sqrt{2}}(\ket{x} \otimes \ket{0} - \ket{x} \otimes \ket{1})) \\
  \xmapsto{ \hspace{2pt} U_{f} \hspace{2pt}} \hspace{4pt} &  \frac{1}{\sqrt{2}}(\ket{x} \otimes \ket{0 \oplus f(x)} - \ket{x} \otimes \ket{1 \oplus f(x)}) &\hspace{50pt} \{\text{Defn. of } U_f\} \\
  = \hspace{4pt}  & \frac{1}{\sqrt{2}}(\ket{x} \ket{f(x)} - \ket{x} \ket{\neg f(x)}) & \{0\oplus x=x, 1\oplus x = \neg x\} \\
  = \hspace{4pt}  & \frac{1}{\sqrt{2}}(\ket{x} \otimes (\ket{f(x)}-\ket{\neg f(x)}))
 \end{split}
\end{equation}

Proceding by case distinction:
\begin{equation}
  \frac{1}{\sqrt{2}}(\ket{x} \otimes (\ket{f(x)}-\ket{\neg f(x)}) = 
  \begin{cases}
    \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0}-\ket{1}) &\text{ if } f(x)=0    \\
    \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{1}-\ket{0}) &\text{ if }   f(x)= 1 
  \end{cases}
\end{equation}

And conclude that
\begin{equation}
 \ket{x} \otimes  \frac{1}{\sqrt{2}}(\ket{f(x)}-\ket{\neg f(x)}) = (-1)^{f(x)} \ket{x} \otimes \frac{1}{\sqrt{2}}(\ket{0}-\ket{1}) = (-1)^{f(x)} \ket{x} \otimes \ket{-}
\end{equation}

Returning to the interpretation of the Deutsch Algorithm, one has that:
\begin{equation}
\begin{split}
  \quad & \frac{1}{\sqrt{2}}(\ket{0} + \ket{1}) \otimes \ket{-}\\
  \xmapsto{ \hspace{5 pt} U_{f} \hspace{5pt}} \quad & \frac{1}{\sqrt{2}}( U_{f} \ket{0} \otimes \ket{-} + U_{f} \ket{1} \otimes \ket{-})) \\
  = \quad & \frac{1}{\sqrt{2}}( (-1)^{f(0)} \ket{0} \otimes \ket{-} + (-1)^{f(1)} \ket{1} \otimes \ket{-}) \\
  = \quad &
  \begin{cases}
    (\pm 1) \ket{+} \otimes \ket{-} &\text{ if }   f(0)= f(1) \\
    (\pm 1) \ket{-} \otimes \ket{-} &\text{ if }   f(0) \neq f(1)
  \end{cases} \\
  \xmapsto{ \hspace{2pt} H \otimes I \hspace{2pt}} \quad & 
  \begin{cases}
    (\pm 1) \ket{0} \otimes \ket{-} &\text{ if }   f(0)= f(1) \\
    (\pm 1) \ket{1} \otimes \ket{-} &\text{ if }   f(0) \neq f(1)\\
  \end{cases} 
\end{split}
\end{equation}

Attending to the interpretation of quantum states, concerning the measurement of the first qubit, one has that:
\begin{equation}
\begin{split}
  \quad &
  \begin{cases}
    \ket{0} \bra{0} \otimes \ket{-} \bra{-}  &\text{ if }   f(0)= f(1) \\
    \ket{1} \bra{1} \otimes \ket{-} \bra{-} &\text{ if }   f(0) \neq f(1)
  \end{cases} \\
  \xmapsto{ \hspace{2pt} \textit{meas} \otimes I \hspace{2pt}} \quad &
  \begin{cases}
   (\ket{-} \bra{-},0)  &\text{ if }   f(0)= f(1) \\
   (0,\ket{-} \bra{-}) &\text{ if }   f(0) \neq f(1) 
  \end{cases} \\
\end {split}
\end{equation} 


A measurement error is characterized by reading a "1" as a "0" or vice versa. Furthermore, it's important to note that measurement errors do not impact all states uniformly [\cite{tannu2019mitigating}]. Consequently, there is a discrepancy in how frequently the state "1" is incorrectly read as "0" compared to how often the state "0" is measured as "1" or vice versa.

For example, considering there is a 10\% chance of measuring a "0" as a "1" and a 30\% chance of measuring a "1" as a "0", the resulting state after measurement is:
\begin{equation}
\begin{split}
  \quad &
  \begin{cases}
   (0.9\ket{-} \bra{-},0.1\ket{-} \bra{-})  &\text{ if }   f(0)= f(1) \\
   (0.3\ket{-} \bra{-}, 0.7\ket{-} \bra{-}) &\text{ if }   f(0) \neq f(1) 
  \end{cases} \\
\end {split}
\end{equation}

The norm of a tuple is defined as the sum of the norms of its components, \textit{i.e.}, for any operators $v$ and $w$:
\begin{equation} \label{eq:norm_tuple}
  \lVert (v,w) \rVert = \lVert v \rVert + \lVert w \rVert
\end{equation}

As a result, the discrepancy between the ideal and actual measurement results corresponds to:
\begin{equation}
  \begin{split}
    \quad &
    \begin{cases}
      \lVert(\ket{-} \bra{-},0) - (0.9\ket{-} \bra{-},0.1\ket{-} \bra{-})   \rVert_{\diamondsuit} &\text{ if }   f(0)= f(1) \\
      \lVert (0,\ket{-} \bra{-}) - (0.3\ket{-} \bra{-}, 0.7\ket{-} \bra{-}) \rVert_{\diamondsuit} &\text{ if }   f(0) \neq f(1) 
    \end{cases} \\
    = \quad &
    \begin{cases}
      \lVert(0.1\ket{-} \bra{-},-0.1\ket{-} \bra{-})   \rVert_{\diamondsuit} &\text{ if }   f(0)= f(1) \\
      \lVert (-0.3\ket{-} \bra{-}, 0.3\ket{-} \bra{-}) \rVert_{\diamondsuit} &\text{ if }   f(0) \neq f(1)
    \end{cases} \\
    = \quad &
    \begin{cases}
      \lVert 0.1\ket{-} \bra{-}\rVert_{\diamondsuit} + \lVert - 0.1 \ket{-} \bra{-}\rVert_{\diamondsuit} &\text{ if }   f(0)= f(1) \\
      \lVert -0.3\ket{-} \bra{-}\rVert_{\diamondsuit} + \lVert - 0.3 \ket{-} \bra{-}\rVert_{\diamondsuit} &\text{ if }   f(0) \neq f(1)
    \end{cases} \\
  \end {split}
  \end{equation}

  Employing \autoref{eq:Bloch_vector}, it is easily concluded that the Bloch vector of the state $\ket{-} \bra{-}$ is $(-1,0,0)$. Consequently,  the discrepancy between the ideal and actual measurement results is:
  \begin{equation}
    \begin{split}
      & 
      \begin{cases}
        \lVert (-0.1,0,0) \rVert_{2} + \lVert (0.1,0,0) \ket{-} \bra{-}\rVert_{2} &\text{ if }   f(0)= f(1) \\
        \lVert(0.3,0,0)\ket{-} \bra{-}\rVert_{2} + \lVert (-0.3,0,0) \ket{-} \bra{-}\rVert_{2} &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
      = \quad &
      \begin{cases}
        \sqrt{(-0.1)^{2} + 0^{2} + 0^{2}} + \sqrt{(0.1)^{2} + 0^{2} + 0^{2}} &\text{ if }   f(0)= f(1) \\
        \sqrt{(0.3)^{2} + 0^{2} + 0^{2}} + \sqrt{(-0.3)^{2} + 0^{2} + 0^{2}} &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
      = \quad &
      \begin{cases}
        2 \sqrt{0.01} &\text{ if }   f(0)= f(1) \\
        2 \sqrt{0.09}  &\text{ if }   f(0) \neq f(1)
      \end{cases} \\
    \end{split}
\end{equation}

Via the metric deductive system in \autoref{fig:metric deductive system}, it is easily verified that for an arbitrary error $\epsilon$:
\begin{align*}
   & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
  & \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas} (H( q_{1})) \otimes q_{2} \\
  =_{\epsilon}& \\
   & \hspace{3pt} U_{f}: \textit{qbit} \otimes \textit{qbit} \multimap \textit{qbit} \otimes \textit{qbit} \hspace{3pt} \triangleright \hspace{3pt}  \\ 
  & \text{pm} \hspace{4pt}  U_{f}(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(H(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  1 \hspace{1pt}(*)))) \hspace{2pt}  \textit{to} \hspace{2pt} q_{1} \otimes q_{2} \hspace{1pt}. \hspace{3pt} \textit{meas}^{\epsilon} (H( q_{1})) \otimes q_{2}
   \end{align*}

Therefore, $\text{Deutsch}=_{\epsilon} \text{Deutsch}^{\epsilon}$, and consequently, for scenario under consideration, if $f$ is a constant function, $\text{Deutsch} ={2 \sqrt{0.01}} \text{Deutsch}^{0.1,0.3}$; otherwise, $\text{Deutsch} =_{2 \sqrt{0.09}} \text{Deutsch}^{0.1,0.3}$.

\section{Conditionals}

The notion of approximate equivalence for quantum programming explored in [\cite{dahlqvist2022syntactic}] does not encompass classical control flow. As a result, preliminary work based on [\cite{crole1993categories,selinger2013lecture}]   has been undertaken to address the integration of conditionals. 

\subsection{Syntax}

The term formation rules for conditionals are depicted in
\autoref{fig:typing_rules_cond}. 

\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
& \hspace{55pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma \triangleright v: \mathbb{A} \\
    \hline
   \Gamma \triangleright \text{inl}_{\mathbb{B}}(v):  \mathbb{A} \oplus \mathbb{B}
\end{array}
$
\end{minipage}
\hspace{-30pt}
\text{(inl)} 
 \hspace{20pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
      \Gamma \triangleright v:  \mathbb{B} \\
    \hline
   \Gamma \triangleright \text{inr}_{\mathbb{A}}(v): \mathbb{A} \oplus \mathbb{B}
\end{array}
$ \end{minipage} 
\hspace{-30pt} \text{(inr)} \\
&\hspace{15pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
   E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\}: \mathbb{C} 
\end{array}
$
\end{minipage}
\hspace{200pt}
\text{(case)} 
\end{aligned}
\end{split}
\end{equation*}
\caption{Term formation rules for conditionals}
\label{fig:typing_rules_cond}
\end{figure}


\subsubsection{Properties}
The rules presented in \autoref{fig:typing_rules_cond} are subject 
the properties in \autoref{theorem:unique_der}.


\begin{theorem} \label {theorem:unique_der}
 Lambda calculus with conditionals has the following properties:
\begin{enumerate}
  \item for all judgements $\Gamma \triangleright v$ and $\Gamma' \triangleright v$, te($\Gamma$) $\simeq_{\pi}$  te($\Gamma'$); 
  \item additionally if $\Gamma \triangleright v: \mathbb{A}, \Gamma'\triangleright v: \mathbb{A}'$, and $\Gamma \simeq_{\pi} \Gamma' $, then $\mathbb{A}$ must be equal to $\mathbb{A}'$;
  \item all judgements $\Gamma \triangleright v:\mathbb{A}$ have a unique derivation.
\end{enumerate}
\end{theorem}

\paragraph{Proof} 

Regarding the first property, considering the case statement in  \autoref{fig:typing_rules_cond} and 

\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  & \hspace{15pt}
  \begin{minipage}[t]{0.3\textwidth}
  $\begin{array}{c}
       \Gamma'\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta', x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta', y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E' \in \text{Sf}(\Gamma';\Delta')  \\
      \hline
     E' \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\}: \mathbb{C} 
  \end{array}
  $
  \end{minipage} 
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

we want to prove that te($E$) $\simeq_{\pi}$  te($E'$). By induction hypothesis, te($\Gamma$) $\simeq_{\pi}$  te($\Gamma$), te($\Delta,x$) $\simeq_{\pi}$  te($\Delta',x$) and te($\Delta,y$) $\simeq_{\pi}$  te($\Delta',y$). This implies that  te($\Delta$) $\simeq_{\pi}$ te($\Delta'$). Since, $E \in \text{Sf}(\Gamma;\Delta)$ and  $E' \in \text{Sf}(\Gamma';\Delta')$, one has that te($E$) $\simeq_{\pi}$  te($\Gamma, \Delta$) and te($E'$) $\simeq_{\pi}$  te($\Gamma', \Delta'$). Consequently, te($E$) $\simeq_{\pi}$  te($E'$).

With respect to the second property, considering the case statement in  \autoref{fig:typing_rules_cond} and  

\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  & \hspace{15pt}
  \begin{minipage}[t]{0.3\textwidth}
  $\begin{array}{c}
       \Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta', x: \mathbb{A} \triangleright w: \mathbb{C'} \quad \Delta', y: \mathbb{B}  \triangleright u : \mathbb{C'}   \quad E' \in \text{Sf}(\Gamma';\Delta')  \\
      \hline
     E' \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}}  (y) \Rightarrow u\}: \mathbb{C'} 
  \end{array}
  $
  \end{minipage} 
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

we want to prove that if $E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C}$; $\Gamma'\triangleright \text{ cond } v \hspace{2pt} \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C}'$, and $E \simeq_{\pi} E' $, then $\mathbb{C}$ must be equal to $\mathbb{C}'$. Assuming, that  $E \simeq_{\pi} E' $ and knowing that $E \in \text{Sf}(\Gamma;\Delta)$ and  $E' \in \text{Sf}(\Gamma';\Delta')$, one has that

\begin{align*}
  & x: \mathbb{A}  \in \Delta & \\
  \implies & x: \mathbb{A}  \in E \hspace{50pt} \{E \in \text{Sf}(\Gamma;\Delta)\} \\
  \implies & x: \mathbb{A} \in E' \hspace{50pt} \{ E \simeq_{\pi} E' \}  \\
  \implies & x: \mathbb{A}  \in \Delta' \hspace{50pt} \{\text{All terms are well typed and contexts do not share variables}\}
\end{align*}

This proves that $\Delta \simeq_{\pi} \Delta'$. Therefore, by induction hypothesis on the premises of the conditional statement, one has that $\mathbb{C}$ must be equal to $\mathbb{C}'$.
  


Finally, concerning the third property it is necessary to demonstrate that the case statement in \autoref{fig:typing_rules_cond} has a unique derivation. This means proving that the premises in \autoref{fig:typing_rules_cond} and in

\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  & \hspace{15pt}
  \begin{minipage}[t]{0.3\textwidth}
  $\begin{array}{c}
       \Gamma'\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta', x: \mathbb{A} \triangleright w: \mathbb{C'} \quad \Delta', y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E' \in \text{Sf}(\Gamma';\Delta')  \\
      \hline
     E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}}  (y) \Rightarrow u\}: \mathbb{C} 
  \end{array}
  $
  \end{minipage} 
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

are equal, more concretely that $\Gamma = \Gamma'$ and $\Delta = \Delta'$. 

\begin{align*}
  & x: \mathbb{A}  \in \Gamma & \\
  \implies & x: \mathbb{A}  \in E \land   te(x:\mathbb{A}) \in \Gamma'  \hspace{50pt} \{E \in \text{Sf}(\Gamma;\Delta), te(\Gamma) \simeq_{\pi}  te(\Gamma') \} \\
  \implies & x: \mathbb{A}  \in E \land  x:\mathbb{A} \in \Gamma'  \hspace{70pt} \{ E \in \text{Sf}(\Gamma;\Delta),E \in \text{Sf}(\Gamma';\Delta') \} \\
\end{align*}

This last implication is related with the fact that in $E$, there can only exist one  variable designated by $x$. Given that a shuffle preserves the relative order of the variables in each context, it follows that $\Gamma = \Gamma'$. The same reasoning can be applied to $\Delta$ and $\Delta'$, which concludes the proof. 

\qed



\begin{lemma} \label {exh_and_sub} (\text{Exchange and Substitution}) For every judgement $\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright v: \mathbb{C}$ it is possible to derive $\Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright v: \mathbb{C}$. For all judgements  $\Gamma,x:\mathbb{A} \triangleright v: \mathbb{B}$ and $\Delta \triangleright w: \mathbb{A}$ it is possible to derive $ \Gamma, \Delta \triangleright v[w/x]: \mathbb{B}$.
\end{lemma}

\paragraph{Proof}

Regarding the exchange property, for the case statement it is necessary to prove that for every judgment $\Gamma, x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{E}}  (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{D}}  (b) \Rightarrow u\}: \mathbb{C}$, it is possible to derive $\Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{D}} (b) \Rightarrow u\}: \mathbb{C}$. It is necessary to consider three scenarios:
\begin{enumerate}
  \item $x:\mathbb{A}, y:\mathbb{B}$ are variables in the context of $v$;
  \item $x:\mathbb{A}, y:\mathbb{B}$ are variables in the context of $w$ and $u$;
  \item  $x:\mathbb{A}$ is a variable in the context of $v$ and $y:\mathbb{B}$ is a variable in the context of $w$ and $u$.
\end{enumerate}

With respect to the first case, by induction hypothesis and applying the case rule, one has that:

\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  &\hspace{-20pt}
  \begin{minipage}[t]{0.3\textwidth}
    \small
  $\begin{array}{c}
       \Gamma,  x:\mathbb{A}, y:\mathbb{B}  \triangleright v: \mathbb{D} \oplus \mathbb{E} \quad \Delta, a:\mathbb{D} \triangleright w: \mathbb{C} \quad \Delta, b:\mathbb{E} \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma, x:\mathbb{A}, y:\mathbb{B}; \Delta )  \\
      \hline
      \Gamma,  y:\mathbb{B}, x:\mathbb{A}\triangleright v: \mathbb{D} \oplus \mathbb{E} \quad \Delta, a:\mathbb{D} \triangleright w: \mathbb{C} \quad \Delta, b:\mathbb{E} \triangleright u : \mathbb{C}   \quad E\in \text{Sf}(\Gamma,y:\mathbb{B},x:\mathbb{A}; \Delta )  \\
     \hline 
     \Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{D}} (b) \Rightarrow u\}: \mathbb{C}
  \end{array}
  $
  \end{minipage}
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

Next, for the second case, by induction hypothesis and applying the case rule, one has that:


\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  &\hspace{-20pt}
  \begin{minipage}[t]{0.3\textwidth}
    \small
  $\begin{array}{c}
       \Gamma \triangleright v: \mathbb{D} \oplus \mathbb{E} \quad x:\mathbb{A}, y:\mathbb{B},\Delta  , a:\mathbb{D} \triangleright w: \mathbb{C} \quad \Delta, x:\mathbb{A}, y:\mathbb{B}, b:\mathbb{E} \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma; x:\mathbb{A}, y:\mathbb{B}, \Delta )  \\
      \hline
      \Gamma  \triangleright v: \mathbb{D} \oplus \mathbb{E} \quad  y:\mathbb{B}, x:\mathbb{A},\Delta, a:\mathbb{D} \triangleright w: \mathbb{C} \quad \Delta, y:\mathbb{B}, x:\mathbb{A},b:\mathbb{E} \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma; y:\mathbb{B},x:\mathbb{A}, \Delta )  \\
     \hline 
     \Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{D}} (b) \Rightarrow u\}: \mathbb{C}
  \end{array}
  $
  \end{minipage}
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

  Finally, for the third case, considering the premises

  \begin{figure} [H]
    \begin{equation*}
    \begin{split}
    \begin{aligned}
    &\hspace{-20pt}
    \begin{minipage}[t]{0.3\textwidth}
      \small
    $\begin{array}{c}
         \Gamma,x:\mathbb{A} \triangleright v: \mathbb{D} \oplus \mathbb{E} \quad \Delta,  y:\mathbb{B}, a:\mathbb{D} \triangleright w: \mathbb{C} \quad \Delta,  y:\mathbb{B}, b:\mathbb{E} \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma, x:\mathbb{A};  \Delta,y:\mathbb{B} )  \\
    \end{array}
    $
    \end{minipage}
    \end{aligned}
    \end{split}
    \end{equation*}
    \end{figure}
and attending to the definition of shuffle, a possibility for $E  \in \text{Sf}(\Gamma, x:\mathbb{A};  \Delta,y:\mathbb{B})$ is $\Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta$, given that the relative order of the variables  in $\Gamma, x:\mathbb{A}$ and $ \Delta,y:\mathbb{B}$ is preserved. As a result, it is possible to derive $\Gamma, y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{D}} (b) \Rightarrow u\}: \mathbb{C}$.

%shuffle is a permutation of typed variables in a context sequence $\Gamma_1, . . . ,  \Gamma_n$ such that for all $i \leq n$ the
%relative order of the variables in $\Gamma_i$ is preserved, 


  With respect to the substitution property, for the case statement it is necessary to prove that for all judgements $E, z:\mathbb{D} \triangleright  \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{A}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{B}}  (y) \Rightarrow u\}: \mathbb{C}$ and $\Sigma\triangleright a: \mathbb{D}$ it is possible to derive $ E, \Sigma  \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{A}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{B}}  (y) \Rightarrow u\}[a/z]: \mathbb{C}$. In this case, it is necessary to consider two scenarios:
  \begin{enumerate}
    \item $z:\mathbb{D}$ is a variable in the context of $v$;
    \item $z:\mathbb{D}$ is a variable in the context of $w$ and $u$.
  \end{enumerate}
  
  Regarding the first case, by induction and applying the case rule, one has that:

  \begin{figure} [H]
    \begin{equation*}
    \begin{split}
    \begin{aligned}
    &\hspace{-10pt}
    \begin{minipage}[t]{0.3\textwidth}
      \small
    $\begin{array}{c}
      \Gamma,z:\mathbb{D} \triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta) \quad \Sigma\triangleright a: \mathbb{D}
      \\
      \hline
      \Gamma, \Sigma \triangleright v[a/z]: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma, \Sigma;\Delta) 
      \\
      \hline
      E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w[a/z] ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u[a/z]\}: \mathbb{C}
      \\
      \hline
      E  \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}}  (y) \Rightarrow u\}[a/z]: \mathbb{C}
    \end{array}
    $
    \end{minipage}
    \end{aligned}
    \end{split}
    \end{equation*}
    \end{figure}

% NOTA: Ver situação do E

The second case is similar to the first one,  applying the exchange property, then the induction,followed by the exchange property once more,  and finally the case rule, one has that

\begin{figure} [H]
  \begin{equation*}
  \begin{split}
  \begin{aligned}
  &\hspace{-10pt}
  \begin{minipage}[t]{0.3\textwidth}
    \small
  $\begin{array}{c}
    \Gamma \triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, z:\mathbb{D}, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta ,z:\mathbb{D}, y:\mathbb{B}, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta) \quad \Sigma\triangleright a: \mathbb{D}
    \\
    \hline
    \Gamma \triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta,   x: \mathbb{A},z:\mathbb{D}  \triangleright w: \mathbb{C} \quad \Delta,  y: \mathbb{B},z:\mathbb{D}   \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta) \quad \Sigma\triangleright a: \mathbb{D}
    \\
    \hline
    \Gamma \triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A},\Sigma \triangleright w[a/z]: \mathbb{C} \quad \Delta, y: \mathbb{B},\Sigma  \triangleright u[a/z] : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta) 
    \\
    \hline
    \Gamma \triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta,\Sigma, x: \mathbb{A} \triangleright w[a/z]: \mathbb{C} \quad \Delta,\Sigma, y: \mathbb{B} \triangleright u[a/z] : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta,\Sigma) 
    \\
    \hline
    E \triangleright \text{ cond } v[a/z] \hspace{2pt} \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\}: \mathbb{C}
    \\
    \hline
    E  \triangleright \text{ cond } v \hspace{2pt} \{\text{inl}_{\mathbb{B}}  (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}}  (y) \Rightarrow u\}[a/z]: \mathbb{C}
  \end{array}
  $
  \end{minipage}
  \end{aligned}
  \end{split}
  \end{equation*}
  \end{figure}

%NOTA: Ver situação do E e 4a derivação

\subsection{Interpretation}
Considering  $v \in V$, $w \in W$, and $u \in U$ where $V, W, U$ represent vector spaces, $\textsc{Il}_{V}: V \xrightarrow{} V\oplus W$, denotes the left injection operator, defined as $\textsc{Il}_{V}= v \mapsto (v,0) $; $\textsc{Ir}_{V}: V \xrightarrow{} W \oplus V$, denotes the right injection operator, defined as $\textsc{Ir}_{V}= v \mapsto (0,v) $; and $\text{dist}_{V, W,U}: V \otimes  \left(W \oplus U\right) \xrightarrow{} \left(V \otimes W\right) \oplus \left(V \otimes U\right)$, denotes the distributive property of the tensor product over the direct sum, defined as $\text{dist}_{V, W,U} =  v \otimes  \left(w, u\right) \mapsto \left(v \otimes w, v \otimes u\right)$. The subscripts in these operators will be omitted unless ambiguity arises. Moreover, the operation \text{either} corresponds to:
\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     V  \xrightarrow{} U  \\
      W \xrightarrow{} U  \\
    \hline
  [T,S]: V \oplus W \xrightarrow{} U
\end{array}
$
\end{minipage} \\
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  [T,S] = (v,w) \mapsto T(v)+S(w) 
\end{array}
$
\end{minipage}
\end{aligned}
\end{split}
\end{equation}
\label{fig:either}
\end{figure}

The interpretation of conditionals is illustrated in \autoref{fig:denotational_sem cond}.

\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
&\hspace{-80pt} 
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
     [\![\Gamma \triangleright v: \mathbb{A}]\!] = m   \\
    \hline
  [\![ \Gamma \triangleright \text{inl} (v):  \mathbb{A} \oplus \mathbb{B}  ]\!] = \textsc{Il}  \cdot m
\end{array}
$ \end{minipage}
\hspace{30pt} 
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     [\![\Gamma \triangleright v:\mathbb{B} ]\!]  = m  \\
    \hline
   [\![\Gamma \triangleright \text{inr} (v):  \mathbb{A} \oplus \mathbb{B}]\!]\!] = \textsc{Ir} \cdot m
\end{array}
$
\end{minipage}\\
\hspace{-25pt}
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
    [\![\Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} ]\!] = b \quad [\![\Delta, x:\mathbb{A} \triangleright w: \mathbb{C} ]\!] = p  \quad  [\![\Delta,y:\mathbb{B} \triangleright u: \mathbb{C} ]\!] = q    \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
  [\![E \triangleright \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C} ]\!] =   \text{either}(p,q) \cdot \text{dist} \cdot \text{sw} \cdot (b \otimes \text{id}) \cdot \text{sp}_{\Gamma;\Delta} \cdot \text{sh}_{E}
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation}
\caption{Judgment interpretation for conditionals}
\label{fig:denotational_sem cond}
\end{figure}

\paragraph{Proof} In order to validate the judgment interpretation for conditionals, it is necessary to demonstrate its correctness.

For the booleans: 
\begin{equation} \label{eq:proof_bool}
 \begin{aligned} 
    \hspace{120pt}&  [\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{A} ]\!] \xrightarrow{\hspace{6pt}\textsc{Il}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!] \\ 
     &[\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{B} ]\!] \xrightarrow{\hspace{6pt}\textsc{Ir}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!]
\end{aligned}   
\end{equation}
Now, for the conditional statement:
\begin{equation} \label{eq:proof_bool_2}
 \begin{aligned} 
    [\![E]\!] & \xrightarrow{\hspace{2pt}\text{sh}_{E}\hspace{2pt}}   [\![\Gamma,\Delta ]\!]   \xrightarrow{\hspace{1pt}\text{sp}_{\Gamma;\Delta}\hspace{1pt}}  [\![\Gamma ]\!] \otimes [\![\Delta ]\!] \xrightarrow{ b \hspace{1pt} \otimes \hspace{1pt} \text{id}} ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!]) \otimes [\![\Delta ]\!] \xrightarrow{\hspace{2pt}\text{sw}\hspace{2pt}}  [\![\Delta ]\!] \otimes ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!])  \\
    & \xrightarrow{\hspace{3pt}\text{dist}\hspace{3pt}} ([\![\Delta ]\!] \otimes [\![\mathbb{A} ]\!]  ) \oplus (  [\![\Delta ]\!] \otimes [\![\mathbb{B} ]\!] ) \xrightarrow{\hspace{1pt}\text{either}(p,q)\hspace{1pt}} [\![\mathbb{C} ]\!]
\end{aligned}   
\end{equation}


Next, it is necessary to demonstrate that the interpretation of exchange and substitution holds for injections and the case statement.

\begin{lemma} \label{interpret_exch} (\text{Exchange}) For all judgements $\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright v: \mathbb{C}$, the following equation holds: $[\![\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright v: \mathbb{C}]\!] = [\![\Gamma,y:\mathbb{B},x:\mathbb{A},  \Delta \triangleright v: \mathbb{C}]\! ] \cdot \text{exch}_{\Gamma,  \mathbb{A}, \mathbb{B},\Delta} $ 
\end{lemma}

\paragraph{Proof}
It is necessary to consider three scenarios:
\begin{enumerate}
  \item $x:\mathbb{A}, y:\mathbb{B}$ are variables in the context of $v$;
  \item $x:\mathbb{A}, y:\mathbb{B}$ are variables in the context of $w$ and $u$;
  \item  $x:\mathbb{A}$ is a variable in the context of $v$ and $y:\mathbb{B}$ is a variable in the context of $w$ and $u$.
\end{enumerate}

For the first case, 
{\footnotesize
\begin{equation*}
  \begin{split}
    & [\![\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \\
 = & \hspace{2pt}  \text{either}([\![ \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ \Delta, b:\mathbb{E} \triangleright u]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma,x:\mathbb{A}, y:\mathbb{B} \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma,\mathbb{A}, \mathbb{B};\Delta} \cdot \text{sh}_{E} \\
 = &  \hspace{2pt}  \text{either}([\![ \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ \Delta, b:\mathbb{E} \triangleright u]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma,y:\mathbb{B},x:\mathbb{A}  \triangleright v: \mathbb{C}]\! ] \cdot \text{exch}_{\Gamma, \mathbb{A}, \mathbb{B}} \otimes \text{id}) \cdot \text{sp}_{\Gamma,\mathbb{A}, \mathbb{B};\Delta} \cdot \text{sh}_{E} \\
 = & \hspace{2pt}  \text{either}([\![ \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ \Delta, b:\mathbb{E} \triangleright u]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, y:\mathbb{B}, x:\mathbb{A}, \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{exch}_{\Gamma,  \mathbb{A}, \mathbb{B}, \Delta} \cdot \text{sp}_{\Gamma,\mathbb{A}, \mathbb{B};\Delta} \cdot \text{sh}_{E} \\
 = &  \hspace{2pt}  \text{either}([\![ \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ \Delta, b:\mathbb{E} \triangleright u]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, y:\mathbb{B}, x:\mathbb{A}, \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma, \mathbb{B},\mathbb{A};\Delta} \cdot \text{exch}_{\Gamma,  \mathbb{A},  \mathbb{B}, \Delta}  \cdot \text{sh}_{E} \\
 = &\hspace{2pt}  \text{either}([\![ \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ \Delta, b:\mathbb{E} \triangleright u]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, y:\mathbb{B}, x:\mathbb{A}, \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma, \mathbb{B},\mathbb{A};\Delta}  \cdot \text{sh}_{E}  \cdot \text{exch}_{\Gamma,  \mathbb{A},\mathbb{B}, \Delta} \\
 = & \hspace{2pt} [\![\Gamma,y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \cdot \text{exch}_{\Gamma,  \mathbb{A}, \mathbb{B}, \Delta} 
\end{split}
\end{equation*}
}

\vspace{5pt}
Next, regarding the second case,
{\footnotesize
\begin{equation*}
  \begin{split}
    & [\![\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \\
     =  &\hspace{2pt}  \text{either}([\![  x:\mathbb{A},y:\mathbb{B}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![  x:\mathbb{A}, y:\mathbb{B},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma;\mathbb{A}, \mathbb{B},\Delta} \cdot \text{sh}_{E} \\
    = & \hspace{2pt}  \text{either}([\![ y:\mathbb{B}, x:\mathbb{A}, \Delta, a:\mathbb{D} \triangleright w ]\!] \cdot \text{exch}_{ \mathbb{A},  \mathbb{B}, \Delta,a:\mathbb{D}},[\![ y:\mathbb{B}, x:\mathbb{A},\Delta, b:\mathbb{E} \triangleright u ]\!] \cdot \text{exch}_{\mathbb{A},  \mathbb{B}, \Delta,b:\mathbb{E}} ) \cdot \text{dist} \cdot \\ 
    &\text{sw} \cdot ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma;\mathbb{A}, \mathbb{B},\Delta} \cdot \text{sh}_{E} \\
    =  &\hspace{2pt}  \text{either}([\![ y:\mathbb{B}, x:\mathbb{A}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![   y:\mathbb{B}, x:\mathbb{A},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist}  \cdot  \text{exch}_{  \mathbb{A},  \mathbb{B}, \Delta, \mathbb{D} \oplus \mathbb{E} } \cdot \text{sw}  \cdot ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \\ 
    &\cdot \text{sp}_{\Gamma;\mathbb{A}, \mathbb{B},\Delta} \cdot \text{sh}_{E}\\
    = &\hspace{2pt}  \text{either}([\![ y:\mathbb{B}, x:\mathbb{A}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![   y:\mathbb{B}, x:\mathbb{A},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist}  \cdot   \text{sw}  \cdot \text{exch}_{\mathbb{D} \oplus \mathbb{E},  \mathbb{A},  \mathbb{B}, \Delta } \cdot ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \\ 
    &\cdot \text{sp}_{\Gamma;\mathbb{A}, \mathbb{B},\Delta} \cdot \text{sh}_{E}\\
    = &\hspace{2pt}  \text{either}([\![ y:\mathbb{B}, x:\mathbb{A}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![   y:\mathbb{B}, x:\mathbb{A},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist}  \cdot   \text{sw}  \cdot  ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{exch}_{\Gamma,  \mathbb{A}, \mathbb{B}, \Delta }  \\ 
    &\cdot \text{sp}_{\Gamma;\mathbb{A}, \mathbb{B},\Delta} \cdot \text{sh}_{E}\\
    = &\hspace{2pt}  \text{either}([\![ y:\mathbb{B}, x:\mathbb{A}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![   y:\mathbb{B}, x:\mathbb{A},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist}  \cdot   \text{sw}  \cdot  ([\![\Gamma \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma; \mathbb{B},\mathbb{A},\Delta} \\ 
    & \cdot \text{sh}_{E}  \cdot \text{exch}_{\Gamma,  \mathbb{A},  \mathbb{B}, \Delta } \\
    = & \hspace{2pt} [\![\Gamma,y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \cdot \text{exch}_{\Gamma,\mathbb{A},  \mathbb{B}, \Delta} 
\end{split}
\end{equation*}
}

\hspace{5pt}

Finally, for the third case, given that the variables $x:\mathbb{A}$ and $y:\mathbb{B}$ are in different contexts, and attending to the fact that the relative order of the variables in both contexts $\Gamma, x:\mathbb{A}$ and $ \Delta,y:\mathbb{B}$ is preserved by the exchange operator, it follows that:
\begin{equation*}
  \text{sp}_{\Gamma,\mathbb{A}; \mathbb{B},\Delta} \cdot \text{sh}_{E} = \text{sp}_{\Gamma,\mathbb{A}; \mathbb{B},\Delta} \cdot \text{sh}_{E} \cdot \text{exch}_{\Gamma, \mathbb{A}, \mathbb{B}, \Delta}
\end{equation*}
And as a result,
{\footnotesize
\begin{equation*}
  \begin{split}
    & [\![\Gamma,x:\mathbb{A}, y:\mathbb{B}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \\
     =  &\hspace{2pt}  \text{either}([\![ y:\mathbb{B}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ y:\mathbb{B},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma,x:\mathbb{A} \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma,\mathbb{A}; \mathbb{B},\Delta} \cdot \text{sh}_{E} \\
     = & \hspace{2pt}  \text{either}([\![ y:\mathbb{B}, \Delta, a:\mathbb{D} \triangleright w ]\!],[\![ y:\mathbb{B},\Delta, b:\mathbb{E} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma,x:\mathbb{A} \triangleright v : \mathbb{D} \oplus \mathbb{E}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma,\mathbb{A}; \mathbb{B},\Delta} \cdot \\
     & \text{sh}_{E} \cdot \text{exch}_{\Gamma, \mathbb{A}, \mathbb{B}, \Delta} \\
      = & \hspace{2pt} [\![\Gamma,y:\mathbb{B}, x:\mathbb{A}, \Delta \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{E}} (a) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{E}} (b) \Rightarrow u\}: \mathbb{C}]\!] \cdot \text{exch}_{\Gamma, \mathbb{A}, \mathbb{B}, \Delta}
\end{split}
\end{equation*}
}

\hspace{10pt}

\begin{lemma} \label{interpret_subs} (\text{Substitution}) For all judgements  $\Gamma,x:\mathbb{A} \triangleright v: \mathbb{B}$ and $\Delta \triangleright w: \mathbb{A}$  the following equation holds: 
  $[\![\Gamma, \Delta \triangleright v[w/x]: \mathbb{B}]\!] = [\![\Gamma, x:\mathbb{A} \triangleright v: \mathbb{B}]\!]\cdot \text{jn}_{\Gamma;\mathbb{A}} \cdot (\text{id} \otimes [\![ \Delta  \triangleright w: \mathbb{A}]\!] ) \cdot \text{sp}_{\Gamma;\Delta}$ 
\end{lemma}

In this case, it is necessary to consider two scenarios:
  \begin{enumerate}
    \item $z:\mathbb{D}$ is a variable in the context of $v$;
    \item $z:\mathbb{D}$ is a variable in the context of $w$ and $u$.
  \end{enumerate}

  For the first case,
  \begin{equation*}
\begin{split}
  &[\![E, \Sigma \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\} [a/z]: \mathbb{C}]\!] \\
  =& \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A} \triangleright w : \mathbb{C}]\!],[\![ \Delta, y:\mathbb{B} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, \Sigma \triangleright v [a/z] : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id})  \\
  & \cdot \text{sp}_{\Gamma, \Sigma;\Delta} \cdot \text{sh}_{E,\Sigma} \\
  = &    \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A} \triangleright w : \mathbb{C}]\!],[\![ \Delta, y:\mathbb{B} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot (([\![\Gamma, z:\mathbb{D} \triangleright v : \mathbb{A} \oplus \mathbb{B}  ]\!] \cdot \text{jn}_{\Gamma; \mathbb{D}} \\
  & \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{\Gamma;\Sigma} )\otimes \text{id}) \cdot \text{sp}_{\Gamma, \Sigma;\Delta} \cdot \text{sh}_{E,\Sigma}\\
  = & \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A} \triangleright w : \mathbb{C}]\!],[\![ \Delta, y:\mathbb{B} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, z:\mathbb{D} \triangleright v : \mathbb{A} \oplus \mathbb{B} ]\!] \otimes \text{id})   \\
&  \cdot \text{sp}_{\Gamma, \mathbb{D};\Delta} \cdot \text{jn}_{\Gamma; \mathbb{D}; \Delta} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}   ]\!] \otimes \text{id} ) \cdot    \text{sp}_{\Gamma; \Sigma;\Delta} \cdot \text{sh}_{E,\Sigma}\\
= &  \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A} \triangleright w : \mathbb{C}]\!],[\![ \Delta, y:\mathbb{B} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, z:\mathbb{D} \triangleright v : \mathbb{A} \oplus \mathbb{B} ]\!] \otimes \text{id})   \\ 
& ... \\
= & \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A} \triangleright w : \mathbb{C}]\!],[\![ \Delta, y:\mathbb{B} \triangleright u ]\!]) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma, z:\mathbb{D} \triangleright v : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \\
  & \cdot \text{sp}_{\Gamma,\mathbb{D};\Delta}  \cdot \text{sh}_{E,\mathbb{D}} \cdot \text{jn}_{E; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{E;\Sigma} \\
= & [\![E,  z:\mathbb{D} \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\}: \mathbb{C}]\!]  \cdot \text{jn}_{E; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{E;\Sigma} \\
\end{split}
  \end{equation*}

  \vspace{5 pt}

  For the second case,
  \begin{equation*}
    \begin{split}
      &[\![E, \Sigma \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\} [a/z]: \mathbb{C}]\!] \\
      =& \hspace{2pt}  \text{either}([\![ \Delta, \Sigma, x:\mathbb{A} \triangleright w [a/z] : \mathbb{C}  ]\!],[\![ \Delta, \Sigma, y:\mathbb{B} \triangleright u [a/z] : \mathbb{C} ]\!]) \cdot \text{dist} \cdot \text{sw}   \\
      & \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma; \Sigma,\Delta} \cdot \text{sh}_{E,\Sigma} \\
      = & \hspace{2pt}  \text{either}([\![ \Delta,  x:\mathbb{A} , \Sigma \triangleright w [a/z] : \mathbb{C}  ]\!] \cdot \text{exch}_{\Delta,\Sigma,\mathbb{A}},[\![ \Delta,  y:\mathbb{B}, \Sigma \triangleright u [a/z] :\mathbb{C}  ]\!] \cdot \text{exch}_{\Delta, \Sigma,\mathbb{B}})    \\
      & \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma; \Sigma,\Delta} \cdot \text{sh}_{E,\Sigma} \\
      = & \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A},z:\mathbb{D} \triangleright w: \mathbb{C} ]\!]  \cdot \text{jn}_{\Delta,\mathbb{A}; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{\Delta,\mathbb{A};\Sigma} \cdot \text{exch}_{\Delta, \Sigma,\mathbb{A}},\\
      & [\![ \Delta, y:\mathbb{B},z:\mathbb{D} \triangleright u : \mathbb{C}  ]\!]\cdot \text{jn}_{\Delta,\mathbb{A}; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{\Delta,\mathbb{B};\Sigma} \cdot \text{exch}_{\Delta, \Sigma,\mathbb{B}}) \cdot \text{dist} \cdot \text{sw}  \\
      & \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma; \Sigma,\Delta} \cdot \text{sh}_{E,\Sigma} \\
      = & \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A},z:\mathbb{D} \triangleright w: \mathbb{C}  ]\!] \cdot  \text{exch}_{\Delta, \mathbb{D},\mathbb{A}},   [\![ \Delta, y:\mathbb{B},z:\mathbb{D} \triangleright u : \mathbb{C}  ]\!]\cdot \text{exch}_{\Delta, \mathbb{D},\mathbb{B}})\\
      & \cdot \text{dist} \cdot \text{sp}_{\Delta, \mathbb{D}; \mathbb{A}\oplus \mathbb{B} } \cdot \text{jn}_{\Delta; \mathbb{D}; \mathbb{A}\oplus \mathbb{B} } \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!]  \otimes \text{id}) \cdot \text{sp}_{\Delta;\Sigma,\mathbb{A}\oplus \mathbb{B}}  \cdot \text{sw}  \\
      & \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma; \Sigma,\Delta} \cdot \text{sh}_{E,\Sigma} \\
      = & \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A},z:\mathbb{D} \triangleright w: \mathbb{C}  ]\!] \cdot  \text{exch}_{\Delta, \mathbb{D},\mathbb{A}},   [\![ \Delta, y:\mathbb{B},z:\mathbb{D} \triangleright u : \mathbb{C}  ]\!]\cdot \text{exch}_{\Delta, \mathbb{D},\mathbb{B}})\\
      & \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma;\Delta, \mathbb{D}} \cdot  \text{jn}_{ \Gamma;\Delta; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!]  \otimes \text{id}) \\
      & \cdot \text{sp}_{\Gamma;\Sigma;\Delta} \cdot \text{sh}_{E,\Sigma} \\
      = &  \hspace{2pt}  \text{either}([\![ \Delta, x:\mathbb{A},z:\mathbb{D} \triangleright w: \mathbb{C}  ]\!] \cdot  \text{exch}_{\Delta, \mathbb{D},\mathbb{A}},   [\![ \Delta, y:\mathbb{B},z:\mathbb{D} \triangleright u : \mathbb{C}  ]\!]\cdot \text{exch}_{\Delta, \mathbb{D},\mathbb{B}})\\
      & \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \cdot \text{sp}_{\Gamma;\Delta, \mathbb{D}}  \cdot \text{sh}_{E,\mathbb{D}} \cdot \text{jn}_{E; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{E;\Sigma}  \\
      = &  \hspace{2pt}  \text{either}([\![ \Delta, z:\mathbb{D}, x:\mathbb{A}\triangleright w: \mathbb{C}  ]\!] ,   [\![ \Delta,z:\mathbb{D} , y:\mathbb{B} \triangleright u : \mathbb{C}  ]\!] ) \cdot \text{dist} \cdot \text{sw} \cdot ([\![\Gamma \triangleright v  : \mathbb{A} \oplus \mathbb{B}  ]\!] \otimes \text{id}) \\
      & \cdot \text{sp}_{\Gamma; \Delta, \mathbb{D}} \cdot \text{sh}_{E,\mathbb{D}} \cdot \text{jn}_{E; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{E;\Sigma} \\
      = & [\![E, z:\mathbb{D} \triangleright \text{ case }  \hspace{2pt}  \{\text{inl}_{\mathbb{B}} (x) \Rightarrow w ; \hspace{1pt} \text{inr}_{\mathbb{A}} (y) \Rightarrow u\} [a/z]: \mathbb{C}]\!] \cdot \text{jn}_{E; \mathbb{D}} \cdot (\text{id} \otimes [\![ \Sigma \triangleright a:\mathbb{D}  ]\!] ) \cdot \text{sp}_{E;\Sigma} \\
    \end{split}
      \end{equation*}

\subsection{ \boldmath $\beta$ and $\eta$ Reductions}

\todo[inline,size=\normalsize]{Fazer intro a o que isto é}






\subsection{Metric equations}
The metric equations for conditionals are presented in \autoref{fig:metric conditionals}. Note that the first two equations are redundant.
\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
 &
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  v =_{q} w \\
    \hline
   \text{inl}(v) =_{q} \text{inl}(w)
\end{array}
$
\end{minipage}
\hspace{-30pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} w \\
    \hline
   \text{inr}(v) =_{q} \text{inr}(w)
\end{array}
$ \end{minipage} \\
\hspace{-30pt}
&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} v' \quad w=_{r} w' \quad u=_{s}u'   \\
    \hline
  \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\} =_{q+\text{max}(r, s )} \text{ case } v' \hspace{2pt}  \{\text{inl} (x) \Rightarrow w' ; \hspace{1pt} \text{inr} (y) \Rightarrow u'\} 
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation*}
\caption{Metric equational system for condicionals}
\label{fig:metric conditionals}
\end{figure}

\paragraph{Proof} In order to validate the metric equational system for conditionals, it is necessary to demonstrate its correctness.

The diamond norm is a particular instance of the operator norm. The operator norm [\cite{guide2006infinite}] for a super-operator $E$ is defined as:
\begin{equation} \label{eq:op_norm}
  \lVert E \rVert_{\sigma} = \text{sup} \{ \lVert E(v) \rVert \hspace{2pt} | \hspace{2pt} \lVert v \rVert = 1 \}
\end{equation}

\vspace{15pt}

For the \textbf{injections}:

Firstly, it is necessary to prove that the identity operator $I$ has a norm equal to 1.
\begin{lemma} \label{lemid}
  $ \lVert I \rVert_{\sigma} = 1   $
\end{lemma}

\textit{Proof.} \quad Using the definition of operator norm in \autoref{eq:op_norm}, it follows that:
\begin{equation} 
\begin{split}
  \lVert I \rVert_{\sigma} = \text{sup} \{\lVert I (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
\end{split}
\end{equation}

\vspace{10pt}

Thereafter, it is imperative to show that the injection operators $\textsc{Il}$ and $\textsc{Ir}$ are have a norm equal to 1.

\begin{lemma} \label{lemil}
  $ \lVert \textsc{Il} \rVert_{\sigma} = 1   $
\end{lemma}

\begin{lemma} \label{lemir}
  $ \lVert \textsc{Ir} \rVert_{\sigma} = 1   $
\end{lemma} 

\textit{Proof.} \quad Employing the definition of operator norm as defined in \autoref{eq:op_norm}, it ensues that:
\begin{equation} 
\begin{split}
  \lVert \textsc{Il} \rVert_{\sigma} &= \text{sup} \{\lVert \textsc{Il} (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert (v,0) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert v \rVert + \lVert 0 \rVert  \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} \\
  & = \text{sup} \{\lVert v \rVert \hspace{2pt} + 0    \hspace{2pt}  \vert \lVert v\rVert =1 \} \hspace{160 pt} \text{ \{Positive definiteness\}} \\
  & = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
\end{split}
\end{equation}

The proof for \autoref{lemir} is analogous to the proof for \autoref{lemil}.
\begin{equation} 
  \begin{split}
    \lVert \textsc{Ir} \rVert_{\sigma} &= \text{sup} \{\lVert \textsc{Ir} (v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{\lVert (0,v) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = \text{sup} \{ \lVert 0 \rVert +\lVert v \rVert   \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} \\
    & = \text{sup} \{0+\lVert v \rVert \hspace{2pt}     \hspace{2pt}  \vert \lVert v\rVert =1 \} \hspace{160 pt} \text{ \{Positive definiteness\}} \\
    & = \text{sup} \{\lVert v \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert v\rVert =1 \} = 1
  \end{split}
  \end{equation}

Futhermore, given the submultiplicative property of the operator norm, for any super-operators $P$ and $Q$,where $\lVert P \rVert_{\sigma} =1  $ the following holds:
\begin{lemma}\label{lemleq}
  $\lVert PQ \rVert_{\sigma} \leq  \lVert Q \rVert_{\sigma}, \quad \lVert P \rVert_{\sigma}  =1 $ 
\end{lemma}

Using these properties it is possible to prove the validity of the metric equations for the injections. Demonstrating the correctness of the metric equations for the injections is equivalent to proving that for any  non‑negative rational $q$ and super-operators $v$ and $w$ such that $d(v,w) \leq q$, where  $d(v,w)$ represents the distance between $v$ and $w$ the following holds:

\begin{theorem} \label{theoremil}
  $d(\textsc{Il}(v),\textsc{Il} (w)) \leq q$
\end{theorem}
\begin{theorem} \label{theoremir}
  $d(\textsc{Ir}(v),\textsc{Ir} (w)) \leq q$
\end{theorem}
\vspace{10pt}
\textit{Proof.} \quad In the quantum paradigm, the distance between two super-operators $E$ and $E'$ corresponds to the diamond norm between $E$ and $E'$. Therefore,
\begin{equation}
\begin{split}
  d(v,w) \leq q \Leftrightarrow \lVert v \otimes I - w \otimes I \rVert_{\sigma} \leq q
\end{split}
\end{equation}

As a result, to prove that $d(\textsc{Il}(v),\textsc{Il} (w)) \leq q$, it suffices to show that:
\begin{align}
  \lVert \textsc{Il}\otimes I (v \otimes I)-\textsc{Il} \otimes I (w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} \\
  \lVert \textsc{Ir}\otimes I (v \otimes I)-\textsc{Ir} \otimes I (w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} 
\end{align}
Given that $\textsc{Il}$ and $\textsc{Ir}$ possess a norm equal to 1, as established by Lemmas \ref{lemil} and \ref{lemir} respectively, and considering the multiplicative property of the operator norm with respect to tensor products alongside the fact that the identity operator also exhibits a norm equal to 1, as demonstrated in  \autoref{lemid}, it follows that both $\lVert \textsc{Il} \otimes I \rVert_{\sigma}$ and $\lVert \textsc{Ir} \otimes I \rVert_{\sigma}$ are equal to one 1. Hence, by \autoref{lemleq},
\begin{align}
   \lVert \textsc{Il}\otimes I (v \otimes I)-\textsc{Il} \otimes I (w \otimes I)\rVert_{\sigma}=\lVert \textsc{Il}\otimes I (v \otimes I-w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma} \\
   \lVert \textsc{Ir}\otimes I (v \otimes I)-\textsc{Ir} \otimes I (w \otimes I)\rVert_{\sigma}=\lVert \textsc{Ir}\otimes I (v \otimes I-w \otimes I)\rVert_{\sigma} \leq \lVert v \otimes I - w \otimes I \rVert_{\sigma}
\end{align}

\vspace{10pt}

Now, regarding the metric equation for the \textbf{conditional statement}, before validating its correctness, it is necessary to prove a few intermediate results. 

The first step is to demonstrate that for any super-operators $P$ and $Q$ the following holds:
\begin{lemma}\label{lem1}
  $\lVert [P,Q] \rVert_{\sigma} \leq \max \{ \lVert P \rVert_{\sigma}, \lVert Q \rVert_{\sigma} \}$
\end{lemma}



$\textit{Proof.}$ \quad Employing the definition of the operator norm in \autoref{eq:op_norm}, it follows that:
\begin{equation} \label{eq:cond_opnorm2}
  \begin{split}
  &\text{sup}{\{ \lVert [P,Q] (v) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert v \rVert=1  \}}  \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1 \}, \text{sup} \{\lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & = \text{sup}{\{ \lVert [P,Q] (w,u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert+ \lVert u \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert = 1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert+ \lVert u \rVert=1 \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  &  =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert+ \lVert u \rVert=1 \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
\end{split}
\end{equation}

Therefore, by the triangle inequality, proving the inequality in \autoref{eq:cond_opnorm3} suffices to establish  \autoref{lem1}.
\begin{equation} \label{eq:cond_opnorm3}
  \begin{split}
  \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert+ \lVert u \rVert=1  \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w  \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  \end{split}
\end{equation}


This can be rewritten as:

\begin{equation} 
  \begin{split}
    \lVert w \rVert+ \lVert u \rVert=1 \wedge \text{sup} \{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt}   \}  \leq \text{max}   \left\{ \dfrac{1}{\lVert w \rVert} \lVert P (w) \rVert  \hspace{2pt},  \dfrac{1}{\lVert u \rVert} \lVert Q (u) \rVert   \right\}
\end{split}
\end{equation}

As a result,
\begin{equation} 
  \begin{split}
    \lVert w \rVert+ \lVert u \rVert=1 \wedge \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert    \}}  \leq \text{max}   \left\{  \left\lVert P \left( \dfrac{1}{\lVert w \rVert} w \right) \right\rVert  \hspace{2pt},  \left\lVert Q \left( \dfrac{1}{\lVert u \rVert} u \right) \right\rVert   \right\}
\end{split}
\end{equation}

This is equivalent to demonstrating that for $a+b=1$,
\begin{equation} 
\begin{split}
\hspace{110 pt}
    x + y  \leq  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
\end{split}
\end{equation}

This is done by arguing by \textit{reductio ad absurdum}, \textit{i.e.}, supposing otherwise leads to a contradiction:
\begin{equation} 
\begin{split} 
    \hspace{90pt}&
     x + y  >  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
    & \Rightarrow  x + y > \dfrac{1}{a}x  \wedge x + y > \dfrac{1}{b}y \\
    & \Rightarrow  a (x + y) > x  \wedge b (x + y)> y \\
    & \Rightarrow  a x + a y > x  \wedge b x + by > y \\
    & \Rightarrow  a x + a y > x  \wedge (1-a) x + (1-a)y > y\\
    & \Rightarrow  a x + a y > x  \wedge x-ax + y -ay > y\\
    & \Rightarrow  x < a x + a y   \wedge x > a x + a y  \\
\end{split}
\end{equation}

\vspace{10pt}

Subsequently, it is imperative to prove that:
\begin{lemma}\label{lemiso}
  $ i= [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ \text{is an isomorphism}.
\end{lemma}

\textit{Proof.} \quad The proof is as follows:

For any vector spaces $V$, $W$, and $U$, $i: (V \otimes U) \oplus (W \otimes U) \xrightarrow{} (V  \oplus W) \otimes U $. If $V$ has dimension $m$, $W$ has dimension $n$, and $U$ has dimension $o$, then the space $(V \otimes U) \oplus (W \otimes U) $ has dimension $mo+no=(m+n)\cdot o$. Similarly, the space $(V\oplus W) \otimes U$ has dimension $(m+n)\cdot o$. Hence, the spaces have the same dimension. Given that spaces with the same dimension are isomorphic [\cite{hefferon2006linear}], it follows that $i$ is an isomorphism.

\vspace{10pt}

Next, it is necessary to demonstrate that for any operators $P$ and $Q$, the identity operator $I$, and an isomorphism $i=[\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ the following holds:

\begin{lemma}\label{lem2}
  $( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]$
\end{lemma}

Which is equivalent to showing that for any vector spaces $V$, $W$, $U$, and $Z$  and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram holds:

\vspace{10pt}


\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-1) edge node [above] {$i$} (m-1-2)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\vspace{10pt}

\textit{Proof.} \quad The proof is straightforward:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \\
    &=  [([P,Q] \otimes I) \cdot (\textsc{Il} \otimes I),([P,Q] \otimes I) \cdot (\textsc{Ir} \otimes I) ]\\
    &=  [P \otimes I, Q \otimes I]
\end{split}
\end{equation}

\vspace{15pt}

Furhtermore, it is imperative to show that the following relation holds:

\begin{lemma}\label{lemi-1}
  $ [P \otimes I, Q \otimes I] \cdot  i^{-1}  = [P,Q] \otimes I$
\end{lemma}

Demonstrating this is equivalent to establishing that for any vector spaces $V$, $W$, $U$, and $Z$, and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram commutes:

\vspace{10pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-2) edge node [above] {$i^{-1}$} (m-1-1)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\textit{Proof.} \quad The proof is as follows:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]  \hspace{100pt} & \text{\{\autoref{lem2}\}} \\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I) \cdot  i \cdot i^{-1} = [P \otimes I, Q \otimes I] \cdot  i^{-1}\\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I)  = [P \otimes I, Q \otimes I] \cdot  i^{-1}  &\text{\{\autoref{lemiso}\}} \\
\end{split}
\end{equation}

\vspace{10pt}
With \autoref{lem2} and \autoref{lemi-1}, it has been proved that the diagram below is valid:
\vspace{5pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    edge[bend left=5] node [above] {$i$}  (m-1-2) % Adjusted minimum width
    (m-1-2) edge node [right=0.5cm] {$[P,Q] \otimes I$} (m-2-1)
    (m-1-2) edge[bend right=-5] node [below] {$i^{-1}$} (m-1-1); % Added the label to the arrow
\end{tikzpicture}

\vspace{10pt}




%Next, it is necessary to demonstrate that the coproduct of two super-operators $P$ and $Q$ has a norm equal to 1.
%\begin{lemma} \label{lemeither}
  %$  \lVert [P, Q]  \rVert_{\sigma} = 1   $
%\end{lemma}

%\textit{Proof.} \quad Utilizing the definition of the operator norm as defined in Equation \ref{eq:op_norm}, it follows that:
%\begin{equation} 
  %\begin{split}
    %\lVert [P, Q]  \rVert_{\sigma}  \\
  %\end{split}
  %\end{equation}
%\vspace{10pt}

Now, it is possivel to prove that $i$ has a norm equal to 1.

\begin{lemma} \label{lem3}
  $  \lVert i\rVert_{\sigma} \geq 1 $
\end{lemma}

\vspace{10pt}

\textit{Proof.} \quad Considering the vector $(v \otimes u, 0)$ with $\lVert(v \otimes u, 0)\rVert = 1$, and  attending the multiplicative property of the operator norm with respect to tensor products, along with the definition of the norm of a tuple as in \autoref{eq:norm_tuple}, it holds that $\lVert v \rVert = 1$ and $\lVert u \rVert =1$. Therefore, using this same property and definition, it is possible to demonstrate that the following holds:
  \begin{equation}
    \begin{split}
      \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ] (v \otimes u, 0) \rVert = \lVert(v, 0) \otimes u \rVert = (\lVert v \rVert + \lVert 0 \rVert ) \lVert u \rVert = \lVert v \rVert \lVert u \rVert =1
    \end{split}
  \end{equation}
 
Given the definition of the operator norm as presented in \autoref{eq:op_norm}, it follows that:
\begin{equation}
  \begin{split}
      & \hspace{3pt} \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \rVert_{\sigma}  = \text{sup} \{ \lVert [\textsc{Il} \otimes I , \textsc{Ir} \otimes I ] (a) \rVert \hspace{2pt} | \hspace{2pt} \lVert a \rVert = 1 \} \\
  \end{split}
  \end{equation}
  From this, it can be deduced that $\lVert i \rVert_{\sigma} \geq 1$.

Subsequently, it is possible to demontrate that $i^{-1}$ has a norm greater than or equal to 1,

\begin{lemma} \label{lem4}
  $  \lVert i^{-1}  \rVert_{\sigma} \leq 1 $
\end{lemma}

\textit{Proof.} \quad Given that $i$ is an isomophism, it follows that 
\begin{equation} 
  \begin{split}
    &\lVert i \cdot i^{-1}  \rVert_{\sigma} = 1  \\
    \leq \hspace{2pt}& \lVert i  \rVert_{\sigma} \cdot \lVert i^{-1}  \rVert_{\sigma} = 1 \hspace{50pt} & \text{\{Norm submultiplicative with respect to compositions\}} \\
    \leq & 1 \cdot \lVert i^{-1}  \rVert_{\sigma} = 1 & \text{\{\autoref{lem4}\}}  \\
    \Leftrightarrow &  \lVert i^{-1}  \rVert_{\sigma} = 1  \\
  \end{split}   
  \end{equation}




Next, one has to prove that for any super-operators $P$ and $Q$ and their respective erroneous versions $P'$ and $Q'$, the following holds:
  \begin{lemma} \label {lemmasum}
    $  \lVert P\cdot Q \otimes I - P'\cdot Q'  \otimes I \rVert_{\sigma} \leq  \lVert (P - P') \otimes I  \rVert_{\sigma} + \lVert (Q - Q') \otimes I \rVert_{\sigma}   $
  \end{lemma} 
  
  \textit{Proof.} \quad Applying the triangle inequality, he submultiplicative property of the operator norm with respect to compositions, and given that a positive and trace-preserving operator map, $E$, has norm $\lVert E \otimes I  \rVert_{\sigma} =1$ (\cite{watrous2018theory}), it follows that:
  
  \begin{equation}
    \begin{split}
      & \lVert P\cdot Q \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &= \lVert  P\cdot Q \otimes I- P\cdot Q' \otimes I + P\cdot Q' \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &\leq \lVert P\cdot Q \otimes I - P\cdot Q' \otimes I  \rVert_{\sigma} + \lVert P\cdot Q' \otimes I - P'\cdot Q' \otimes I  \rVert_{\sigma}  \\
      &\leq \lVert P \rVert_{\sigma} \lVert Q \otimes I - Q' \otimes I  \rVert_{\sigma} + \lVert P \otimes I - P' \otimes I  \rVert_{\sigma} \lVert Q'  \rVert_{\sigma}  \\
      &= \lVert P \rVert_{\sigma} \lVert (Q  - Q') \otimes I  \rVert_{\sigma} + \lVert (P  - P') \otimes I  \rVert_{\sigma} \lVert Q'  \rVert_{\sigma}  \\
      &= \lVert (P - P') \otimes I  \rVert_{\sigma} + \lVert (Q - Q') \otimes I  \rVert_{\sigma}  \\
    \end{split}
    \end{equation}

\vspace{5pt}

Finally, considering the the semantics  the conditional statement  in \autoref{fig:denotational_sem cond}, demonstrating the conditional statement rule in \autoref{fig:metric conditionals} includes proving that for any super-operators $P$, $Q$, $P'$ and $Q'$,  denoting the distance between super-operators $A$ and $B$ as $d(A,B)$,  the following holds:
\begin{lemma} \label {lemma_max_otimes}
  $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$
\end{lemma}
\vspace{10pt}
\textit {Proof.} 
In the quantum paradigm, the distance between two super-operators  corresponds to the diamond norm between the two super-operators. Hence, denoting $ [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ by $i$ it follows that:

%\begin{equation}
%\begin{split}
  %& \text{d} ([P,Q],[P',Q'])  \\
  %&=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert_{1}  \\
  %&=   \lVert [P \otimes I, Q \otimes I]  - [P' \otimes I, Q' \otimes I]  \rVert_{1}  \\
  %&=  \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert_{1}   \\
  %&= \lVert [P -P', Q-Q' ] \otimes I \cdot i \rVert_{1}  \\
%\end{split}
%\end{equation}

\begin{equation} \label{eq:proof_theorem1.1_esq}
  \begin{split}
    & \text{d} ([P,Q],[P',Q'])  \\
    &=  \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert_{\sigma}  \\
    &=   \lVert [P \otimes I, Q \otimes I] \cdot i^{-1}  - [P' \otimes I, Q' \otimes I]  \cdot i^{-1}  \rVert_{\sigma}   \hspace{165pt}  \text{\{\autoref{lemi-1}\}} \\
    &=  \lVert [P - P' \otimes I, Q-Q' \otimes I] \cdot i^{-1}  \rVert_{\sigma}   \\
    & \leq \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert \lVert i^{-1}  \rVert \rVert_{\sigma} \hspace{20pt} \text{\{Norm submultiplicative with respect to compositions\}}  \\  
    & \leq \lVert [(P - P') \otimes I, (Q-Q') \otimes I]  \rVert_{\sigma} \hspace{235pt} \text{ \{\autoref{lem4}\}} \\
  \end{split}
  \end{equation}
and
\begin{equation} \label {eq:proof_theorem1.1_dir}
\begin{split}
   &  \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} \\
   = &  \text{max}\{ \lVert P \otimes I - P' \otimes I \rVert_{\sigma}, \lVert Q \otimes I - Q'\otimes I \rVert_{\sigma} \}\\
   = &  \text{max}\{ \lVert (P - P') \otimes I \rVert_{\sigma}, \lVert (Q - Q') \otimes I \rVert_{\sigma} \}\\
\end{split}
\end{equation}

Finally, by  \autoref{lem1}, it can be deduced that $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$, which concludes the proof of theorem \autoref{lemma_max_otimes}.
\vspace{10pt}


An alternative method to establish \autoref{theorem:1.1} is now presented.
\vspace{5pt}


\textit {Proof.} The proof is as follows:
\begin{equation}
  \begin{split}
    & \text{d} ([P,Q],[P',Q'])  \\
    &=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I    \rVert_{\sigma} \hspace{2pt} \\
    &=   \lVert  ([P,Q]  - [P',Q']) \otimes I    \rVert_{\sigma} \hspace{2pt} \\
    &=   \lVert  [P-P',Q-Q'] \otimes I  \rVert_{\sigma}   \\
    &=    \lVert  [P-P',Q-Q'] \rVert_{\sigma} \lVert I \rVert_{\sigma}\hspace{2pt} & \hspace {20pt} \text{\{Norm multiplicative with respect to tensor products\}} \\ 
    &=    \lVert  [P-P',Q-Q'] \rVert_{\sigma} & \text{\{\autoref{lemid}\}}  \\
  \end{split}
  \end{equation}
Moreover,
\begin{equation}
  \begin{split}
     &  \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} \\
     = &  \text{max}\{ \lVert P \otimes I - P' \otimes I \rVert_{\sigma}, \lVert Q \otimes I - Q'\otimes I \rVert_{\sigma} \}\\
     = &  \text{max}\{ \lVert (P - P') \otimes I \rVert_{\sigma}, \lVert (Q - Q') \otimes I \rVert_{\sigma} \}\\
     = &\text{max}\{ \lVert (P - P') \rVert_{\sigma} \lVert  I \rVert_{\sigma}, \lVert (Q - Q') \rVert_{\sigma} \lVert I \rVert_{\sigma} \} & \hspace{60pt} \text{\{Norm multiplicative with}\\
     && \text{respect to tensor products\}} \\
     = & \text{max}\{ \lVert (P - P') \rVert_{\sigma}, \lVert (Q - Q') \rVert_{\sigma}  \}  & \text{\{\autoref{lemid}\}}  \\
    \end{split}
  \end{equation}

Therefore, by \autoref{lem1}, it can be deduced that $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$, which concludes the proof of theorem \autoref{lemma_max_otimes}.

\vspace{10pt}
  


Now, it is finally possible to adress the proof of the metric equation for the conditional statement as a whole. Considering the the semantics of the conditional statement in \autoref{fig:denotational_sem cond}, the rule for the conditional statement in \autoref{fig:metric conditionals} is valid is equivalent to demonstrating that the distance between the evalution of a boolen $B$ followed by the execution of a program $P$ or a program $Q$ and the evalution of a boolean $B'$ followed by the execution of a program $P'$ or a program $Q'$ is less or equal to the  distance between the evaluation of the boolean $B$ and the evaluation of the boolean $B'$ plus the maximum distance between the execution of the programs $P$ and $P'$ and the execution of the programs $Q$ and $Q'$, \textit{ergo}, that for any booleand $B$ and $B'$ super-operators $P$, $Q$, $P'$ and $Q'$, the following holds:

\begin{theorem} \label {theorem:1.1}
  $ \text{d} (B \cdot [P,Q], B' \cdot [P',Q']) \leq \text{d} (B,B') + \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$
\end{theorem}
\vspace{10pt}

\textit {Proof.} Considering that in the quantum paradigm, the distance between two super-operators  corresponds to the diamond norm between the two super-operators, it follows that:
\begin{equation}
\begin{split}
  & \text{d} (B \cdot [P,Q], B' \cdot [P',Q'])  \\
  &=   \lVert  B \cdot [P,Q] \otimes I - B' \cdot [P',Q'] \otimes I   \rVert_{\sigma}  \\
  & \leq \lVert  (B - B')  \otimes I   \rVert_{\sigma} + \lVert  ([P,Q] - [P',Q']) \otimes I   \rVert_{\sigma} & \hspace{100 pt}  \text{\{\autoref{lemmasum}\}} \\
  &= d(B,B') + \lVert  [P,Q]\otimes I - [P',Q'] \otimes I   \rVert_{\sigma} & \hspace{100 pt} \\
  &=  \text{d} (B,B') + \text{d} ([P,Q],[P',Q'])    \\
  &=d(B,B') + \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} & \text{\{\autoref{lemma_max_otimes}\}} \\ 
\end{split}
\end{equation}




  % The spectral norm is submultiplicative with respect to compositions and multiplicative with respect to tensor products,

  % Flar sobre definições de normas


%m


%hefferon2006linear


\subsection{Quantum Teleportation} \label{sec:teleport}

[\cite{bennett1993teleporting}] introduced the concept of quantum teleportation, which is a protocol that allows the transfer of   unknown quantum states between distant parties.  The quantum teleportation protocol is a fundamental building block for quantum communication, quantum computation, and quantum networks, its applications ranging
from secure quantum communication to distributed quantum computing [\cite{briegel1998quantum,gottesman1999demonstrating,kimble2008quantum}]. %Quantum teleportation enables the development of quantum repeaters, a pivotal technology for the establishment of quantum communication networks, and in general the framework of quantum Internet [\cite{briegel1998quantum,ghalaii2020capacity}].  
%The protocol is based on the entanglement of two qubits and the transmission of two classical bits. Indeed, quantum teleportation can be seen as the rotocol in quantum information that most clearly demonstrates the character of quantum entanglement as a resource: without its presence, such a quantum state transfer would not be possible within the laws of quantum mechanics.


The circuit corresponding to the implementation of the quantum teleportation protocol is depicted in \autoref{fig:teleport}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol}
  \label{fig:teleport}
\end{figure}


%\begin{figure} [H]
    %\centering
    %\begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
        %\lstick{$\ket{0}$} & \qw & \qw & \qw & \qw & \qw& \ctrl{1}& \gate{H}& \qw &  \meter{} & \qw & \qw & \qw & \ctrl{2} & \qw \\
        %\lstick{$\ket{0}$} & \qw &\gate{H} & \qw  & \ctrl{1}& \qw & \targ{} & \qw &  \qw & \meter{} & \qw & \ctrl{1} & \qw & \qw & \qw \\
        %\lstick{$\ket{0}$} & \qw &  \qw & \qw &  \targ{} & \qw &\qw & \qw& \qw & \qw & \qw & \gate{X} & \qw & \gate{Z} & \qw 
   %\end{quantikz}
    %\caption{Quantum Teleportation Protocol}
    %\label{fig:teleport}
%\end{figure}

When formalizing the quantum teleportation protocol within the lambda calculus framework, each part of the protocol is instantiated as a distinct function. This entails the definition of three specific functions:
\begin{align*}
   \hspace{100pt} & \textbf{EPR}: \hspace{5pt} \mathbb{I} \multimap (\textit{qbit} \otimes \textit{qbit}) \\ 
    &\textbf{BellMeasure}: \hspace{5pt} \textit{qbit} \otimes \textit{qbit}  \multimap \textit{bit} \otimes \textit{bit} \\
    &\textbf{Correction}: \hspace{5pt} \textit{qbit} \otimes \textit{bit} \otimes \textit{bit}  \multimap \textit{qbit} \\
\end{align*}


The only part that is not self- explanatory is EPR, an acronym derived from a famous article written in 1935 by Albert Einstein, Boris Podolsky, and Nathan Rosen , where these authors questioned the completeness of Quantum Mechanics [\cite{einstein1935can}].

Considering the unitary operations $H: \textit{qbit} \xrightarrow{}  \textit{qbit}$, $X: \textit{qbit} \xrightarrow{}  \textit{qbit}$, $Z: \textit{qbit} \xrightarrow{}  \textit{qbit}$, $I: \textit{qbit} \xrightarrow{}  \textit{qbit}$, and $\textit{CNOT}: \textit{qbit}, \textit{qbit} \xrightarrow{}  \textit{qbit} \otimes \textit{qbit}$ , these functions are defined as follows:

\begin{align*}
  \hspace{-28pt} &\textbf{EPR} =  - \triangleright  \textit{CNOT} \hspace{2pt} (\textit{H}\hspace{2pt} (q  \hspace{2pt}    ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))),(q  \hspace{2pt}   ( \textit{new}   \hspace{2pt}  0 \hspace{1pt}(*))))  \\ 
      \hspace{-28pt}
      &\textbf{BellMeasure} =  q_{1}: \textit{qbit}, q_{2}: \textit{qbit}  \triangleright  (\text{pm}  \hspace{5pt} \textit{CNOT} (q_{1},q_{2})  \hspace{2pt}  \text{to} \hspace{2pt} x \otimes y.  \hspace{2pt}  \textit{meas} (\textit{H} (x)) \otimes \textit{meas} (y) ) \\
      \hspace{-28pt}
      &\textbf{Correction}= q: \textit{qbit}, x: \text{bit},  y: \text{bit} \triangleright  \text{cond}\hspace{2pt} x  \hspace{2pt}  \{\text{inl} (x_{0}) \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow{}  \textit{I}(q); \\
      \hspace{-28pt}
      & \hspace{335pt} \hspace{5pt} \text{inr} (y_{1}) \Rightarrow  \hspace{2pt}   \textit{X} (q))\} ; \\
      & \hspace{240pt}\text{inr} (x_{1})  \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow   \textit{Z}(q);  \\
      \hspace{-28pt}
      &\hspace{335pt} \text{inr} (y_{1}) \Rightarrow{} \textit{Z} (\textit{X}(q)) \})\}
 \end{align*}


 Designating the qubit to be teleported as $q_0$, one can conceptualize the teleportation procedure as follows:
 \begin{align*}
    \hspace{80 pt} q_{0}: \textit{qbit}\hspace{3 pt} \triangleright \hspace{3 pt} & \text{pm} \hspace{5pt} \textbf{EPR}\hspace{1pt} (*) \hspace{5pt} \text{to} \hspace{5pt}  q_{1} \otimes q_{2}.  \notag \\
     & \text{pm}\hspace{5pt} \textbf{BellMeasure} \hspace{1pt} (q_0,q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} c_{0}\otimes c_{1} . \notag \\
     & \text{pm} \hspace{5pt}  \textbf{Correction} \hspace{1pt} ( q_{2},  c_{0}, c_{1} ) \hspace{5pt} \text{to} \hspace{5pt}  q. \hspace{2pt}  q
 \end{align*}
 

Regarding the interpretation of the quantum teleportation protocol, considering $\rho = |\phi\rangle \langle \phi|$ as the state of the system before measurement, $|\phi\rangle$  is calculated as follows, where $|\psi\rangle$ is the state of the qubit to be teleported:
\begin{equation}  \label{eq:teleport_1}
  \begin{split}
&  |\psi\rangle \otimes |0\rangle \otimes |0\rangle = ( \alpha|0\rangle + \beta|1\rangle) \otimes |0\rangle \otimes |0\rangle  \\
\xmapsto{ \hspace{5pt} I\otimes H \otimes I  \hspace{5pt}} \quad &  ( \alpha|0\rangle + \beta|1\rangle) \otimes \frac{1}{\sqrt{2}} (|00\rangle + |10\rangle )  \\
\xmapsto{I \hspace{1pt} \otimes \hspace{1pt} CNOT} \quad & ( \alpha|0\rangle + \beta|1\rangle) \otimes \frac{1}{\sqrt{2}} (|00\rangle + |11\rangle ) = \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|100\rangle + \beta|111\rangle)\\
\xmapsto{ CNOT \hspace{1pt} \otimes \hspace{1pt} I } \quad &  \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|110\rangle + \beta|101\rangle)\\
 \xmapsto[]{\hspace{5pt} H \otimes I \otimes I \hspace{5pt}} \quad & \frac{1}{2} (\alpha |000\rangle +\alpha |001\rangle +  \alpha|011\rangle + \alpha|111\rangle + \beta|010\rangle - \beta|110\rangle + \beta|101\rangle - \beta|001\rangle )  \\
 = \quad & \frac{1}{2} (|00\rangle \otimes (\alpha |0\rangle + \beta|1\rangle ) + |01\rangle \otimes (\alpha |1\rangle + \beta|0\rangle) + |10\rangle \otimes (\alpha |0\rangle - \beta|1\rangle )   \\
  & + |11\rangle \otimes (\alpha |1\rangle - \beta|0\rangle)) \\
 = \quad & |00\rangle \otimes |\psi\rangle  + |01\rangle \otimes X|\psi\rangle + |10\rangle \otimes Z |\psi\rangle + |11\rangle \otimes XZ|\psi\rangle = |\phi\rangle  \\
  \end{split}
\end{equation}

Regarding the remaining steps of the protocol, 
\begin{equation} \label{eq:teleport_measure}
  \begin{split}
    |\phi\rangle \langle \phi| = \quad & \frac{1}{4} (|00\rangle \langle 00| \otimes |\psi\rangle \langle \psi| + |00\rangle  \langle 01| \otimes |\psi\rangle \langle \psi| X + |00\rangle  \langle 10| \otimes |\psi\rangle \langle \psi| Z     \\ 
    & + |00\rangle  \langle 11| \otimes |\psi\rangle \langle \psi| ZX + X|01 \rangle \langle 00| \otimes |\psi\rangle \langle \psi| + |01 \rangle \langle 01| \otimes X|\psi\rangle \langle \psi|X    \\
    & + |01 \rangle \langle 10| \otimes X|\psi\rangle \langle \psi|Z + |01 \rangle \langle 11| \otimes X|\psi\rangle \langle \psi|ZX  + |10 \rangle \langle 00| \otimes Z|\psi\rangle \langle \psi|   \\
    & + |10 \rangle \langle 01| \otimes Z|\psi\rangle \langle \psi| X + |10 \rangle \langle 10| \otimes Z|\psi\rangle \langle \psi| Z + |10 \rangle \langle 11| \otimes Z|\psi\rangle \langle \psi| ZX \\
    & + |00 \rangle \langle 11| \otimes |\psi\rangle \langle \psi| ZX + |01 \rangle \langle 11| \otimes X|\psi\rangle \langle \psi| ZX + |10 \rangle \langle 11| \otimes Z|\psi\rangle \langle \psi| ZX  \\
    & + |11 \rangle \langle 11| \otimes ZX|\psi\rangle \langle \psi| ZX) \\
    \xmapsto{ \text{meas } \otimes \hspace{1pt} \text{meas} \hspace{1pt}  \otimes \hspace{1pt} I} \quad & \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big) \\
    %\xmapsto{\hspace{10pt}(CX, CX)\hspace{10pt}} \quad & \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} |\psi\rangle \langle \psi|\Big),\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  Z|\psi\rangle \langle \psi|Z \Big)\Big) \\ 
     %\xmapsto{\hspace{22pt} CZ \hspace{23pt}} \quad& \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} |\psi\rangle \langle \psi|\Big),\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4}  |\psi\rangle \langle \psi| \Big)\Big)
  \end{split}
\end{equation}

With respect to the final step of the protocol, attending to the interpretation of the conditional statement (\autoref{fig:denotational_sem cond}), the state of the system after the application of the correction function is given by:
\begin{equation} \label{eq:teleport_correction}
  \begin{split}
  &\frac{1}{4}|\psi\rangle \langle \psi| + \frac{1}{4} X X|\psi\rangle \langle \psi|XX +\frac{1}{4} ZZ|\psi\rangle \langle \psi|ZZ + \frac{1}{4} ZXXZ|\psi\rangle \langle \psi|ZXXZ  \\
  =& \frac{1}{4} \left( |\psi\rangle \langle \psi| + |\psi\rangle \langle \psi| + |\psi\rangle \langle \psi|+ |\psi\rangle \langle \psi| \right) =  |\psi\rangle \langle \psi|
  \end{split}
\end{equation}

\subsection{Ilustration: Noisy Quantum Teleportation}

%To study decoherence in a quantum channel within the presented metric deductive system, one can consider the application of a dephasing channel in the quantum teleportation protocol with a certain probability $p$. This is exemplified for probabilities $p=0.5$ and $p=0.25$. It is worth noting that similar exercises can be done for scenarios such as a malicious attack involving a bit flip during measurement or the presence of a noisy channel.

\subsubsection{Noisy Quantum Teleportation: Decoherence}

%\cite{zurek1991decoherence}

Realistic quantum systems are never isolated, but are immersed
in the surrounding environment and interact continuously with it [\cite{schlosshauer2005decoherence}]. Decoherence can be seen as the consequence of that  `openness' of quantum systems to their  environments .  To study decoherence in a quantum channel within the presented metric deductive system, one can consider the application of a dephasing channel in the quantum teleportation protocol with a certain probability $p$.

The Kraus operators of the dephasing channel with probability $p$ are expressed as:
\begin{equation}
    \hspace{100pt} D_{0}= \frac{\sqrt{2-p}}{\sqrt{2}} I,  D_{1}= \frac{\sqrt{p}}{\sqrt{2}} Z
\end{equation}

Considering a density operator $\rho=|\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |$, using these Kraus operators, it is possible to easily verify  that after applying the dephasing channel with probability $p$, the resulting operator $\rho'$ is given by: 
\begin{equation} \label{eq:dephasing_result}
     \rho' =  A_{0} \rho A_{0}^{\dag} + A_{1} \rho A_{1}^{\dag} = |\alpha|^{2} |0\rangle \langle 0 | +  (1-p) \alpha \beta^{\dag} |0\rangle \langle 1 | +  (1-p) \alpha^{\dag}  \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 | 
\end{equation}
This shows that the dephasing channel with probability $p$ preserves the diagonal elements of the density matrix while attenuating the off-diagonal elements by a factor of $(1-p)$.

The circuit representing the introduction of decoherence after EPR is illustrated in \autoref{fig:teleport_dephasing}.
\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \qw & \qw &\qw  & \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}}  & \qw  & \ctrl{1}& \qw &    & \gate{D_{p}}\gategroup[1,steps=1,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Dephasing}}  & \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw \qw & & \qw & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Dephasing with probability $p$ after EPR pair creation.}
  \label{fig:teleport_dephasing}
\end{figure}

In this case, to facilate the analysis, the quantum teleportion protocol is devided in four parts: EPR, BellMeasure, Identity and Correction. This entails the definition of an aditional function and respective version subjected to decoherence with probability $p$:
\begin{equation*}
  \begin{split}
  \textbf{Identity}: \hspace{5pt} \textit{qbit}  \multimap \textit{qbit} \\
  \textbf{Identity}^{p}: \hspace{5pt} \textit{qbit}  \multimap \textit{qbit}
  \end{split}
\end{equation*}
Considering the unitary operation $I: \textit{qbit} \xrightarrow{} \textit{qbit}$, and the operation $D_{p}: \textit{qbit} \xrightarrow{}  \textit{qbit}$  the ideal version of this function, \textbf{Identity}, and its respective version subjected to decoherence with probability $p$, $\textbf{Identity}^{p}$,  are defined as follows:
\begin{align}
  &\textbf{Identity} =  q: \textit{qbit}  \triangleright  I (q) :  \textit{qbit} \\
  &\textbf{Identity}^{p} =  q: \textit{qbit}  \triangleright  D_{p} (q) : \textit{qbit}
\end{align}

Designating the qubit to be teleported as $q_0$, one can conceptualize the teleportation procedure as follows:
\begin{align*}
    \hspace{130 pt}& \text{pm} \hspace{5pt} \textbf{EPR}\hspace{1pt} (*) \hspace{5pt} \text{to} \hspace{5pt}  q_{1} \otimes q_{2}.  \notag \\
    & \text{pm}\hspace{5pt} \textbf{Identity} \hspace{1pt} (q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} id\_q_{1}. \notag \\
    & \text{pm}\hspace{5pt} \textbf{BellMeasure} \hspace{1pt} (q_0,id\_q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} c_{0}\otimes c_{1} . \notag \\
    & \text{pm} \hspace{5pt}  \textbf{Correction} \hspace{1pt} ( q_{2},  c_{0}, c_{1} ) \hspace{5pt} \text{to} \hspace{5pt}  q. \hspace{2pt}  q
\end{align*}

To evaluate the disparity between the ideal implementation of the quantum teleportation protocol and its realization subjected to decoherence, the initial step involves computing the distance between the density operators of the ideal and noisy implementations of the EPR state, denoted as $\rho$ and $\rho'$, respectively.

\begin{equation}
  \begin{split}
& |0\rangle \bra{0} \otimes |0\rangle \bra{0}  \\
\xmapsto{ \hspace{10pt} \text{EPR} \hspace{10pt} } \quad &  \frac{1}{2} (|00\rangle \bra{00} + \ket{00}\bra{11} + |11\rangle \bra{00} + |11\rangle \bra{11}) = \rho \\
\xmapsto{ \hspace{2pt} D(p) \otimes I  \hspace{2pt}} \quad &  \frac{1}{2} (|00\rangle \bra{00} + (1-p) \ket{00}\bra{11} + (1-p) |11\rangle \bra{00} + |11\rangle \bra{11} ) = \rho' \\
  \end{split}
\end{equation}

The distance between the $r$-image of the mapping $1 \mapsto \frac{1}{2} (|00\rangle \bra{00} + \ket{00}\bra{11} + |11\rangle \bra{00} + |11\rangle \bra{11})$ and the mapping $1 \mapsto \frac{1}{2} (|00\rangle \bra{00} + (1-p) \ket{00}\bra{11} + (1-p) |11\rangle \bra{00} + |11\rangle \bra{11} )$ is given by: $f(p)= \lVert\frac{p}{2}(\ket{00}\bra{11}+|11\rangle \bra{00})\rVert_{1}$. Therefore, attending to \autoref{eq:norm_iso_r}, $\lVert \rho-\rho'(p) \rVert_{\diamondsuit} = f(p)$.
\begin{equation}
  \begin{split}
    \quad&f(p) = \left\lVert\frac{p}{2}\left(\ket{00}\bra{11}+|11\rangle \bra{00}\right)\right\rVert_{1} \\
   = \quad &  \text{Tr}\left(\sqrt{\frac{p^{2}}{4}(\ket{00}\bra{11}+|11\rangle \bra{00})(\ket{00}\bra{11}+|11\rangle \bra{00})^{\dag}}\right)  \quad & \{\lVert \rVert_{1} \text{ defn. for matrices}\} \\
   =  \quad &  \text{Tr} \left(\sqrt{ \frac{p^{2}}{4} (\ket{00}\bra{00}+|11\rangle \bra{11})} \right) & \\
    =  \quad &  \text{Tr} \left( \frac{p}{2}(\ket{00}\bra{00}+|11\rangle \bra{11}) \right) & \{ \text{\autoref{eq:apply_f_diag}}\} \\
    =  \quad &  \frac{p}{2} + \frac{p}{2} = p & \\
  \end{split}
\end{equation}

Therefore, the distance between the ideal and noisy implementations of the EPR state is given by $\lVert \rho-\rho'(p) \rVert_{\diamondsuit} = p$.

Next, via the metric deductive system in \autoref{fig:metric deductive system}, it is easily verified that for an error $p$,
\begin{equation}
\begin{split}
    &q: \textit{qbit}  \triangleright  I (q) =_{p} q: \textit{qbit} \triangleright D_{p} (q)  : \textit{qbit} \\    
\end{split}
\end{equation}
Therefore $\textbf{Identity} =_{p} \textbf{Identity}^{p}$ and finally, considering the entirety of the quantum teleportation protocol denoted as $\textbf{QTP}$, it follows that $\textbf{QTP} =_{p} \hspace{3pt}\textbf{QTP}^{p}$. This final metric equation indicates that by bounding the error associated with the application of decoherence with a specified probability $p$ to the initial qubit before measurement, it becomes feasible to limit the overall error of the entire quantum teleportation protocol. Moreover, it is interesting to observe that the error associated with the application of decoherence with a certain probability $p$ in one of the qubits corresponds exactly to that probability $p$.

\subsubsection{Noisy Quantum Teleportation: Amplitude Damping}
Next, the amplitude-damping channel is considered as a source of noise in the quantum teleportation protocol. Similarly to the dephasing channel, the amplitude damping channel serves as a model illustrating the dissipation of energy between a qubit and its environment. An example of this type of noise is found in the spontaneous emission of a photon by a two-level atom into an electromagnetic field environment with either a finite or infinite number of modes at zero temperature [\cite{salles2008experimental, Wang_2011}].


The amplitude damping channel with probability $\gamma$ is described by the Kraus operators:
\begin{equation}
     A_{0}= \ket{0} \bra{0} + \sqrt{1-\gamma} \ket{1} \bra{1} ,  A_{1}= \sqrt{\gamma} \ket{0} \bra{1}
\end{equation}

Applying these Kraus operators to the density operator $\rho=|\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |$, the the resulting operator $\rho'$ is given by:
\begin{equation} \label{eq:ad_result}
  \begin{split}
     \rho' & =  A_{0} \rho A_{0}^{\dag} + A_{1} \rho A_{1}^{\dag} \\
     & = (|\alpha|^{2} + \gamma |\beta|^{2}) \ket{0}\bra{0} + \sqrt{1-\gamma} \hspace{1pt} \alpha \beta^{\dag} \ket{0}\bra{1} + \sqrt{1-\gamma} \hspace{1pt} \alpha^{\dag} \beta \ket{1}\bra{0} + (1-\gamma) |\beta|^{2} \ket{1}\bra{1}
  \end{split}
\end{equation}
It is possible to observe that as $\gamma$ increases, while the $\ket{1} \bra{1}$ component, alongside the non-diagonal elements, are attenuated, the $\ket{0} \bra{0}$ element is amplified. 

The circuit representing the introduction of amplitude damping after the correction step is presented in \autoref{fig:teleport_amplitude_damping}.
\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} & \qw & \qw   & \gate{A_{\gamma}}\gategroup[1,steps=2,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      { \hspace{50 pt} Amplitude Damping}}} & \qw
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Amplitude Dampling with probability $\gamma$ after Correction.}
  \label{fig:teleport_amplitude_damping}
\end{figure}

Once again, a fourth part of the teleportation protocol, the $\textbf{Identity}$, is considered to facilitate the error analysis. In this case, it is neccessay to define the erroneous version of $\textbf{Identity}$, $\textbf{Identity}^{A(\gamma)}$:
\begin{equation}
  \textbf{Identity}^{A(\gamma)} : \textit{qbit}  \multimap \textit{qbit} 
\end{equation}

Considering the operation $A_{\gamma}: \textit{qbit} \xrightarrow{}  \textit{qbit}$  the respective version of $\textbf{Identity}$  subjected to amplitude damping with probability $\gamma$, $\textbf{Identity}^{A(\gamma)}$,  is defined as follows:
\begin{align}
  &\textbf{Identity}^{A(\gamma)} =  q: \textit{qbit}  \triangleright  A_{\gamma} (q) : \textit{qbit} 
\end{align}

Designating the qubit to be teleported as $q_0$, one can conceptualize the teleportation procedure as follows:
\begin{equation}
  \begin{split}
    \hspace{130 pt}& \text{pm} \hspace{5pt} \textbf{EPR}\hspace{1pt} (*) \hspace{5pt} \text{to} \hspace{5pt}  q_{1} \otimes q_{2}.  \notag \\
    & \text{pm}\hspace{5pt} \textbf{BellMeasure} \hspace{1pt} (q_0,q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} c_{0}\otimes c_{1} . \notag \\
    & \text{pm} \hspace{5pt}  \textbf{Correction} \hspace{1pt} ( q_{2},  c_{0}, c_{1} ) \hspace{5pt} \text{to} \hspace{5pt}  q. \hspace{2pt}  \textbf{Identity}(q)
  \end{split}
\end{equation}

The first step to evaluate the distance between the ideal quantum teleportation protocol and the one subjected to amplitude damping with probability $\gamma$ is to compute the distance between the density operators of the ideal and noisy implementations of the teleported qubit, denoted as $\rho$ and $\rho'$, respectively.

As shown in \autoref{eq:teleport_correction}, the state of the teleported qubit is $\rho=\ket{\psi}\bra{\psi}$. Given \autoref{eq:ad_result}, the state of the teleported qubit after amplitude damping with probability $\gamma$ is $(|\alpha|^{2} + \gamma |\beta|^{2}) \ket{0}\bra{0} + \sqrt{1-\gamma} \hspace{1pt} \alpha \beta^{\dag} \ket{0}\bra{1} + \sqrt{1-\gamma} \hspace{1pt} \alpha^{\dag} \beta \ket{1}\bra{0} + (1-\gamma) |\beta|^{2} \ket{1}\bra{1}$, which is denoted as $\rho'$.

As a result,
\begin{equation}
  \begin{split}
   \rho - \rho' = & |\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |  - \big((|\alpha|^{2} + \gamma |\beta|^{2}) \ket{0}\bra{0}
   \\ & + \sqrt{1-\gamma} \hspace{1pt} \alpha \beta^{\dag} \ket{0}\bra{1} + \sqrt{1-\gamma} \hspace{1pt} \alpha^{\dag} \beta \ket{1}\bra{0} + (1-\gamma) |\beta|^{2} \ket{1}\bra{1}\big)\\
   = &  \gamma |\beta|^{2} |0\rangle \langle 0 | + (1-\sqrt{1-\gamma}) (\alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 |) - \gamma |\beta|^{2} |1\rangle \langle 1 |  
  \end{split}
\end{equation}
Employing \autoref{eq:Bloch_vector}, the components of the Bloch vector of the state $\rho-\rho'$ are as follows:
\begin{equation} \label{eq:bloch_ap}
  \begin{split}
    r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
  \gamma |\beta|^{2} & (1-\sqrt{1-\gamma}) \alpha \beta^{\dag}\\
  (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta & -\gamma |\beta|^{2} 
  \end{pmatrix} \cdot \begin{pmatrix}
  0&1\\
  1&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
  (1-\sqrt{1-\gamma}) \alpha \beta^{\dag} & \gamma |\beta|^{2}\\
  -\gamma |\beta|^{2} & (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta
  \end{pmatrix} \right] = (1-\sqrt{1-\gamma}) (\alpha \beta^{\dag}  + \alpha^{\dag} \beta) \\
  & \\
  r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  \gamma |\beta|^{2} & (1-\sqrt{1-\gamma}) \alpha \beta^{\dag}\\
  (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta & -\gamma |\beta|^{2}
  \end{pmatrix} \cdot \begin{pmatrix}
  0&-i\\
  i&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
  i (1-\sqrt{1-\gamma}) \alpha \beta^{\dag} & -i \gamma |\beta|^{2}\\
  i \gamma |\beta|^{2} & -i (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta
  \end{pmatrix} \right] = i(1-\sqrt{1-\gamma}) (\alpha \beta^{\dag} - \alpha^{\dag} \beta) \\
  & \\
  r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  \gamma |\beta|^{2} & (1-\sqrt{1-\gamma}) \alpha \beta^{\dag}\\
  (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta & - \gamma |\beta|^{2}
  \end{pmatrix} \cdot \begin{pmatrix}
  1&0\\
  0&-1
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
  \gamma |\beta|^{2} & -(1-\sqrt{1-\gamma}) \alpha \beta^{\dag}\\
  (1-\sqrt{1-\gamma}) \alpha^{\dag} \beta & \gamma |\beta|^{2}
  \end{pmatrix} \right] = \gamma |\beta|^{2} + \gamma |\beta|^{2} = 2\gamma |\beta|^{2}
  \end{split}
  \end{equation}
  Consequently, and knowing that the distance between two vectors corresponds to their Euclidean distance, it follows that the distance between the ideal and noisy implementations of the teleported qubit corresponds to:
\begin{equation}
  \begin{split}
  & \lVert \rho-\rho' \rVert_{\diamondsuit} \\
   = \hspace{2pt}&    \left\lVert  \left((1-\sqrt{1-\gamma}) (\alpha \beta^{\dag}  + \alpha^{\dag} \beta) ,i(1-\sqrt{1-\gamma}) (\alpha \beta^{\dag} - \alpha^{\dag} \beta),2\gamma |\beta|^{2}\right)  \right\rVert_{2} \hspace{50pt}  \{\text{\autoref{eq:bloch_ap}}\}  \\
   = \hspace{2pt}&  \sqrt{ \left( (1-\sqrt{1-\gamma}) (\alpha \beta^{\dag}  + \alpha^{\dag} \beta)\right)^{2} + \left(i(1-\sqrt{1-\gamma}) (\alpha \beta^{\dag} - \alpha^{\dag} \beta)\right)^{2} + \left(2\gamma |\beta|^{2}\right)^{2}} \hspace{10pt} \{\text{\autoref{eq:euclidean_distance}}\}\\
   = \hspace{2pt}&   \sqrt{  \left( (1-\sqrt{1-\gamma}) (\alpha \beta^{\dag}  + \alpha^{\dag} \beta)\right)^{2}  - \left((1-\sqrt{1-\gamma}) (\alpha \beta^{\dag} - \alpha^{\dag} \beta)\right)^{2} + \left(2\gamma |\beta|^{2}\right)^{2}} \\
   = \hspace{2pt}&  \sqrt{  4 \cdot  (1-\sqrt{1-\gamma})^{2} |\alpha|^{2}|\beta|^{2} + 4 \gamma^{2} |\beta|^{4}} \\
   = \hspace{2pt}&  2 \cdot \sqrt{  (1-\sqrt{1-\gamma})^{2} |\alpha|^{2}|\beta|^{2} + \gamma^{2} |\beta|^{4}} \\
\end{split}
\end{equation}
Note that, as expected when $\gamma \xrightarrow{}0$ or $\beta \xrightarrow{}0$ ,$\lVert \rho-\rho' \rVert_{\diamondsuit}\xrightarrow{}0$, and when $\gamma \xrightarrow{}1$, $\lVert \rho-\rho' \rVert_{\diamondsuit}\xrightarrow{} 2 \left(\sqrt{|\alpha|^{2}|\beta|^{2} + \gamma^{2} |\beta|^{4}}\right)$.

From this result, it follows that $\textbf{Identity} =_{ 2 \cdot \sqrt{  (1-\sqrt{1-\gamma})^{2} |\alpha|^{2}|\beta|^{2}+ \gamma^{2} |\beta|^{4}}} \textbf{Identity}^{A(\gamma)}$. Thus, $ \\ \textbf{QTP} =_{2 \cdot \sqrt{  (1-\sqrt{1-\gamma})^{2} |\alpha|^{2}|\beta|^{2} + \gamma^{2} |\beta|^{4}}} \hspace{3pt}\textbf{QTP}^{A(\gamma)}$.
%Problema: Definir operações cptp não unitarias no quantum lambda calculus-> cena operadores de kraus

\subsubsection{Noisy Quantum Teleportation: An imperfect implementation of the Hadamard gate}

Now, it will be considered an imperfect implementation of a Hadamard gate, denoted as $H^{\epsilon}$. Therefore, a new operation is added $H^{\epsilon}: \textit{qbit} \xrightarrow{} \textit{qbit}$ and it is postulated as an axiom that $q:\textit{qbit} \hspace{2pt} \triangleright H =_{\epsilon} H^{\epsilon}:\textit{qbit}$.
 In this example, considering the Hadamard gate as the composition $R_y(\frac{\pi}{2}) \cdot P(\pi)$, $H^{\epsilon}$ is regarded as the composition $R_y(\frac{\pi}{2}) \cdot P(\pi+\delta)$. This imperfect implementation deviates from a precise rotation of $\pi$ radians along the $z$-axis,  rotating by $\pi+\delta$ radians instead.  This type of imperfection is inevitable during the implementation of quantum gates. The circuit representing the introduction of an erroneous Hadamard gate is presented in \autoref{fig:teleport_h}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm] 
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw& \ctrl{1}\gategroup[2,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      BellMeasure}} & \gate{H^{\epsilon}} & \qw & \meter{} & \setwiretype{c}  &  & \gategroup[3,steps=4,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      Correction}}  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H^{\epsilon}}\gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1}& \qw & \qw & \targ{} & \qw & \qw & \meter{} & \setwiretype{c} & & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw &  \qw & \gate{X} & \qw & \gate{Z} 
 \end{quantikz}
  \caption{Quantum Teleportation Protocol: Erroneous implementation of the Hadamard gate. $H^{\epsilon}$ is regarded as the composition $R_{y}(\frac{\pi}{2})\cdot P(\pi + \epsilon)$.}
  \label{fig:teleport_h}
\end{figure}

As usual, the initial step consists of evaluating the distance between the density operators of the ideal and noisy implementations of the Hadamard gate within each block. With respect to the EPR block, as presented in  \autoref{eq:teleport_1} the ideal state of the EPR pair is $\frac{1}{2} (|00\rangle \bra{00} + \ket{00}\bra{11} + |11\rangle \bra{00} + |11\rangle \bra{11})$. Regarding, the imperfect Hadamard gate one has that:
\begin{equation}
  \begin{split}
    &  \ket{0} \otimes \ket{0}   \\
\xmapsto{ \hspace{5pt}  H^{\epsilon} \otimes I  \hspace{5pt}} \quad & R_{y}\left(\frac{\pi}{2}\right)\cdot P(\pi + \epsilon) \ket{0} \otimes \ket{0} =R_{y}\left(\frac{\pi}{2}\right)\ket{0} \otimes \ket{0} =  \frac{1}{\sqrt{2}} (\ket{0} + \ket{1})  \otimes \ket{0} = \frac{1}{\sqrt{2}} (|00\rangle + |10\rangle )   \\
\xmapsto{\hspace{1pt} CNOT \hspace{1pt}} \quad & \frac{1}{\sqrt{2}} (|00\rangle + |11\rangle) = \ket{\Phi} \\
  \end{split}
\end{equation}
Therefore, the state of the EPR pair with an imperfect Hadamard gate is $\ket{\Phi} \bra{\Phi} = \frac{1}{2} (|00\rangle \bra{00} + \ket{00}\bra{11} + |11\rangle \bra{00} + |11\rangle \bra{11})$. Hence, the imperfect Hadamard gate does not affect the state of the EPR pair and, as a result, the distance between the ideal and noisy implementations of the EPR pair is zero, $\textbf{EPR}=_{0}\textbf{EPR}^{H(\epsilon)}$.

Next, it is necessary to repeat this exercise regarding the BellMeasure block. As shown in \autoref{eq:teleport_measure}, the ideal state of the BellMeasure block is $\\ \rho = \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big)$. Regarding the imperfect Hadamard gate, knowing that:
\begin{equation}
  \begin{split}
    &\alpha \ket{0} + \beta \ket{1} \\
    \xmapsto{ \hspace{2pt} H^{\epsilon} \hspace{2pt}} \quad & R_{y}\left(\frac{\pi}{2}\right)\cdot P(\pi + \epsilon) (\alpha \ket{0} + \beta \ket{1}) = R_{y}\left(\frac{\pi}{2}\right)\cdot \left( \alpha \ket{0} + e^{i(\pi+\epsilon)}\beta \ket{1} \right) \\
    = \quad & R_{y}\left(\frac{\pi}{2}\right)\cdot \left( \alpha \ket{0} - e^{i\epsilon}\beta \ket{1} \right) = \frac{1}{\sqrt{2}} \left(\left( \alpha + e^{i\epsilon} \beta\right) \ket{0} + \left( \alpha - e^{\epsilon} \beta\right)  \ket{1} \right)\\
  \end{split}
\end{equation}
It follows, that:
\begin{equation}
  \begin{split}
    &  \ket{\psi} \otimes \ket{0} \otimes  \ket{0} \\
    \xmapsto{ \hspace{10pt} \text{EPR} \hspace{10pt} } \quad &  \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|100\rangle + \beta|111\rangle)\\
    \xmapsto{ CNOT \hspace{1pt} \otimes \hspace{1pt} I } \quad &  \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|110\rangle + \beta|101\rangle)\\ 
    \xmapsto[]{\hspace{5pt} H^{\epsilon} \otimes I \otimes I \hspace{5pt}} \quad &  \frac{1}{2}  \left(\alpha  (\ket{000}+\ket{100}+\ket{011}+\ket{111}) + \beta e^{i\epsilon} (\ket{010}-\ket{110}+\ket{001}-\ket{101}) \right) \\
    \quad & = \frac{1}{2}  \left(\alpha  (\ket{000}+\ket{100}+\ket{011}+\ket{111}) + \beta e^{i\epsilon} (\ket{010}-\ket{110}+\ket{001}-\ket{101}) \right)  \\
    \quad & = \frac{1}{2} (|00\rangle \otimes (\alpha |0\rangle + \beta e^{i\epsilon}|1\rangle ) + |01\rangle \otimes (\alpha |1\rangle + e^{i\epsilon} \beta|0\rangle) + |10\rangle \otimes (\alpha |0\rangle - e^{i\epsilon}\beta|1\rangle ))\\
  & + |11\rangle \otimes (\alpha |1\rangle - e^{i\epsilon} \beta|0\rangle))\\
   \quad & = |00\rangle \otimes  P(\epsilon) |\psi\rangle  + |01\rangle \otimes X P(\epsilon)|\psi\rangle + |10\rangle \otimes Z  P(\epsilon) |\psi\rangle + |11\rangle \otimes XZ P(\epsilon) |\psi\rangle\\
   & = |\phi'\rangle  \\
  \end{split}
\end{equation}

Finally, measuring the first two qubits:
\begin{equation}
\begin{split}
  |\phi'\rangle \langle \phi'|  \xmapsto{ \text{meas }  \otimes \hspace{1pt} \text{meas} \hspace{1pt}  \otimes \hspace{1pt} I} \hspace{2pt}& \Big(\Big(\frac{1}{4} P(\epsilon)|\psi\rangle \langle \psi| P^{\dag}(\epsilon), \frac{1}{4} XP(\epsilon)|\psi\rangle \langle \psi|XP^{\dag}(\epsilon)\Big),\\
  &\Big(\frac{1}{4} ZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)Z, \frac{1}{4}  XZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)ZX \Big)\Big) = \rho'\\
\end{split}
\end{equation}
Given that,
\begin{equation}
  \begin{split}
    |\psi\rangle \langle \psi|- P(\epsilon)|\psi\rangle \langle \psi| P^{\dag}(\epsilon)= & |\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |  - \\
    & (|\alpha|^{2} |0\rangle \langle 0| + e^{-i\epsilon}\alpha \beta^{\dag} |0\rangle \langle 1 | + e^{i\epsilon} \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |)\\
 = & (1-e^{-i\epsilon}) \alpha \beta^{\dag} |0\rangle \langle 1 | + (1-e^{i\epsilon}) \alpha^{\dag} \beta |1\rangle \langle 0 | 
  \end{split}
\end {equation}
\begin{equation}
  \begin{split}
    X\ket{\psi}\bra{\psi}X - XP(\epsilon)|\psi\rangle \langle \psi|XP^{\dag}(\epsilon) = & |\alpha|^{2} |1\rangle \langle 1 | + \alpha \beta^{\dag} |1\rangle \langle 0 | + \alpha^{\dag} \beta |0\rangle \langle 1 | + |\beta|^{2} |0\rangle \langle 0 |  - \\
    & (|\alpha|^{2} |1\rangle \langle 1| + e^{-i\epsilon}\alpha \beta^{\dag} |1\rangle \langle 0 | + e^{i\epsilon} \alpha^{\dag} \beta |0\rangle \langle 1 | + |\beta|^{2} |0\rangle \langle 0 |)\\
  = & (1-e^{-i\epsilon}) \alpha \beta^{\dag} |1\rangle \langle 0 | + (1-e^{i\epsilon}) \alpha^{\dag} \beta |0\rangle \langle 1 |
  \end{split}
\end {equation}
\begin{equation}
  \begin{split}
    Z \ket{\psi}\bra{\psi}Z - ZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)Z = & |\alpha|^{2} |0\rangle \langle 0 | - \alpha \beta^{\dag} |0\rangle \langle 1 | - \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |  - \\
    & (|\alpha|^{2} |0\rangle \langle 0| - e^{-i\epsilon}\alpha \beta^{\dag} |0\rangle \langle 1 | - e^{i\epsilon} \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 |)\\
  = & (e^{-i\epsilon}-1) \alpha \beta^{\dag} |0\rangle \langle 1 | + (e^{i\epsilon}-1) \alpha^{\dag} \beta |1\rangle \langle 0 |
  \end{split}
\end {equation}
\begin{equation}
  \begin{split}
    XZ \ket{\psi}\bra{\psi}ZX - XZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)ZX = & |\alpha|^{2} |1\rangle \langle 1 | - \alpha \beta^{\dag} |1\rangle \langle 0 | - \alpha^{\dag} \beta |0\rangle \langle 1 | + |\beta|^{2} |0\rangle \langle 0 |  - \\
    & (|\alpha|^{2} |1\rangle \langle 1| - e^{-i\epsilon}\alpha \beta^{\dag} |1\rangle \langle 0 | - e^{i\epsilon} \alpha^{\dag} \beta |0\rangle \langle 1 | + |\beta|^{2} |0\rangle \langle 0 |)\\
  = & (e^{-i\epsilon}-1) \alpha \beta^{\dag} |1\rangle \langle 0 | + (e^{i\epsilon}-1) \alpha^{\dag} \beta |0\rangle \langle 1 |
  \end{split}
\end {equation}
Consequently,
\begin{equation}
\begin{split}
\rho-\rho' = & \Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi| - \frac{1}{4} P(\epsilon)|\psi\rangle \langle \psi| P^{\dag}(\epsilon), \frac{1}{4} XP(\epsilon)|\psi\rangle \langle \psi|XP^{\dag}(\epsilon) - \frac{1}{4} XP(\epsilon)|\psi\rangle \langle \psi|XP^{\dag}(\epsilon)\Big),\\
&\Big(\frac{1}{4} ZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)Z - \frac{1}{4} ZP(\epsilon)|\psi\rangle \langle \psi|P^{\dag}(\epsilon)Z, \\
& \frac{1}{4}P(\epsilon)  XZ|\psi\rangle \langle \psi|P^{\dag}(\epsilon)ZX - \frac{1}{4}  XZP(\epsilon) |\psi\rangle \langle \psi|P^{\dag}(\epsilon)ZX \Big)\Big)\\
= &\Big(\Big(\frac{1}{4}(1-e^{-i\epsilon}) \alpha \beta^{\dag} |0\rangle \langle 1 | + \frac{1}{4}(1-e^{i\epsilon}) \alpha^{\dag} \beta |1\rangle \langle 0 |,\frac{1}{4}(1-e^{-i\epsilon}) \alpha \beta^{\dag} |1\rangle \langle 0 | + \frac{1}{4}(1-e^{i\epsilon}) \alpha^{\dag} \beta |0\rangle \langle 1 |\Big) , \\
& \Big(\frac{1}{4}(e^{-i\epsilon}-1) \alpha \beta^{\dag} |0\rangle \langle 1 | + \frac{1}{4}(e^{i\epsilon}-1) \alpha^{\dag} \beta |1\rangle \langle 0 |, \frac{1}{4}(e^{-i\epsilon}-1) \alpha \beta^{\dag} |1\rangle \langle 0 | + \frac{1}{4}(e^{i\epsilon}-1) \alpha^{\dag} \beta |0\rangle \langle 1 | |\Big)\Big)\\
= & \left(\left(\frac{1}{4}\sigma,\frac{1}{4}\sigma'\right),\left(\frac{1}{4}\sigma'',\frac{1}{4}\sigma'''\right)\right)
\end{split}
\end{equation}


Employing \autoref{eq:Bloch_vector}, the components of the Bloch vector of each state $\sigma,\sigma',\sigma'',\sigma'''$ are as follows:

\begin{equation}
  \begin{split}
    r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
 0 & (1-e^{-i\epsilon})\alpha \beta^{\dag} \\
 (1-e^{i\epsilon})\alpha^{\dag} \beta  & 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&1\\
  1&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    (1-e^{-i\epsilon})\alpha \beta^{\dag}  & 0\\
  0 &  (1-e^{i\epsilon})\alpha^{\dag} \beta
  \end{pmatrix} \right] = (1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta \\
  r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (1-e^{-i\epsilon})\alpha \beta^{\dag} \\
  (1-e^{i\epsilon})\alpha^{\dag} \beta  & 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&-i\\
  i&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    i(1-e^{-i\epsilon})\alpha \beta^{\dag}  & 0\\
  0 &  -i(1-e^{i\epsilon})\alpha^{\dag} \beta
  \end{pmatrix} \right] = i(1-e^{-i\epsilon})\alpha \beta^{\dag}  - i(1-e^{i\epsilon})\alpha^{\dag} \beta \\
  r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (1-e^{-i\epsilon})\alpha \beta^{\dag} \\
  (1-e^{i\epsilon})\alpha^{\dag} \beta  & 0
  \end{pmatrix} \cdot \begin{pmatrix}
  1&0\\
  0&-1
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    0&(1-e^{-i\epsilon})\alpha \beta^{\dag} \\
    -(1-e^{i\epsilon})\alpha^{\dag} \beta  & 0
  \end{pmatrix} \right] = 0 \\
  \end{split}
  \end{equation}

  \begin{equation}
    \begin{split}
      r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (1-e^{i\epsilon}) \alpha^{\dag} \beta  \\  
  (1-e^{-i\epsilon}) \alpha \beta^{\dag}& 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&1\\
  1&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    (1-e^{i\epsilon}) \alpha^{\dag} \beta  & 0\\
  0 &  (1-e^{-i\epsilon}) \alpha \beta^{\dag}
  \end{pmatrix} \right] = (1-e^{i\epsilon}) \alpha^{\dag} \beta + (1-e^{-i\epsilon}) \alpha \beta^{\dag} \\
  r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (1-e^{i\epsilon}) \alpha^{\dag} \beta  \\
  (1-e^{-i\epsilon}) \alpha \beta^{\dag}& 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&-i\\
  i&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    i(1-e^{i\epsilon}) \alpha^{\dag} \beta  & 0\\
  0 &  -i(1-e^{-i\epsilon}) \alpha \beta^{\dag}
  \end{pmatrix} \right] = i(1-e^{i\epsilon}) \alpha^{\dag} \beta  - i(1-e^{-i\epsilon}) \alpha \beta^{\dag} \\
  r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (1-e^{i\epsilon}) \alpha^{\dag} \beta  \\
  (1-e^{-i\epsilon}) \alpha \beta^{\dag}& 0
  \end{pmatrix} \cdot \begin{pmatrix}
  1&0\\
  0&-1
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    0&(1-e^{i\epsilon}) \alpha^{\dag} \beta  \\
    -(1-e^{-i\epsilon}) \alpha \beta^{\dag}& 0
  \end{pmatrix} \right] = 0 \\
    \end{split}
    \end{equation}

\begin{equation}
\begin{split}
  r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
0 & (e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
(e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0
\end{pmatrix} \cdot \begin{pmatrix}
0&1\\
1&0
\end{pmatrix} \right]  \\
= & \text{Tr} \left[ \begin{pmatrix}
  (e^{-i\epsilon}-1) \alpha \beta^{\dag}  & 0\\
0 &  (e^{i\epsilon}-1) \alpha^{\dag} \beta
\end{pmatrix} \right] = (e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta \\
r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
  (e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&-i\\
  i&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    i(e^{-i\epsilon}-1) \alpha \beta^{\dag}  & 0\\
  0 &  -i(e^{i\epsilon}-1) \alpha^{\dag} \beta
  \end{pmatrix} \right] = i(e^{-i\epsilon}-1) \alpha \beta^{\dag}  - i(e^{i\epsilon}-1) \alpha^{\dag} \beta \\
  r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
  (e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0
  \end{pmatrix} \cdot \begin{pmatrix}
  1&0\\
  0&-1
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    0&(e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
    -(e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0
  \end{pmatrix} \right] = 0 \\
\end{split}
\end{equation}

\begin{equation}
  \begin{split}
    r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
0 & (e^{i\epsilon}-1) \alpha^{\dag} \beta  \\
(e^{-i\epsilon}-1) \alpha \beta^{\dag}& 0
\end{pmatrix} \cdot \begin{pmatrix}
0&1\\
1&0
\end{pmatrix} \right]  \\
= & \text{Tr} \left[ \begin{pmatrix}
  (e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0\\
0 &  (e^{-i\epsilon}-1) \alpha \beta^{\dag}
\end{pmatrix} \right] = (e^{i\epsilon}-1) \alpha^{\dag} \beta  + (e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (e^{i\epsilon}-1) \alpha^{\dag} \beta  \\
  (e^{-i\epsilon}-1) \alpha \beta^{\dag}& 0
  \end{pmatrix} \cdot \begin{pmatrix}
  0&-i\\
  i&0
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    i(e^{i\epsilon}-1) \alpha^{\dag} \beta  & 0\\
  0 &  -i(e^{-i\epsilon}-1) \alpha \beta^{\dag}
  \end{pmatrix} \right] = i(e^{i\epsilon}-1) \alpha^{\dag} \beta  - i(e^{-i\epsilon}-1) \alpha \beta^{\dag} \\
  r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  0 & (e^{i\epsilon}-1) \alpha^{\dag} \beta  \\
  (e^{-i\epsilon}-1) \alpha \beta^{\dag}& 0
  \end{pmatrix} \cdot \begin{pmatrix}
  1&0\\
  0&-1
  \end{pmatrix} \right]  \\
  = & \text{Tr} \left[ \begin{pmatrix}
    0&(e^{i\epsilon}-1) \alpha^{\dag} \beta  \\
    -(e^{-i\epsilon}-1) \alpha \beta^{\dag}& 0
  \end{pmatrix} \right] = 0 \\
  \end{split}
\end{equation}

As a result, and given that the distance between two vectors corresponds to their Euclidean distance, it follows that the distance between the ideal and noisy implementations of the Hadamard gate in the BellMeasure block corresponds to:
\begin{equation}
  \begin{split}
  \lVert \rho-\rho' \rVert_{\diamondsuit} = & \left\lVert \left( \left( \frac{1}{4} \sigma,\frac{1}{4} \sigma'  \right),  \left(\frac{1}{4} \sigma'',\frac{1}{4} \sigma''' \right)\right) \right\rVert_{\diamondsuit} \\
  = & \left\lVert \frac{1}{4} \sigma \right\rVert_{\diamondsuit} + \left\lVert \frac{1}{4} \sigma' \right\rVert_{\diamondsuit} + \left\lVert \frac{1}{4} \sigma'' \right\rVert_{\diamondsuit} + \left\lVert \frac{1}{4} \sigma''' \right\rVert_{\diamondsuit} \hspace{110pt} \{\text  {\autoref{eq:norm_tuple}}\} \\
  = & \left\lVert \frac{1}{4} ((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta, i(1-e^{-i\epsilon})\alpha \beta^{\dag}-i(1-e^{i\epsilon})\alpha^{\dag} \beta) \right\rVert_{2} + \\
  & \left\lVert \frac{1}{4} ((1-e^{i\epsilon}) \alpha^{\dag} \beta + (1-e^{-i\epsilon}) \alpha \beta^{\dag}, i(1-e^{i\epsilon}) \alpha^{\dag} \beta  - i(1-e^{-i\epsilon}) \alpha \beta^{\dag}) \right\rVert_{2} + \\
  & \left\lVert \frac{1}{4} ((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta, i(e^{-i\epsilon}-1) \alpha \beta^{\dag}  - i(e^{i\epsilon}-1) \alpha^{\dag} \beta) \right\rVert_{2} + \\
  & \left\lVert \frac{1}{4} ((e^{i\epsilon}-1) \alpha^{\dag} \beta  + (e^{-i\epsilon}-1) \alpha \beta^{\dag}, i(e^{i\epsilon}-1) \alpha^{\dag} \beta  - i(e^{-i\epsilon}-1) \alpha \beta^{\dag}) \right\rVert_{2}  \\
\end{split}
\end{equation}

Applying \autoref{eq:euclidean_distance} to each term, it follows that:

\begin{equation}
  \begin{split}
    \lVert \rho-\rho' \rVert_{\diamondsuit} = &\frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} + (i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta))^{2}} \\
    & + \frac{1}{4} \sqrt{((1-e^{i\epsilon}) \alpha^{\dag} \beta + (1-e^{-i\epsilon}) \alpha \beta^{\dag})^{2} + (i ((1-e^{i\epsilon}) \alpha^{\dag} \beta - (1-e^{-i\epsilon}) \alpha \beta^{\dag}))^{2}} \\
    & + \frac{1}{4} \sqrt{((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta)^{2} + (i((e^{-i\epsilon}-1) \alpha \beta^{\dag}  - (e^{i\epsilon}-1) \alpha^{\dag} \beta))^{2}} \\
    & + \frac{1}{4} \sqrt{((e^{i\epsilon}-1) \alpha^{\dag} \beta  + (e^{-i\epsilon}-1) \alpha \beta^{\dag})^{2} + (i((e^{i\epsilon}-1) \alpha^{\dag} \beta  - (e^{-i\epsilon}-1) \alpha \beta^{\dag}))^{2}} \\
    = & \frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} + (i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta))^{2}} \\ 
    & +\frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} + (-(i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta)))^{2}}\\
    & +  \frac{1}{4} \sqrt{(-((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta))^{2} + (i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta))^{2}} \\
    & + \frac{1}{4} \sqrt{(-((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta))^{2} + (-(i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta)))^{2}}\\
    &=  \frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} + (i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta))^{2}}\\
    &=  \sqrt{4(1-e^{-i\epsilon})(1-e^{i\epsilon})|\alpha|^{2}|\beta|^{2}} = 2 \sqrt{(1-e^{i\epsilon}-e^{-i\epsilon}+1)|\alpha|^{2}|\beta|^{2}} \\
    &= 2\sqrt{2(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}} = 2\sqrt{2} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}} \\
  \end{split}
\end{equation}

  It is possible to observe that when $\epsilon = 0$, the distance between the ideal and noisy implementations of the Hadamard gate in the BellMeasure block is zero, which is consistent with the fact that the ideal and noisy implementations are the same. The same goes for $\epsilon = \pi$, $\alpha= 0$ and  $\beta= 0$ given that only the non-diagonal components of the density matrix are affected by an erroneous phase gate.
  
  Given this result it is possible to conclude that $\textbf{BellMeasure}=_{ 2\sqrt{2} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}}}\textbf{BellMeasure}^{H(\epsilon)}$. Hence, $\textbf{QTP}=_{0+2\sqrt{2} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}}}\textbf{QTP}^{H(\epsilon)}$, \textit{i.e.}, $\textbf{QTP}=_{2\sqrt{2} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}}}\textbf{QTP}^{H(\epsilon)}$ .

%\begin{equation}
  %\begin{split}
    %&\left\lVert \frac{1}{4} ((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta, i(1-e^{-i\epsilon})\alpha \beta^{\dag}-i(1-e^{i\epsilon})\alpha^{\dag} \beta) \right\rVert_{2} = \\
     %& = \frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} + (i ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta))^{2}} \\
    %&= \frac{1}{4} \sqrt{((1-e^{-i\epsilon})\alpha \beta^{\dag}  + (1-e^{i\epsilon})\alpha^{\dag} \beta)^{2} - ((1-e^{-i\epsilon})\alpha \beta^{\dag}-(1-e^{i\epsilon})\alpha^{\dag} \beta)^{2}} \\
    %&= \frac{1}{4} \sqrt{4(1-e^{-i\epsilon})(1-e^{i\epsilon})|\alpha|^{2}|\beta|^{2}} = \frac{1}{2} \sqrt{(1-e^{i\epsilon}-e^{-i\epsilon}+1)|\alpha|^{2}|\beta|^{2}} \\
    %&= \frac{1}{2} \sqrt{2(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}} = \frac{1}{\sqrt{2}} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}} \\
%\end{split}
%\end{equation}


%\begin{equation}
  %\begin{split}
    %&\left\lVert \frac{1}{4} ((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta, i(e^{-i\epsilon}-1) \alpha \beta^{\dag}  - i(e^{i\epsilon}-1) \alpha^{\dag} \beta) \right\rVert_{2} = \\
    %& = \frac{1}{4} \sqrt{(-((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta))^{2} + (-i ((e^{-i\epsilon}-1) \alpha \beta^{\dag}-(e^{i\epsilon}-1) \alpha^{\dag} \beta))^{2}} \\ 
    %& = \frac{1}{4} \sqrt{((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta)^{2} + (i ((e^{-i\epsilon}-1) \alpha \beta^{\dag}-(e^{i\epsilon}-1) \alpha^{\dag} \beta))^{2}} \\
    %&=  \left\lVert \frac{1}{4} ((e^{-i\epsilon}-1) \alpha \beta^{\dag}  + (e^{i\epsilon}-1) \alpha^{\dag} \beta, i(e^{-i\epsilon}-1) \alpha \beta^{\dag}  - i(e^{i\epsilon}-1) \alpha^{\dag} \beta) \right\rVert_{2}\\
    %&=\frac{1}{\sqrt{2}} \sqrt{(1-\cos(\epsilon))|\alpha|^{2}|\beta|^{2}}
%\end{split}
%\end{equation}


\section{Discard Operation} \label{sec:discarding}

The discard operation was defined as the trace, and therefore is also completely positive and trace-preserving.

%One might question why the interpretation of the discard operation was defined as the trace, considering that alternatives like the null operator, which maps everything to zero, seem plausible. However, the trace is the only operator that is completely positive and trace-preserving, which, as previously established, is a requirement for quantum operations. In contrast, the null operator fails to preserve the trace, rendering it unsuitable for this purpose.
%fig:equations-linear-lambda

%ToDo: Discard operations -> The operator should de unique (but there is for instance trace and the null operator_maps everything to zero) and is unique bacausce only trace is trace preserving; example: mallicious attack discard a qubit ou outside of quantum teleportation : setting a qubit do 0, by discarding it and initiating a new one

\subsection{Example: Proving an equivalence using the discard equation-in-context}

This subsection aims to ilustrate how to prove that
\begin{equation}
  - \triangleright \text{disc} \hspace{1pt} (q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*))) \hspace{1pt} \text{to} *. \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit} = - \triangleright q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit} 
\end{equation}
using the discard equation-in-context.

The discard equation in  the bottom line  in \autoref{fig:equations-linear-lambda} states that all judgements $\Gamma \triangleright v : \mathbb{I}$ (with $\Gamma = x_{1} : \mathbb{A}_1, . . . , x_{n} : \mathbb{A}_n)$ carry no different information than that of just discarding all variables available in context $\Gamma$. Therefore considering an empty context $\Gamma = - $, the discard equation states that:
\begin{equation}
  - \triangleright v: \mathbb{I} = - \triangleright *: \mathbb{I}
\end{equation}
Given that as established in \autoref{fig:typing_rules_linear}, $ \text{dis}(v):  \mathbb{I}$, it follows that:
\begin{equation}
 - \triangleright \text{disc} \hspace{1pt} (q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*))) \hspace{1pt} \text{to} *. \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit} = - \triangleright * \hspace{1pt} \text{to} *. \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit}
\end{equation}
Subsequently applying the rule  $ \hspace{2pt} * \hspace{2pt} \text{to} \hspace{2pt}* . \hspace{2pt}v = v$ in \autoref{fig:equations-linear-lambda}, it holds that
\begin{equation}
  \begin{split}
  - \triangleright \text{disc} \hspace{1pt} (q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*))) \hspace{1pt} \text{to} *. \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit} =& - \triangleright * \hspace{1pt} \text{to} *. \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit}\\
  & = - \triangleright q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*)): \textit{qbit} 
\end{split}
\end{equation}

\subsection{Ilustration: A malicious attack on the quantum teleportation protocol}

Now, consider a malicious attack on the quantum teleportation protocol in the form of a bit-flip occurring with a 50\% probability before measurement.   More generally,  one can define an operation $T$ that applies a unitary operation $U$ to the state given as input with 50\% probability. Operation $T$ can be defined as follows:
\begin{equation*}
\begin{split}
  &T: \hspace{5pt} \textit{qbit},...,\textit{qbit}  \multimap \textit{qbit}^{\otimes n} \\
  &T= q_{1}:\textit{qbit},...,q_{n}:\textit{qbit} \hspace{2pt}\triangleright \text{pm} \hspace{2pt} CU ( R_{X}^{\frac{\pi}{2}} (q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*))) ,q_{1},...,q_{n}) \hspace{2pt} \text{to} \hspace{2pt} newq \otimes q. \hspace{2pt} \textit{disc} (newq) 
\end {split}
\end{equation*}

%The operation of flipping a bit with 50\% probability can be conceived as the composition $(I \otimes \text{disc}) \cdot \textit{CNOT} \cdot (I \otimes R_{X}\left(\frac{\pi}{2}\right)) $ after the creation of a new qubit.

This operation is depicted in \autoref{fig:Operation_T}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm,wire
    types={n,n}]%
      \lstick{$\ket{\phi}$}  &\qw \gategroup[2,steps=9,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      T}} & \qw  & \qw   & \qw  & \qw & \qw & \gate{U} \qw &\qw & \qw & \qw \\
      & & & \lstick {$\ket{0}$}  & \qw &\gate{R_X(\frac{\pi}{2})} \qw & \qw & \ctrl{-1} \qw & \qw & \gate{\text{Disc}} \qw 
    \end{quantikz}
  \caption{T operation}
  \label{fig:Operation_T}
\end{figure}

Regarding the calculations, applying operation $T$ to the state $\ket{\psi}$, one has that:
\begin{equation} \label{eq:operation_T}
  \begin{split}
  &\ket{\phi} \bra{\phi}\\
 \xmapsto{I \hspace{1pt} \otimes \hspace{1pt} q \hspace{1pt} (\textit{new}\hspace{1pt}0 \hspace{1pt}(*))} \quad & \ket{\phi} \bra{\phi} \otimes \ket{0} \bra{0} \\
  \xmapsto{\hspace{8pt} I \hspace{1pt} \hspace{1pt} \otimes R_{X}(\frac{\pi}{2})\hspace{8pt}} \quad  & \ket{\phi} \bra{\phi} \otimes \frac{1}{2} \left( \ket{0}\bra{0} -i \ket{0}\bra{1} + i \ket{1}\bra{0} + \ket{1}\bra{1} \right)  \\
  & = \frac{1}{2} \left( \ket{\phi} \bra{\phi}  \ket{0}\bra{0} -i \ket{\phi} \bra{\phi}\ket{0}\bra{1} + i \ket{\phi} \bra{\phi} \ket{1}\bra{0} + \ket{\phi} \bra{\phi}  \ket{1}\bra{1} \right) \\
  \xmapsto{\hspace{22pt} \text{CU} \hspace{22pt}} \quad & \frac{1}{2} \left( \ket{\phi} \bra{\phi} \ket{0}\bra{0} - i\ket{\phi} \bra{\phi}\ket{0}\bra{1} U^{\dag} + i \hspace{1pt} U\ket{\phi} \bra{\phi} \ket{1}\bra{0} + U \ket{\phi} \bra{\phi}  \ket{1}\bra{1}U^{\dag} \right) \\ 
  \xmapsto{\hspace{13pt} I \hspace{1pt}\otimes \hspace{1pt} \text{Disc} \hspace{14pt}} \quad & \frac{1}{2} \left(\ket{\phi} \bra{\phi} + U\ket{\phi} \bra{\phi}U^{\dag} \right) \\
  \end{split} 
\end{equation}

Revisiting the example at hand, the circuit that represents the quantum teleportation protocol with a 50\% probability of occurring a bit flip prior to measurement is depicted in \autoref{fig:teleport_bit_flip}.

\begin{figure} [H]
  \centering
  \begin{quantikz} [column sep=0.2cm, row sep=0.5cm,wire
    types={n,n,n,n,n}]%
      \lstick{$\ket{\psi}$}  & \qw &\qw & \qw & \qw & \qw &  \ctrl{1} \qw \gategroup[2,steps=2,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=above,anchor=south,yshift=-0.2cm}]{{\sc
      TeleportIntra-gate}} & \gate{H} \qw & \qw & \qw &\qw \gategroup[5,steps=18,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      TMeasureCorrection}}  & \qw & \qw & \qw & \targ{} \qw  & \qw & \qw & \qw & \qw & \qw & \qw  & \qw& \meter{} \qw      & \setwiretype{c}  &  &  & & \ctrl[vertical
wire=c]{2}  \\
      \lstick {$\ket{0}$}  &\gate{H} \qw \gategroup[2,steps=3,style={dashed,rounded
      corners,fill=blue!20, inner
      xsep=2pt},background,label style={label
      position=below,anchor=north,yshift=-0.2cm}]{{\sc
      EPR}} & \qw  & \ctrl{1} \qw & \qw & \qw  & \targ{} \qw & \qw & \qw & \qw & \qw& \qw & \qw & \qw & \qw &  \qw & \qw & \qw & \qw &  \qw &  \targ{} \qw & \qw& \meter{} \qw & \setwiretype{c}  & & \ctrl[vertical
wire=c]{1} \\
      \lstick{$\ket{0}$}  &  \qw & \qw &  \targ{} \qw \qw & \qw &\qw&\qw & \qw & \qw& \qw & \qw & \qw & \qw& \qw & \qw & \qw & \qw &  \qw & \qw & \qw & \qw & \qw & \qw & \qw& \qw& \gate{X} \qw & \qw & \gate{Z} \qw\\
       &   & &  &  & & &  &  & & & & & & &  & & & \lstick{$\ket{0}$}  & \gate{R_X(\frac{\pi}{2})} \qw& \ctrl{-2} \qw & \gate{\text{Disc}} \qw  \\
      &   &  & & & & &  &  & & & & \lstick{$\ket{0}$}   &\gate{R_X(\frac{\pi}{2})} \qw  & \ctrl{-4} \qw & \gate{\text{Disc}} \qw & && &  &  &  &  &   & &  &  &  &  &  &
    \end{quantikz}
  \caption{Quantum Teleportation Protocol: Bit flip with  50\% probability before measurement.}
  \label{fig:teleport_bit_flip}
\end{figure}
In this case, the quantum teleportation protocol is divided into three parts: \textbf{EPR}, \textbf{TeleportIntra-gate} and \textbf{TMeasureCorrection}. As a result, it is necessary to define the new functions (note that the function \textbf{EPR} is the same as the one defined in \autoref{sec:teleport}):

\begin{align*}
   &\textbf{BellMeasure}: \hspace{5pt} \textit{qbit} \otimes \textit{qbit}  \multimap \textit{qbit} \otimes \textit{qbit} \\
   &\textbf{TeleportIntra-gate}: \hspace{5pt} \textit{qbit} \otimes \textit{qbit} \otimes \textit{qbit}  \multimap \textit{qbit} \otimes \textit{qbit} \otimes \textit{qbit} \\
   &\textbf{TMeasureCorrection}: \hspace{5pt} \textit{qbit} \otimes \textit{qbit} \otimes \textit{qbit}  \multimap \textit{qbit} \\
\end{align*}

Considering the operation $T_{X \otimes I \otimes I}$ as the operation $T$ with the unitary $U$ represented by $X \otimes I \otimes I$, and similarly, $T_{I \otimes X \otimes I}$ as $T$ with $U$ denoted by $I \otimes U \otimes I$, these funtions can be defined as follows:


\begin{align*}
      &\textbf{TeleportIntra-gate} =  q_{1}: \textit{qbit}, q_{2}: \textit{qbit}  \triangleright  (\text{pm}  \hspace{5pt} \textit{CNOT} (q_{1},q_{2})  \hspace{2pt}  \text{to} \hspace{2pt} x \otimes y.  \hspace{2pt}  \textit{H} (x) \otimes y) \\
      &\textbf{TMeasureCorrection}= q_{1}: \textit{qbit}, q_{2}: \textit{qbit},  q_{3}: \textit{qbit} \triangleright \text{pm} \hspace{2pt} T_{X \otimes I \otimes I} (q_{1},q_{2},q_{3}) \hspace{2pt} \text{to} \hspace{2pt} a \otimes b \otimes c . \hspace{2pt}   \\
      &\hspace{125pt} \text{pm} \hspace{2pt} T_{I \otimes X \otimes I} (a,b,c) \hspace{2pt} \text{to} \hspace{2pt} d \otimes e \otimes q. \\
      & \hspace{125pt} \text{pm} \hspace{2pt} \textit{meas} (d) \otimes \textit{meas} (e)  \hspace{2pt} \text{to} \hspace{2pt} x \otimes y. \hspace{2pt} \\
      &  \hspace{125pt} \text{cond}\hspace{2pt} x \hspace{2pt}  \{\text{inl} (x_{0}) \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow{}  \textit{I}(q) ;  \hspace{5pt} \text{inr} (y_{1}) \Rightarrow  \hspace{2pt}   \textit{X} (q)) \}; \\
      & \hspace{167pt}\text{inr} (x_{1})  \Rightarrow  (\text{cond}\hspace{2pt} y  \hspace{2pt}  \{\text{inl} (y_{0})  \Rightarrow   \textit{Z}(q); \text{inr} (y_{1}) \Rightarrow{} \textit{Z} (\textit{X}(q)) \})\}
 \end{align*}

 Designating the qubit to be teleported as $q_0$, one can conceptualize he quantum teleportation protocol with a 50\% probability of occurring a bit flip prior to measurement as follows:
 \begin{align*}
     \hspace{90pt}& \text{pm} \hspace{5pt} \textbf{EPR}\hspace{1pt} (*) \hspace{5pt} \text{to} \hspace{5pt}  q_{1} \otimes q_{2}.  \notag \\
     & \text{pm}\hspace{5pt} \textbf{TeleportIntra-gate} \hspace{1pt} (q_0,q_{1}) \hspace{5pt}  \text{to} \hspace{5pt} tiq_{0}\otimes tiq_{1} . \notag \\
     & \text{pm} \hspace{5pt}  \textbf{TMeasureCorrection} \hspace{1pt} ( tiq_{0},  tiq_{1}, q_{2} ) \hspace{5pt} \text{to} \hspace{5pt}  q. \hspace{2pt}  q
 \end{align*}
 
 Per \autoref{eq:teleport_correction}, the state of the system post-teleportation protocol corresponds to $\ket{\psi}\bra{\psi}$ in the absence of a malicious attack, denoted as $\rho$.

 Regarding the first two  parts of the teleportation protocol, given \autoref{eq:teleport_1}, one has that:
\begin{equation} \label{eq:teleport_T_part1}
  \begin{split}
  &\ket{\psi} \bra{\psi} \otimes \ket{0} \bra{0} \otimes \ket{0} \bra{0} \\
  \xmapsto{ \hspace{26pt} \text{EPR} \hspace{27pt} } \quad &  \frac{1}{\sqrt{2}} (\alpha|000\rangle + \alpha|011\rangle + \beta|100\rangle + \beta|111\rangle)\\
  \xmapsto{ \hspace{3pt} \text{TeleportIntra-gate} \hspace{3pt} } \quad & |00\rangle \otimes |\psi\rangle  + |01\rangle \otimes X|\psi\rangle + |10\rangle \otimes Z |\psi\rangle + |11\rangle \otimes XZ|\psi\rangle = |\phi\rangle  \\
  \end{split}
\end{equation}

Consequently, the state of the system post-teleportation protocol corresponds to $\ket{\phi}\bra{\phi}$. With respect to $\textbf{TMeasureCorrection}$, considering that,
\begin{equation}
  \begin{split}
     & |\phi\rangle = |00\rangle \otimes |\psi\rangle  + |01\rangle \otimes X|\psi\rangle + |10\rangle \otimes Z |\psi\rangle + |11\rangle \otimes XZ|\psi\rangle \\
      \xmapsto{ \hspace{3pt} X \otimes I \otimes I \hspace{3pt} } \quad &  |10\rangle \otimes |\psi\rangle  + |11\rangle \otimes X|\psi\rangle + |00\rangle \otimes Z |\psi\rangle + |01\rangle \otimes XZ|\psi\rangle \\
      & = |00\rangle \otimes Z |\psi\rangle + |01\rangle \otimes XZ|\psi\rangle + |10\rangle \otimes |\psi\rangle  + |11\rangle \otimes X|\psi\rangle = |\phi'\rangle
  \end{split}
  \end{equation}
And,
\begin{equation}
  \begin{split}
     & |\phi\rangle = |00\rangle \otimes |\psi\rangle  + |01\rangle \otimes X|\psi\rangle + |10\rangle \otimes Z |\psi\rangle + |11\rangle \otimes XZ|\psi\rangle \\
      \xmapsto{ \hspace{3pt} I \otimes X \otimes I \hspace{3pt} } \quad &  |01\rangle \otimes |\psi\rangle  + |00\rangle \otimes X|\psi\rangle + |11\rangle \otimes Z |\psi\rangle + |10\rangle \otimes XZ|\psi\rangle \\
      & = |00\rangle \otimes X|\psi\rangle + |01\rangle \otimes |\psi\rangle + |10\rangle \otimes XZ |\psi\rangle + |11\rangle \otimes Z|\psi\rangle = |\phi''\rangle
  \end{split}
  \end{equation}
  And finally,
  \begin{equation}
  \begin{split}
     & |\phi'\rangle = |00\rangle \otimes Z |\psi\rangle + |01\rangle \otimes XZ|\psi\rangle + |10\rangle \otimes |\psi\rangle  + |11\rangle \otimes X|\psi\rangle \\
     \xmapsto{ \hspace{3pt} I \otimes X \otimes I \hspace{3pt} } \quad & |01\rangle \otimes Z |\psi\rangle + |00\rangle \otimes XZ|\psi\rangle + |11\rangle \otimes |\psi\rangle + |10\rangle \otimes X|\psi\rangle \\
      & = |00\rangle \otimes XZ|\psi\rangle + |01\rangle \otimes Z|\psi\rangle + |10\rangle \otimes X|\psi\rangle + |11\rangle \otimes |\psi\rangle = |\phi'''\rangle
  \end{split}
  \end{equation}
It follows that,
  \begin{equation} \label{eq:teleport_T_part2}
    \begin{split}
    & \ket{\phi}\bra{\phi} \\
     \xmapsto{ \hspace{12pt} T_{X \otimes I \otimes I} \hspace{12pt} } \quad & \frac{1}{2} \left( \ket{\phi} \bra{\phi} + \ket{\phi'} \bra{\phi'}  \right) \hspace{200pt} \{\text{\autoref{eq:operation_T}}\}\\
    \xmapsto{ \hspace{12pt} T_{I \otimes X \otimes I} \hspace{12pt} } \quad & \frac{1}{4} \left( \ket{\phi} \bra{\phi} + \ket{\phi'} \bra{\phi'} + \ket{\phi''} \bra{\phi''} + \ket{\phi'''} \bra{\phi'''}  \right)  \hspace{82pt} \{\text{\autoref{eq:operation_T}}\}\\
    \xmapsto{ \text{meas } \otimes \hspace{1pt} \text{meas} \otimes  I} \quad & \frac{1}{4} \Big(\Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big) \\
    & + \Big(\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4} XZ|\psi\rangle \langle \psi|XZ\Big),\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4}  X|\psi\rangle \langle \psi|X \Big)\Big)\\
    & + \Big(\Big(\frac{1}{4} X|\psi\rangle \langle \psi|X, \frac{1}{4} |\psi\rangle \langle \psi|\Big),\Big(\frac{1}{4} XZ|\psi\rangle \langle \psi|ZX, \frac{1}{4}  Z|\psi\rangle \langle \psi|Z \Big)\Big) \\
   & + \Big(\Big(\frac{1}{4} XZ|\psi\rangle \langle \psi|ZX, \frac{1}{4} Z|\psi\rangle \langle \psi|Z\Big),\Big(\frac{1}{4} X|\psi\rangle \langle \psi|X, \frac{1}{4}  |\psi\rangle \langle \psi| \Big)\Big) \Big) \\    
    \end{split}
  \end{equation}
Next, regarding the condicional statements, applying correction to $\Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big) $ results in the state $\ket{\psi}$ (\autoref{eq:teleport_correction}). Moreover, with respect to  $\Big(\Big(\frac{1}{4} |\psi\rangle \langle \psi|, \frac{1}{4} X|\psi\rangle \langle \psi|X\Big),\Big(\frac{1}{4} Z|\psi\rangle \langle \psi|Z, \frac{1}{4}  XZ|\psi\rangle \langle \psi|ZX \Big)\Big) $ one has that applying the condicional statements: 
\begin{equation}
  \begin{split}
    &\frac{1}{4} Z\ket{\psi}\bra{\psi}Z + \frac{1}{4} XXZ\ket{\psi}\bra{\psi}ZXX+ \frac{1}{4} Z\ket{\psi}\bra{\psi}Z + \frac{1}{4} ZXX\ket{\psi}\bra{\psi}XXZ \\
    =& \frac{1}{4} Z\ket{\psi}\bra{\psi}Z + \frac{1}{4} Z\ket{\psi}\bra{\psi}Z + \frac{1}{4} Z\ket{\psi}\bra{\psi}Z + \frac{1}{4} Z\ket{\psi}\bra{\psi}Z =  Z\ket{\psi}\bra{\psi}Z \\
  \end{split}
\end{equation}
Furthermore, applying correction to $\Big(\Big(\frac{1}{4} X|\psi\rangle \langle \psi|X, \frac{1}{4} |\psi\rangle \langle \psi|\Big),\Big(\frac{1}{4} XZ|\psi\rangle \langle \psi|ZX, \frac{1}{4}  Z|\psi\rangle \langle \psi|Z \Big)\Big)$ results in
\begin{equation}
  \begin{split}
    &\frac{1}{4} X\ket{\psi}\bra{\psi}X + \frac{1}{4} X\ket{\psi}\bra{\psi}X + \frac{1}{4} ZXZ|\psi\rangle \langle \psi|ZXZ +  \frac{1}{4}  ZXZ|\psi\rangle \langle \psi|ZXZ \\
    =& \frac{1}{4} X\ket{\psi}\bra{\psi}X + \frac{1}{4} X\ket{\psi}\bra{\psi}X + \frac{1}{4} X\ket{\psi}\bra{\psi}X + \frac{1}{4} X\ket{\psi}\bra{\psi}X = X\ket{\psi}\bra{\psi}X \\	
  \end{split}
\end{equation}
And, at last, regarding $\Big(\Big(\frac{1}{4} XZ|\psi\rangle \langle \psi|ZX, \frac{1}{4} Z|\psi\rangle \langle \psi|Z\Big),\Big(\frac{1}{4} X|\psi\rangle \langle \psi|X, \frac{1}{4}  |\psi\rangle \langle \psi| \Big)\Big)$, 
\begin{equation}
  \begin{split}
    &\frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX + \frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX + \frac{1}{4} ZX\ket{\psi}\bra{\psi}XZ +  \frac{1}{4}  ZX\ket{\psi}\bra{\psi}XZ \\
   = & \frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX + \frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX + \frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX + \frac{1}{4} XZ\ket{\psi}\bra{\psi}ZX \\
   = & ZX\ket{\psi}\bra{\psi}XZ \\
  \end{split}
\end{equation}

Consequentlty, applying the conditional statements to the state obtained in \autoref{eq:teleport_T_part2}, it follows that,
\begin{equation}
  \begin{split}
    & \frac{1}{4} \left( \ket{\psi}\bra{\psi} + Z\ket{\psi}\bra{\psi}Z + X\ket{\psi}\bra{\psi}X + ZX\ket{\psi}\bra{\psi}XZ   \right) \\
    = &  \frac{1}{4} ( |\alpha|^{2} |0\rangle \langle 0 | + \alpha \beta^{\dag} |0\rangle \langle 1 | + \alpha^{\dag} \beta |1\rangle \langle 0 | + |\beta|^{2} |1\rangle \langle 1 | \\
     & + |\alpha|^{2} \ket{0}\bra{0} - \alpha \beta^{\dag}  \ket{0}\bra{1}  - \alpha^{\dag} \beta \ket{1}\bra{0} + |\beta|^{2} \ket{1}\bra{1}  \\
     &+ |\beta|^{2} \ket{0}\bra{0} +  \alpha^{\dag}  \beta \ket{0}\bra{1}  +  \alpha \beta^{\dag} \ket{1}\bra{0} + |\alpha|^{2} \ket{1}\bra{1} \\
     & + |\beta|^{2} \ket{0}\bra{0} -  \alpha^{\dag}  \beta \ket{0}\bra{1}  -  \alpha \beta^{\dag} \ket{1}\bra{0} + |\alpha|^{2} \ket{1}\bra{1} ) \\
     = &  \frac{|\alpha|^{2} + |\beta|^{2} } {2}  \ket{0}\bra{0} +  \frac{|\alpha|^{2} + |\beta|^{2} } {2}  \ket{1}\bra{1} = \rho'\\
  \end{split}
\end{equation}

Therefore, $\rho-\rho'$ corresponds to:
\begin{equation}
  \begin{split}
    \rho-\rho' = & |\alpha|^{2} \ket{0}\bra{0} + \alpha \beta^{\dag}  \ket{0}\bra{1}  + \alpha^{\dag} \beta \ket{1}\bra{0} + |\beta|^{2} \ket{1}\bra{1} \\ 
    &- \left( \frac{|\alpha|^{2} + |\beta|^{2} } {2}  \ket{0}\bra{0} +  \frac{|\alpha|^{2} + |\beta|^{2} } {2}  \ket{1}\bra{1} \right) \\
    =  & \frac{|\alpha|^{2} - |\beta|^{2} } {2}  \ket{0}\bra{0} + \alpha \beta^{\dag}  \ket{0}\bra{1}  + \alpha^{\dag} \beta \ket{1}\bra{0} + \frac{|\beta|^{2} - |\alpha|^{2} } {2}  \ket{1}\bra{1} \\
  \end{split}
  \end{equation}

Employing \autoref{eq:Bloch_vector}, the components of the Bloch vector of the state $\rho-\rho'$ are as follows:
\begin{equation} {\label{eq:bloch_vector_T}}
  \begin{split}
    r_{x} = &  \text{Tr} \left[ \begin{pmatrix}
      \frac{|\alpha|^{2} - |\beta|^{2} } {2} & \alpha \beta^{\dag}\\
      \alpha^{\dag} \beta & \frac{ |\beta|^{2} - |\alpha|^{2} } {2} 
  \end{pmatrix} \cdot \begin{pmatrix}
  0&1\\
  1&0
  \end{pmatrix} \right]  =  \text{Tr} \left[ \begin{pmatrix}
    \alpha \beta^{\dag} & \frac{|\alpha|^{2} - |\beta|^{2} } {2} \\
    \frac{|\beta|^{2} - |\alpha|^{2} } {2} & \alpha^{\dag} \beta
\end{pmatrix} \right] = \alpha \beta^{\dag} + \alpha^{\dag} \beta \\
r_{y} = &  \text{Tr} \left[ \begin{pmatrix}
  \frac{|\alpha|^{2} - |\beta|^{2} } {2} & \alpha \beta^{\dag}\\
  \alpha^{\dag} \beta & \frac{ |\beta|^{2} - |\alpha|^{2} } {2}
\end{pmatrix} \cdot \begin{pmatrix}
0&-i\\
i&0
\end{pmatrix} \right]  =  \text{Tr} \left[ \begin{pmatrix}
  i \alpha \beta^{\dag} & \frac{|\alpha|^{2} - |\beta|^{2} } {2} \\
  \frac{|\beta|^{2} - |\alpha|^{2} } {2} & -i\alpha^{\dag} \beta
\end{pmatrix} \right] = i(\alpha \beta^{\dag} - \alpha^{\dag} \beta) \\
r_{z} = &  \text{Tr} \left[ \begin{pmatrix}
  \frac{|\alpha|^{2} - |\beta|^{2} } {2} & \alpha \beta^{\dag}\\
  \alpha^{\dag} \beta & \frac{ |\beta|^{2} - |\alpha|^{2} } {2}
\end{pmatrix} \cdot \begin{pmatrix}
1&0\\
0&-1
\end{pmatrix} \right]  =  \text{Tr} \left[ \begin{pmatrix}
  \frac{|\alpha|^{2} - |\beta|^{2} } {2} & -\alpha \beta^{\dag}\\
  \alpha^{\dag} \beta & -\frac{ |\beta|^{2} - |\alpha|^{2} } {2}
\end{pmatrix} \right] = |\alpha|^{2} - |\beta|^{2}
  \end{split}
  \end{equation}

Considering that the distance between two vectors corresponds to their Euclidean distance, it follows that the distance between the ideal state and its version subjected to the malicious attack is given by:

\begin{equation}
  \begin{split}
  & \lVert \rho-\rho' \rVert_{\diamondsuit} \\
   = \hspace{2pt}&    \left\lVert  \left(\alpha \beta^{\dag} + \alpha^{\dag} \beta , i(\alpha \beta^{\dag} - \alpha^{\dag} \beta),  |\alpha|^{2} - |\beta|^{2} \right)  \right\rVert_{2} \hspace{150pt} & \{\text{\autoref{eq:bloch_vector_T}}\}\\
   = \hspace{2pt}& \sqrt{(\alpha \beta^{\dag} + \alpha^{\dag} \beta)^{2} + (i(\alpha \beta^{\dag} - \alpha^{\dag} \beta))^{2} + (|\alpha|^{2} - |\beta|^{2})^{2}} & \{\text{\autoref{eq:euclidean_distance}}\}\\
   =  \hspace{2pt}& \sqrt{(\alpha \beta^{\dag} + \alpha^{\dag} \beta)^{2} + -(\alpha \beta^{\dag} - \alpha^{\dag} \beta)^{2} + (|\alpha|^{2} - |\beta|^{2})^{2}} \\
   =  \hspace{2pt}&  \sqrt{ 4\alpha \beta^{\dag} \alpha^{\dag} \beta + |\alpha|^{4} - 2|\alpha|^{2}|\beta|^{2} + |\beta|^{4}}= \sqrt{ 4|\alpha|^{2}|\beta|^{2} + |\alpha|^{4} - 2|\alpha|^{2}|\beta|^{2} + |\beta|^{4}} \\
   = \hspace{2pt}&  \sqrt{ |\alpha|^{4} + 2|\alpha|^{2}|\beta|^{2} + |\beta|^{4}} = \sqrt{(|\alpha|^{2} + |\beta|^{2})^{2}} = |\alpha|^{2} + |\beta|^{2} = 1
\end{split}
\end{equation}

