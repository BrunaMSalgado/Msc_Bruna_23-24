\chapter{Contribution}

Main result(s) and their scientific evidence

\section{Introduction}

\section{Summary}

%ToDo: Extending the quantum model with conditionals -> Talk about the model (operadores como morfismos, a nossa estrutura algebrica é o espaços vetorias); CPTP model; measurents and the diamond norm é menor ou igual a um; examples (qualtum walk)
%\todo[inline]{The original todo note withouth changed colours.\newline Here's another line.}
%ToDo: Discard operations -> The operator should de unique (but there is for instance trace and the null operator_maps everything to zero) and is unique bacausce only trace is trace preserving; example: mallicious attack discard a qubit ou outside of quantum teleportation : setting a qubit do 0, by discarding it and initiating a new one

\section{Integration of conditionals}

The notion of approximate equivalence for quantum programming explored in [\cite{dahlqvist2022syntactic}] does not encompass classical control flow. As a result, preliminary work based on [\cite{crole1993categories,selinger2013lecture}]   has been undertaken to address the integration of conditionals. 

\subsection{Integration of conditionals}

The term formation rules for conditionals are depicted in
\autoref{fig:typing_rules_cond}. 

\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
& \hspace{55pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma \triangleright v: \mathbb{A} \\
    \hline
   \Gamma \triangleright \text{inl}(v):  \mathbb{A} \oplus \mathbb{B}
\end{array}
$
\end{minipage}
\hspace{-38pt}
\text{(inl)} 
 \hspace{20pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
      \Gamma \triangleright v:  \mathbb{B} \\
    \hline
   \Gamma \triangleright \text{inr}(v): \mathbb{A} \oplus \mathbb{B}
\end{array}
$ \end{minipage} 
\hspace{-35pt} \text{(inr)} \\
&\hspace{15pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     \Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} \quad \Delta, x: \mathbb{A} \triangleright w: \mathbb{C} \quad \Delta, y: \mathbb{B}  \triangleright u : \mathbb{C}   \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
   E \triangleright \text{ cond } v \hspace{2pt} \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C} 
\end{array}
$
\end{minipage}
\hspace{200pt}
\text{(case)} 
\end{aligned}
\end{split}
\end{equation*}
\caption{Term formation rules for conditionals}
\label{fig:typing_rules_cond}
\end{figure}
Considering  $v \in V$, $w \in W$, and $u \in U$ where $V, W, U$ represent vector spaces, $\textsc{Il}_{V}: V \xrightarrow{} V\oplus W$, denotes the left injection operator, defined as $\textsc{Il}_{V}= v \mapsto (v,0) $; $\textsc{Ir}_{V}: V \xrightarrow{} W \oplus V$, denotes the right injection operator, defined as $\textsc{Ir}_{V}= v \mapsto (0,v) $; and $\text{dist}_{V, W,U}: V \otimes  \left(W \oplus U\right) \xrightarrow{} \left(V \otimes W\right) \oplus \left(V \otimes U\right)$, denotes the distributive property of the tensor product over the direct sum, defined as $\text{dist}_{V, W,U} =  v \otimes  \left(w, u\right) \mapsto \left(v \otimes w, v \otimes u\right)$. The subscripts in these operators will be omitted unless ambiguity arises. Moreover, the operation \text{either} corresponds to:
\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     V  \xrightarrow{} U  \\
      W \xrightarrow{} U  \\
    \hline
  [T,S]: V \oplus W \xrightarrow{} U
\end{array}
$
\end{minipage} \\
\hspace{95pt}&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  [T,S] = (v,w) \mapsto T(v)+S(w) 
\end{array}
$
\end{minipage}
\end{aligned}
\end{split}
\end{equation}
\label{fig:either}
\end{figure}

The interpretation of conditionals is illustrated in \autoref{fig:denotational_sem cond}.

\begin{figure} [H]
\begin{equation}
\begin{split}
\begin{aligned}
&\hspace{-80pt} 
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
     [\![\Gamma \triangleright v: \mathbb{A}]\!] = m   \\
    \hline
  [\![ \Gamma \triangleright \text{inl} (v):  \mathbb{A} \oplus \mathbb{B}  ]\!] = \textsc{Il}  \cdot m
\end{array}
$ \end{minipage}
\hspace{30pt} 
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
     [\![\Gamma \triangleright v:\mathbb{B} ]\!]  = m  \\
    \hline
   [\![\Gamma \triangleright \text{inr} (v):  \mathbb{A} \oplus \mathbb{B}]\!]\!] = \textsc{Ir} \cdot m
\end{array}
$
\end{minipage}\\
\hspace{-25pt}
 \begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c} 
    [\![\Gamma\triangleright v: \mathbb{A} \oplus \mathbb{B} ]\!] = b \quad [\![\Delta, x:\mathbb{A} \triangleright w: \mathbb{C} ]\!] = p  \quad  [\![\Delta,x:\mathbb{B} \triangleright w_{2}: \mathbb{C} ]\!] = q    \quad E \in \text{Sf}(\Gamma;\Delta)  \\
    \hline
  [\![E \triangleright \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\}: \mathbb{C} ]\!] =   \text{either}(p,q) \cdot \text{dist} \cdot \text{sw} \cdot (b \otimes \text{id}) \cdot \text{sp}_{\Gamma;\Delta} \cdot \text{sh}_{E}
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation}
\caption{Judgment interpretation for conditionals}
\label{fig:denotational_sem cond}
\end{figure}

\paragraph{Proof} In order to validate the judgment interpretation for conditionals, it is necessary to demonstrate its correctness.

For the booleans: 
\begin{equation} \label{eq:proof_bool}
 \begin{aligned} 
    \hspace{120pt}&  [\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{A} ]\!] \xrightarrow{\hspace{6pt}\textsc{Il}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!] \\ 
     &[\![\Gamma ]\!]   \xrightarrow{\hspace{5pt}m\hspace{5pt}} [\![\mathbb{B} ]\!] \xrightarrow{\hspace{6pt}\textsc{Ir}\hspace{6pt}} [\![\mathbb{A} \oplus \mathbb{B}]\!]
\end{aligned}   
\end{equation}
Now, for the conditional statement:
\begin{equation} \label{eq:proof_bool_2}
 \begin{aligned} 
    [\![E]\!] & \xrightarrow{\hspace{2pt}\text{sh}_{E}\hspace{2pt}}   [\![\Gamma,\Delta ]\!]   \xrightarrow{\hspace{1pt}\text{sp}_{\Gamma;\Delta}\hspace{1pt}}  [\![\Gamma ]\!] \otimes [\![\Delta ]\!] \xrightarrow{ b \hspace{1pt} \otimes \hspace{1pt} \text{id}} ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!]) \otimes [\![\Delta ]\!] \xrightarrow{\hspace{2pt}\text{sw}\hspace{2pt}}  [\![\Delta ]\!] \otimes ([\![\mathbb{A} ]\!] \oplus [\![\mathbb{B} ]\!])  \\
    & \xrightarrow{\hspace{3pt}\text{dist}\hspace{3pt}} ([\![\Delta ]\!] \otimes [\![\mathbb{A} ]\!]  ) \oplus (  [\![\Delta ]\!] \otimes [\![\mathbb{B} ]\!] ) \xrightarrow{\hspace{1pt}\text{either}(p,q)\hspace{1pt}} [\![\mathbb{C} ]\!]
\end{aligned}   
\end{equation}


The quantum lambda calculus with conditionals is illustrated with an example —the quantum teleportation protocol— in \autoref{appendice:teleport}.


The metric equations for conditionals are presented in \autoref{fig:metric conditionals}. Note that the first two equations are redundant.
\begin{figure} [H]
\begin{equation*}
\begin{split}
\begin{aligned}
 &
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
  v =_{q} w \\
    \hline
   \text{inl}(v) =_{q} \text{inl}(w)
\end{array}
$
\end{minipage}
\hspace{-30pt}
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} w \\
    \hline
   \text{inr}(v) =_{q} \text{inr}(w)
\end{array}
$ \end{minipage} \\
\hspace{-30pt}
&
\begin{minipage}[t]{0.3\textwidth}
$\begin{array}{c}
   v =_{q} v' \quad w=_{r} w' \quad u=_{s}u'   \\
    \hline
  \text{ case } v \hspace{2pt}  \{\text{inl} (x) \Rightarrow w ; \hspace{1pt} \text{inr} (y) \Rightarrow u\} =_{q+\text{max}(r, s )} \text{ case } v' \hspace{2pt}  \{\text{inl} (x) \Rightarrow w' ; \hspace{1pt} \text{inr} (y) \Rightarrow u'\} 
\end{array}
$ \end{minipage}
\end{aligned}
\end{split}
\end{equation*}
\caption{Metric equational system for condicionals}
\label{fig:metric conditionals}
\end{figure}

\paragraph{Proof} In order to validate the metric equational system for conditionals, it is necessary to demonstrate its correctness.

The diamond norm is a particular instance of the operator norm. The operator norm [\cite{guide2006infinite}] for a super-operator $E$ is defined as:
\begin{equation} \label{eq:op_norm}
  \lVert E \rVert_{\sigma} = \text{sup} \{ \lVert E(v) \rVert \hspace{2pt} | \hspace{2pt} \lVert v \rVert = 1 \}
\end{equation}


For the booleans:




%Pergunta: nós só precisamos de trace norm e diamond norm em quantica. Usmos a operator norm porque é mais gereal, ou seja a trace norm está nela contida? Also no livro do waltrous eles chamam operator norm de shatten norm em dimensão infinita


Now, regarding the metric equation for the conditional statement, before validating its correctness, it is necessary to prove a few intermediate results. 

The first step is to demonstrate that for any super-operators $P$ and $Q$ the following holds:
\begin{lemma}\label{lem1}
  $\lVert [P,Q] \rVert_{\sigma} \leq \max \{ \lVert P \rVert_{\sigma}, \lVert Q \rVert_{\sigma} \}$
\end{lemma}



$\textit{Proof.}$ \quad Employing the definition of the operator norm in \autoref{eq:op_norm}, it follows that:
\begin{equation} \label{eq:cond_opnorm2}
  \begin{split}
  &\text{sup}{\{ \lVert [P,Q] (v) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert v \rVert=1  \}}  \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1 \}, \text{sup} \{\lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & = \text{sup}{\{ \lVert [P,Q] (w+u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert = 1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  & =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{max} \{  \text{sup} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  &  =  \text{sup}{\{ \lVert P (w) + Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
\end{split}
\end{equation}

Therefore, by the triangle inequality, proving the inequality in \autoref{eq:cond_opnorm3} suffices to establish  \autoref{lem1}.
\begin{equation} \label{eq:cond_opnorm3}
  \begin{split}
  \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert_{1}=1  \}} \leq \text{sup} \{  \text{max} \{ \lVert P (w) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w  \rVert =1, \lVert Q (u) \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert u \rVert=1  \} \} \\
  \end{split}
\end{equation}


This can be rewritten as:

\begin{equation} 
  \begin{split}
  \lVert w + u   \rVert = 1 \wedge \{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert=1  \}  \leq \text{max}   \left\{ \dfrac{1}{\lVert w \rVert} \lVert P (w) \rVert  \hspace{2pt},  \dfrac{1}{\lVert u \rVert} \lVert Q (u) \rVert   \right\}
\end{split}
\end{equation}

As a result,
\begin{equation} 
  \begin{split}
  \lVert w + u   \rVert = 1 \wedge \text{sup}{\{ \lVert P (w)  \rVert + \lVert Q (u)  \rVert  \hspace{2pt} |  \hspace{2pt}  \lVert w+u \rVert_{1}  \}}  \leq \text{max}   \left\{  \left\lVert P \left( \dfrac{1}{\lVert w \rVert} w \right) \right\rVert  \hspace{2pt},  \left\lVert Q \left( \dfrac{1}{\lVert u \rVert} u \right) \right\rVert   \right\}
\end{split}
\end{equation}

This is equivalent to demonstrating that for $a+b=1$,
\begin{equation} 
\begin{split}
\hspace{110 pt}
    x + y  \leq  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
\end{split}
\end{equation}

This is done by arguing by \textit{reductio ad absurdum}, \textit{i.e.}, supposing otherwise leads to a contradiction:
\begin{equation} 
\begin{split} 
    \hspace{90pt}&
     x + y  >  \max \left\{   \dfrac{1}{a}x  ,   \dfrac{1}{b} y   \right\} \\
    & \Rightarrow  x + y > \dfrac{1}{a}x  \wedge x + y > \dfrac{1}{b}y \\
    & \Rightarrow  a (x + y) > x  \wedge b (x + y)> y \\
    & \Rightarrow  a x + a y > x  \wedge b x + by > y \\
    & \Rightarrow  a x + a y > x  \wedge (1-a) x + (1-a)y > y\\
    & \Rightarrow  a x + a y > x  \wedge x-ax + y -ay > y\\
    & \Rightarrow  x < a x + a y   \wedge x > a x + a y  \\
\end{split}
\end{equation}

\vspace{5pt}

Subsequently, it is imperative to prove that:
\begin{lemma}\label{lemiso}
  $ i= [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ \text{is an isomorphism}.
\end{lemma}

\textit{Proof.} \quad The proof is as follows:

For any vector spaces $V$, $W$, and $U$, $i: (V \otimes U) \oplus (W \otimes U) \xrightarrow{} (V  \oplus W) \otimes U $. If $V$ has dimension $m$, $W$ has dimension $n$, and $U$ has dimension $o$, then the space $(V \otimes U) \oplus (W \otimes U) $ has dimension $mo+no=(m+n)\cdot o$. Similarly, the space $(V\oplus W) \otimes U$ has dimension $(m+n)\cdot o$. Hence, the spaces have the same dimension. Given that spaces with the same dimension are isomorphic [\cite{hefferon2006linear}], it follows that $i$ is an isomorphism.

\vspace{5pt}

Next, it is necessary to demonstrate that for any operators $P$ and $Q$, the identity operator $I$, and an isomorphism $i=[\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ the following holds:

\begin{lemma}\label{lem2}
  $( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]$
\end{lemma}

Which is equivalent to showing that for any vector spaces $V$, $W$, $U$, and $Z$  and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram holds:

\vspace{10pt}


\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-1) edge node [above] {$i$} (m-1-2)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\vspace{10pt}

\textit{Proof.} \quad The proof is straightforward:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \\
    &=  [([P,Q] \otimes I) \cdot (\textsc{Il} \otimes I),([P,Q] \otimes I) \cdot (\textsc{Ir} \otimes I) ]\\
    &=  [P \otimes I, Q \otimes I]
\end{split}
\end{equation}

\vspace{15pt}

Furhtermore, it is imperative to show that the following relation holds:

\begin{lemma}\label{lemi-1}
  $ [P \otimes I, Q \otimes I] \cdot  i^{-1}  = [P,Q] \otimes I$
\end{lemma}

Demonstrating this is equivalent to establishing that for any vector spaces $V$, $W$, $U$, and $Z$, and super-operators $P: V \xrightarrow{} Z$, $Q: W \xrightarrow{} Z$, and $I: U \xrightarrow{} U$, the following diagram commutes:

\vspace{10pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    (m-1-2) edge node [above] {$i^{-1}$} (m-1-1)
    (m-1-2) edge node [right=0.2cm] {$[P,Q] \otimes I$} (m-2-1);
\end{tikzpicture}


\textit{Proof.} \quad The proof is as follows:
\begin{equation}
\begin{split}
    & ( [P,Q] \otimes I) \cdot  i  = [P \otimes I, Q \otimes I]  \hspace{100pt} & \text{\{\autoref{lem2}\}} \\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I) \cdot  i \cdot i^{-1} = [P \otimes I, Q \otimes I] \cdot  i^{-1}\\
    \Leftrightarrow &  \hspace{2pt} ( [P,Q] \otimes I)  = [P \otimes I, Q \otimes I] \cdot  i^{-1}  &\text{\{\autoref{lemiso}\}} \\
\end{split}
\end{equation}

\vspace{10pt}
With \autoref{lem2} and \autoref{lemi-1}, it has been proved that the diagram below is valid:
\vspace{5pt}

\begin{tikzpicture}
  \matrix (m) [matrix of math nodes,row sep=4em,column sep=7em,minimum width=2em]
  {
    V \otimes U \oplus W \otimes U & (V  \oplus W) \otimes U \\
     Z \otimes U \\
  };
  \path[-stealth]
    (m-1-1) edge node [left] {$[P \otimes I, Q \otimes I]$} (m-2-1)
    edge[bend left=5] node [above] {$i$}  (m-1-2) % Adjusted minimum width
    (m-1-2) edge node [right=0.5cm] {$[P,Q] \otimes I$} (m-2-1)
    (m-1-2) edge[bend right=-5] node [below] {$i^{-1}$} (m-1-1); % Added the label to the arrow
\end{tikzpicture}

\vspace{5pt}

Subsequently, it is imperative to prove the following:

\begin{lemma} \label{lem3}
  $  \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \rVert_{1} = 1   $
\end{lemma}

\vspace{10pt}

\textit{Proof.} \quad Employing the definition of the trace norm for a super-operator in \autoref{eq:trace_distance},  considering vector spaces $V$, $W$ and $U$ and vectors $v_i \in V$, $w_i \in W$ and $u_i \in U$, it follows that:
\begin{equation}
\begin{split}
    & \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]  \rVert  \\
    &= \text{max} \{ \lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ] (A) \rVert \hspace{2pt} \vert \hspace{2pt}  \lVert A\rVert =1   \} \\
    &= \text{max} \left\{ \left\lVert [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ] \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert \hspace{2pt} \Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \right\} \\
    & =\text{max} \left\{ \left\lVert \textsc{Il} \otimes I \left(\sum_{i} v_i \otimes u_i  \right)  +  \textsc{Ir} \otimes I \left(\sum_{i} w_i \otimes u_i  \right) \right\rVert \hspace{2pt} \Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \right\} \\
    & = \text{max} \Bigg\{ \left\lVert \textsc{Il} \left(\sum_{i} v_i  \right) \otimes I \left(\sum_{i} u_i  \right) + \textsc{Ir} \left(\sum_{i} w_i \right)\otimes I \left(\sum_{i} u_i  \right) \right\rVert \hspace{2pt} \\
    & \hspace{50pt}\Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \Bigg\} \\
    &= \text{max} \Bigg\{ \left\lVert \left(\sum_{i} v_i,0  \right) \otimes \sum_{i} u_i +  \left(0,\sum_{i} w_i \right) \otimes \sum_{i} u_i   \right\rVert  \hspace{2pt} \Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \Bigg\} \\
    &= \text{max} \Bigg\{ \left\lVert \left(\sum_{i} v_i \otimes  u_i ,0  \right) + \left(0,\sum_{i} w_i \otimes u_i  \right)   \right\rVert  \hspace{2pt} \Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \Bigg\} \\
    &= \text{max} \Bigg\{ \left\lVert \left(\sum_{i} v_i \otimes  u_i ,\sum_{i} w_i \otimes u_i   \right)    \right\rVert  \hspace{2pt} \Bigg\vert \hspace{2pt}  \left\lVert \left(\sum_{i} v_i \otimes u_i,\sum_{i} w_i \otimes u_i  \right) \right\rVert =1    \Bigg\} \\
    &=1
\end{split}
\end{equation}


Now, it is finally possible to approach the proof of the metric equation for the conditional statement. Considering the the semantics of the "case" rule in \autoref{fig:denotational_sem cond}, proving that the "case" rule in \autoref{fig:metric conditionals} is valid is equivalent to demonstrating that for any super-operators $P$ and $Q$ and their respective erroneous versions $P'$ and $Q'$, the following holds:
\begin{theorem} \label {theorem:1.1}
  $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$
\end{theorem}
\vspace{10pt}
\textit {Proof.} 
Here, $\text{d}(A,B)$ denotes the distance between super-operators $A$ and $B$, which in the quantum paradigm corresponds to the diamond norm between the two super-operators. Hence, employing the definition of the diamond norm in \autoref{eq:diamond_distance}, and denoting $ [\textsc{Il} \otimes I, \textsc{Ir} \otimes I ]$ by $i$ it follows that:

%\begin{equation}
%\begin{split}
  %& \text{d} ([P,Q],[P',Q'])  \\
  %&=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert_{1}  \\
  %&=   \lVert [P \otimes I, Q \otimes I]  - [P' \otimes I, Q' \otimes I]  \rVert_{1}  \\
  %&=  \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert_{1}   \\
  %&= \lVert [P -P', Q-Q' ] \otimes I \cdot i \rVert_{1}  \\
%\end{split}
%\end{equation}

\begin{equation} \label{eq:proof_theorem1.1_esq}
  \begin{split}
    & \text{d} ([P,Q],[P',Q'])  \\
    &=  \lVert  [P,Q] \otimes I - [P',Q'] \otimes I   \rVert  \\
    &=   \lVert [P \otimes I, Q \otimes I] \cdot i  - [P' \otimes I, Q' \otimes I]  \cdot i  \rVert  \\
    &=  \lVert [P - P' \otimes I, Q-Q' \otimes I] \cdot i  \rVert   \\
    & \leq \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert \lVert i  \rVert  \\
    &=  \lVert [P - P' \otimes I, Q-Q' \otimes I]  \rVert \hspace{200 pt} \text{by  \autoref{lem3}} \\
  \end{split}
  \end{equation}



%\begin{equation}
  %\begin{split}
    %& \text{d} ([P,Q],[P',Q'])  \\
    %&=   \lVert  [P,Q] \otimes I - [P',Q'] \otimes I    \rVert_{1} \hspace{2pt} \\
    %&=   \lVert  [P-P',Q-Q'] \otimes I  \rVert_{1}   \\
    %&=    \lVert  [P-P',Q-Q'] \rVert_{1} \lVert I \rVert_{1}\hspace{2pt} \\
    %&=    \lVert  [P-P',Q-Q'] \rVert_{1} \hspace{2pt} \\
  %\end{split}
  %\end{equation}

  % The spectral norm is submultiplicative with respect to compositions and multiplicative with respect to tensor products,

  % Flar sobre definições de normas


%m

and
\begin{equation} \label {eq:proof_theorem1.1_dir}
\begin{split}
   &  \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\} \\
   &=  \text{max} \{ \text{max} \{ \lVert (P \otimes I - P' \otimes I) (v)  \rVert \vert \lVert v \rVert=1 \}, \text{max} \{ \lVert (Q \otimes I - Q' \otimes I) (w)  \rVert \vert \lVert w \rVert=1 \} \} \\
   &=  \text{max} \{ \text{max} \{ \lVert (P \otimes I - P' \otimes I) (v)  \rVert ,  \lVert (Q \otimes I - Q' \otimes I) (w)  \rVert \vert  \lVert v \rVert=1 \wedge \lVert w \rVert=1  \} \} \\
\end{split}
\end{equation}

Finally, with results in \autoref{eq:proof_theorem1.1_esq} and \autoref{eq:proof_theorem1.1_dir}, by Lemma \autoref{lem1}, it follows that $\text{d} ([P,Q],[P',Q']) \leq \text{max} \{\text{d} (P,P'),\text{d} (Q,Q')\}$, which concludes the proof of theorem \autoref{theorem:1.1}.






%hefferon2006linear


\subsection{Ilustration: Noisy Quantum Teleportation}

\vspace{0pt}

To study decoherence in a quantum channel within the presented metric deductive system, one can consider the application of a dephasing channel in the quantum teleportation protocol with a certain probability $p$. This is exemplified for probabilities $p=0.5$ and $p=0.25$. It is worth noting that similar exercises can be done for scenarios such as a malicious attack involving a bit flip during measurement or the presence of a noisy channel.